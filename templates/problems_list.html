{% extends "base.html "%}

{% block title %} 
    {% if topic %}{{ topic }}{% else %}Problem Categories{% endif %} - Learning
{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="/static/problem_list_tpl_style.css">
{% endblock%}

{% block body %}

<!-- ========================= -->
<!-- HEADER SECTION -->
<!-- ========================= -->
<div class="header-section">
    <div style="position: relative; max-width: 800px; margin: 0 auto;">
        <div style="position: absolute; left: 20px; top: 0; display: flex; gap: 10px;">
            <a href="{{ url_for('notes.index') }}" class="home-btn">
                <i class="fas fa-home"></i>
            </a>
            {% if topic %}
            <a href="{{ url_for('problems.kind_of_problem') }}" class="home-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            {% endif %}
        </div>
    </div>
    <h1>
        {% if topic %}
            üìö {{ topic }}
        {% else %}
            üéØ Problem Categories
        {% endif %}
    </h1>
    <p class="subtitle">
        {% if topic %}
            Select a problem to view
        {% else %}
            Choose a category to explore
        {% endif %}
    </p>
</div>

<!-- ========================= -->
<!-- MAIN CONTENT -->
<!-- ========================= -->
<div class="content-container">
<div class="card">
    <h5 class="card-title">
        <i class="fas fa-list"></i>
        {% if topic %}Available Problems{% else %}Available Categories{% endif %}
    </h5>
    <ul class="list-group">
        {% if topic %}
            <!-- Problem list view (files) -->
            {% for link_dic in lists_of_link_dic['files'] %}
            <li class="list-group-item">
                <a href="{{ url_for('notes.proxy_pdf', url='https://drive.google.com/uc?id=' + link_dic['link_id'] +'&export=download') }}" target="_blank">
                    <span class="list-icon">üìÑ</span>
                    <span>{{ link_dic['name'].split('.')[0] }}</span>
                </a>
                <span class="list-number">{{ loop.index }}</span>
            </li>
            {% endfor %}
        {% else %}
            <!-- Category list view -->
            {% for category in categorized_links.keys() %}
            <li class="list-group-item">
                <a href="/note/kind_of_problem/{{ category }}">
                    <span class="list-icon">üìÅ</span>
                    <span>{{ category }}</span>
                </a>
                <span class="list-number">{{ loop.index }}</span>
            </li>
            {% endfor %}
        {% endif %}
    </ul>
</div>
</div>

{% endblock %}
