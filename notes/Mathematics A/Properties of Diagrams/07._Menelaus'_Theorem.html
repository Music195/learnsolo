<!DOCTYPE html>
<!-- tags: Geometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Menelaus' Theorem (メネラウスの定理)
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   /* Enhanced text containment and scrolling */
   .container, .main-content, .section, .explain, .formula, .condition, .example, .application, .problem-item, .solution-content, .key-takeaways, .interactive-demo, .demo-result, .calculation-steps, .calculation-step, .rule-card, .visualization-container, .diagram-container, .theorem-statement, .proof-steps, .proof-step, .geometry-explanation {
    word-wrap: break-word;
    overflow-wrap: break-word;
    overflow: auto;
   }
   
   /* Theorem statement styling */
   .theorem-statement {
    background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
    border: 3px solid #f57c00;
    border-radius: 15px;
    padding: 25px;
    margin: 25px 0;
    text-align: center;
    font-size: 1.2em;
    font-weight: bold;
    box-shadow: 0 6px 12px rgba(245, 124, 0, 0.15);
   }
   
   .theorem-statement .formula {
    background: white;
    padding: 15px;
    border-radius: 10px;
    border: 2px solid #f57c00;
    margin: 15px 0;
    font-size: 1.1em;
   }
   
   /* Geometry explanation */
   .geometry-explanation {
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
    border: 2px solid #e91e63;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(233, 30, 99, 0.1);
   }
   
   /* Interactive demo styling */
   .interactive-demo {
    background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
    border: 2px solid #4caf50;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(76, 175, 80, 0.1);
   }
   
   .demo-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin: 15px 0;
    align-items: center;
   }
   
   .control-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
   }
   
   .control-group label {
    font-weight: bold;
    color: #2e7d32;
   }
   
   .control-group input {
    width: 80px;
    padding: 5px;
    border: 1px solid #4caf50;
    border-radius: 5px;
   }
   
   .demo-result {
    background: white;
    border: 2px solid #4caf50;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
    font-family: monospace;
    font-size: 1.1em;
   }
   
   /* Canvas styling */
   #menelausCanvas {
    border: 2px solid #4caf50;
    border-radius: 8px;
    background: white;
    display: block;
    margin: 10px auto;
   }
   
   /* Proof steps styling */
   .proof-steps {
    background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
    border: 2px solid #9c27b0;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(156, 39, 176, 0.1);
   }
   
   .proof-step {
    background: white;
    border: 1px solid #9c27b0;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 0 2px 4px rgba(156, 39, 176, 0.1);
   }
   
   .proof-step h4 {
    color: #7b1fa2;
    margin: 0 0 10px 0;
   }
   
   /* Examples styling */
   .example {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    border: 2px solid #2196f3;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(33, 150, 243, 0.1);
   }
   
   .example h3 {
    color: #1976d2;
    border-bottom: 2px solid #2196f3;
    padding-bottom: 5px;
   }
   
   /* Applications styling */
   .application {
    background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
    border: 2px solid #ff9800;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(255, 152, 0, 0.1);
   }
   
   .application h3 {
    color: #f57c00;
    border-bottom: 2px solid #ff9800;
    padding-bottom: 5px;
   }
   
   /* Practice problems styling */
   .practice-problems {
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
    border: 2px solid #e91e63;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(233, 30, 99, 0.1);
   }
   
   .practice-problems h3 {
    color: #c2185b;
    border-bottom: 2px solid #e91e63;
    padding-bottom: 5px;
   }
   
   .problem-item {
    background: white;
    border: 1px solid #e91e63;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 0 2px 4px rgba(233, 30, 99, 0.1);
   }
   
   .solution-button {
    background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: background 0.3s;
   }
   
   .solution-button:hover {
    background: linear-gradient(135deg, #45a049 0%, #4caf50 100%);
   }
   
   .solution-content {
    background: #f8f8f8;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 15px;
    margin: 10px 0;
    display: none;
   }
   
   /* Key takeaways styling */
   .key-takeaways {
    background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
    border: 2px solid #3f51b5;
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(63, 81, 181, 0.1);
   }
   
   .key-takeaways h3 {
    color: #303f9f;
    border-bottom: 2px solid #3f51b5;
    padding-bottom: 5px;
   }
   
   .key-takeaways ul {
    margin: 10px 0;
    padding-left: 20px;
   }
   
   .key-takeaways li {
    margin: 8px 0;
    line-height: 1.5;
   }
   
   /* Responsive design */
   @media (max-width: 768px) {
    .theorem-statement, .geometry-explanation, .interactive-demo, .proof-steps, .example, .application, .practice-problems, .key-takeaways {
     margin: 15px 0;
     padding: 15px;
    }
    
    .demo-controls {
     flex-direction: column;
     align-items: stretch;
    }
    
    .control-group input {
     width: 100%;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Geometry">
   Menelaus' Theorem (メネラウスの定理)
  </div>
  <div class="container">
   <div class="main-content">
    
    <div class="theorem-statement">
     <h2>Menelaus' Theorem</h2>
     <p>In triangle ABC, if a line ℓ (not passing through any vertex) intersects the sides BC, CA, AB (or their extensions) at points P, Q, R respectively, then:</p>
     <div class="formula">
      $\dfrac{BP}{PC} \cdot \dfrac{CQ}{QA} \cdot \dfrac{AR}{RB} = 1$
     </div>
    </div>
    
    <div class="geometry-explanation">
     <h3>Geometric Interpretation</h3>
     <p>Menelaus' Theorem deals with a transversal line that intersects all three sides of a triangle (or their extensions). The theorem states that when this happens, the product of the ratios of the segments created on each side equals 1.</p>
     <p>The ratios are taken in a specific order: from the vertex towards the opposite side, following the transversal line's intersection points.</p>
    </div>
    
    <div class="interactive-demo">
     <h3>Interactive Demonstration</h3>
     <p>Move the sliders to change the position of the transversal line and observe how the ratios change. When the product equals 1, the line is in the correct position.</p>
     
     <canvas id="menelausCanvas" width="500" height="400"></canvas>
     
     <div class="demo-controls">
      <div class="control-group">
       <label for="lineX1">Line Start X: <span id="lineX1Value">50</span></label>
       <input type="range" id="lineX1" min="0" max="100" value="50">
      </div>
      <div class="control-group">
       <label for="lineY1">Line Start Y: <span id="lineY1Value">100</span></label>
       <input type="range" id="lineY1" min="50" max="150" value="100">
      </div>
      <div class="control-group">
       <label for="lineX2">Line End X: <span id="lineX2Value">450</span></label>
       <input type="range" id="lineX2" min="400" max="500" value="450">
      </div>
      <div class="control-group">
       <label for="lineY2">Line End Y: <span id="lineY2Value">300</span></label>
       <input type="range" id="lineY2" min="250" max="350" value="300">
      </div>
     </div>
     
     <div class="demo-result">
      <strong>Current Ratios:</strong><br>
      BP/PC = <span id="ratioBP">1.00</span><br>
      CQ/QA = <span id="ratioCQ">1.00</span><br>
      AR/RB = <span id="ratioAR">1.00</span><br>
      <strong>Product: <span id="product">1.00</span></strong>
     </div>
    </div>
    
    <div class="proof-steps">
     <h3>Proof of Menelaus' Theorem</h3>
     
     <div class="proof-step">
      <h4>Step 1: Set up coordinate geometry</h4>
      <p>Place triangle ABC on a coordinate plane. Let the transversal line intersect the sides at points P, Q, R. Express the coordinates of these intersection points.</p>
     </div>
     
     <div class="proof-step">
      <h4>Step 2: Use area ratios</h4>
      <p>Consider the areas of the smaller triangles formed by the transversal line. The ratios of areas will be equal to the ratios of the segments.</p>
     </div>
     
     <div class="proof-step">
      <h4>Step 3: Apply area coordinates</h4>
      <p>Using area coordinates (barycentric coordinates), express the position of points P, Q, R and derive the relationship between the ratios.</p>
     </div>
     
     <div class="proof-step">
      <h4>Step 4: Conclude the product equals 1</h4>
      <p>The product of the three ratios equals 1, establishing Menelaus' Theorem.</p>
     </div>
    </div>
    
    <div class="example">
     <h3>Example 1: Basic Application</h3>
     <p>In triangle ABC, a line intersects BC at P such that BP/PC = 2, intersects AC at Q such that CQ/QA = 3/2, and intersects AB at R. Find AR/RB.</p>
     
     <div class="calculation-steps">
      <div class="calculation-step">
       <strong>Given:</strong> BP/PC = 2, CQ/QA = 3/2, AR/RB = x
      </div>
      <div class="calculation-step">
       <strong>Menelaus' Theorem:</strong> (BP/PC) × (CQ/QA) × (AR/RB) = 1
      </div>
      <div class="calculation-step">
       <strong>Substitute:</strong> 2 × (3/2) × x = 1
      </div>
      <div class="calculation-step">
       <strong>Solve:</strong> 3x = 1 → x = 1/3
      </div>
     </div>
     
     <p><strong>Answer:</strong> AR/RB = 1/3</p>
    </div>
    
    <div class="example">
     <h3>Example 2: Coordinate Geometry</h3>
     <p>Triangle ABC has vertices A(0,4), B(0,0), C(6,0). A line with equation y = x + 1 intersects the sides. Verify Menelaus' Theorem.</p>
     
     <div class="calculation-steps">
      <div class="calculation-step">
       <strong>Find intersection points:</strong><br>
       With BC (y=0): x + 1 = 0 → x = -1, so P(-1,0)<br>
       With AC: line from A(0,4) to C(6,0), parametric equations<br>
       With AB: line from A(0,4) to B(0,0), x=0
      </div>
      <div class="calculation-step">
       <strong>Calculate ratios:</strong><br>
       BP/PC = distance from B to P over P to C<br>
       CQ/QA = distance from C to Q over Q to A<br>
       AR/RB = distance from A to R over R to B
      </div>
      <div class="calculation-step">
       <strong>Verify:</strong> Product of ratios = 1
      </div>
     </div>
    </div>
    
    <div class="application">
     <h3>Applications of Menelaus' Theorem</h3>
     
     <div class="rule-card">
      <h4>1. Coordinate Geometry Problems</h4>
      <p>Menelaus' Theorem is frequently used in coordinate geometry to find ratios of segments when a line intersects a triangle's sides.</p>
     </div>
     
     <div class="rule-card">
      <h4>2. Ceva's Theorem Relationship</h4>
      <p>Menelaus' Theorem is the "transversal version" of Ceva's Theorem. While Ceva's deals with concurrent cevians from vertices, Menelaus' deals with transversal lines.</p>
     </div>
     
     <div class="rule-card">
      <h4>3. Triangle Constructions</h4>
      <p>The theorem helps in constructing triangles with specific properties and verifying geometric constructions.</p>
     </div>
     
     <div class="rule-card">
      <h4>4. Proof of Other Theorems</h4>
      <p>Menelaus' Theorem serves as a foundation for proving other geometric theorems and properties.</p>
     </div>
    </div>
    
    <div class="practice-problems">
     <h3>Practice Problems</h3>
     
     <div class="problem-item">
      <strong>Problem 1:</strong> In triangle ABC, a line intersects BC at P with BP/PC = 3, and intersects AC at Q with CQ/QA = 2. Find AR/RB.
      <button class="solution-button" onclick="toggleSolution(1)">Show Solution</button>
      <div id="solution1" class="solution-content">
       <strong>Solution:</strong><br>
       Using Menelaus' Theorem: (BP/PC) × (CQ/QA) × (AR/RB) = 1<br>
       3 × 2 × x = 1<br>
       6x = 1<br>
       x = 1/6<br>
       <strong>Answer:</strong> AR/RB = 1/6
      </div>
     </div>
     
     <div class="problem-item">
      <strong>Problem 2:</strong> In triangle ABC, points P, Q, R divide sides BC, CA, AB respectively such that BP:PC = 1:2, CQ:QA = 3:1, and AR:RB = x:1. Find x.
      <button class="solution-button" onclick="toggleSolution(2)">Show Solution</button>
      <div id="solution2" class="solution-content">
       <strong>Solution:</strong><br>
       BP/PC = 1/2, CQ/QA = 3/1 = 3, AR/RB = x/1 = x<br>
       Using Menelaus' Theorem: (1/2) × 3 × x = 1<br>
       (3/2)x = 1<br>
       x = 2/3<br>
       <strong>Answer:</strong> x = 2/3
      </div>
     </div>
     
     <div class="problem-item">
      <strong>Problem 3:</strong> Triangle ABC has a transversal line such that the ratios BP/PC = 2, CQ/QA = 1/3, AR/RB = 4. Does this line satisfy Menelaus' Theorem?
      <button class="solution-button" onclick="toggleSolution(3)">Show Solution</button>
      <div id="solution3" class="solution-content">
       <strong>Solution:</strong><br>
       Check product: 2 × (1/3) × 4 = 8/3 ≠ 1<br>
       <strong>Answer:</strong> No, the product is 8/3, not 1.
      </div>
     </div>
     
     <div class="problem-item">
      <strong>Problem 4:</strong> In triangle ABC, a line parallel to BC intersects AB and AC at points D and E respectively. Find the ratio AD/DB.
      <button class="solution-button" onclick="toggleSolution(4)">Show Solution</button>
      <div id="solution4" class="solution-content">
       <strong>Solution:</strong><br>
       Since DE ∥ BC, triangles ADE and ABC are similar.<br>
       Let AD/DB = x, then AE/EC = x (by similarity)<br>
       Using Menelaus' Theorem with transversal DE:<br>
       (BD/DC) × (CE/EA) × (AF/FB) = 1<br>
       But DE ∥ BC, so CE/EA = AD/DB = x<br>
       And BD/DC = AD/DB = x (since D divides AB)<br>
       So x × x × 1 = 1 → x² = 1 → x = 1<br>
       <strong>Answer:</strong> AD/DB = 1 (midpoint)
      </div>
     </div>
     
     <div class="problem-item">
      <strong>Problem 5:</strong> Triangle ABC has points P, Q, R on sides BC, CA, AB respectively such that BP/PC = 3, CQ/QA = 4, AR/RB = 2. Find the product.
      <button class="solution-button" onclick="toggleSolution(5)">Show Solution</button>
      <div id="solution5" class="solution-content">
       <strong>Solution:</strong><br>
       Product = 3 × 4 × 2 = 24 ≠ 1<br>
       <strong>Answer:</strong> The product is 24, so the points do not lie on a straight line.
      </div>
     </div>
    </div>
    
    <div class="key-takeaways">
     <h3>Key Takeaways</h3>
     <ul>
      <li>Menelaus' Theorem applies to any transversal line that intersects all three sides of a triangle (or their extensions)</li>
      <li>The product of the three ratios (BP/PC × CQ/QA × AR/RB) always equals 1 for such lines</li>
      <li>The theorem is useful for finding unknown ratios when two are known</li>
      <li>It has applications in coordinate geometry and triangle constructions</li>
      <li>Menelaus' Theorem is related to Ceva's Theorem but deals with transversal lines rather than concurrent cevians</li>
      <li>The theorem can be used to verify whether three points on the sides of a triangle are collinear</li>
     </ul>
    </div>
    
   </div>
  </div>
  
  <script>
   // Interactive Menelaus' Theorem demonstration
   const canvas = document.getElementById('menelausCanvas');
   const ctx = canvas.getContext('2d');
   
   // Triangle vertices
   const A = {x: 100, y: 50};
   const B = {x: 50, y: 350};
   const C = {x: 450, y: 350};
   
   // Control elements
   const lineX1Input = document.getElementById('lineX1');
   const lineY1Input = document.getElementById('lineY1');
   const lineX2Input = document.getElementById('lineX2');
   const lineY2Input = document.getElementById('lineY2');
   
   const lineX1Value = document.getElementById('lineX1Value');
   const lineY1Value = document.getElementById('lineY1Value');
   const lineX2Value = document.getElementById('lineX2Value');
   const lineY2Value = document.getElementById('lineY2Value');
   
   const ratioBP = document.getElementById('ratioBP');
   const ratioCQ = document.getElementById('ratioCQ');
   const ratioAR = document.getElementById('ratioAR');
   const product = document.getElementById('product');
   
   function drawTriangle() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw triangle
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 2;
    ctx.stroke();
    
    // Label vertices
    ctx.fillStyle = '#333';
    ctx.font = '16px Arial';
    ctx.fillText('A', A.x - 15, A.y - 10);
    ctx.fillText('B', B.x - 15, B.y + 20);
    ctx.fillText('C', C.x + 10, C.y + 20);
    
    // Draw transversal line
    const lineStart = {
     x: 50 + (lineX1Input.value / 100) * 200,
     y: 100 + (lineY1Input.value - 50) / 100 * 200
    };
    const lineEnd = {
     x: 300 + (lineX2Input.value - 400) / 100 * 200,
     y: 200 + (lineY2Input.value - 250) / 100 * 200
    };
    
    ctx.beginPath();
    ctx.moveTo(lineStart.x, lineStart.y);
    ctx.lineTo(lineEnd.x, lineEnd.y);
    ctx.strokeStyle = '#e91e63';
    ctx.lineWidth = 3;
    ctx.stroke();
    
    // Find intersection points
    const P = findIntersection(lineStart, lineEnd, B, C);
    const Q = findIntersection(lineStart, lineEnd, C, A);
    const R = findIntersection(lineStart, lineEnd, A, B);
    
    if (P && Q && R) {
     // Draw intersection points
     drawPoint(P, 'P', '#e91e63');
     drawPoint(Q, 'Q', '#e91e63');
     drawPoint(R, 'R', '#e91e63');
     
     // Calculate ratios
     const bp_pc = distance(B, P) / distance(P, C);
     const cq_qa = distance(C, Q) / distance(Q, A);
     const ar_rb = distance(A, R) / distance(R, B);
     
     // Update display
     ratioBP.textContent = bp_pc.toFixed(2);
     ratioCQ.textContent = cq_qa.toFixed(2);
     ratioAR.textContent = ar_rb.toFixed(2);
     product.textContent = (bp_pc * cq_qa * ar_rb).toFixed(2);
     
     // Color code based on product
     const prod = bp_pc * cq_qa * ar_rb;
     if (Math.abs(prod - 1) < 0.1) {
      product.style.color = '#4caf50';
     } else {
      product.style.color = '#f44336';
     }
    }
   }
   
   function findIntersection(line1Start, line1End, line2Start, line2End) {
    const x1 = line1Start.x, y1 = line1Start.y;
    const x2 = line1End.x, y2 = line1End.y;
    const x3 = line2Start.x, y3 = line2Start.y;
    const x4 = line2End.x, y4 = line2End.y;
    
    const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);
    if (Math.abs(denom) < 1e-10) return null;
    
    const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;
    const u = -((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denom;
    
    if (t >= 0 && t <= 1 && u >= 0 && u <= 1) {
     return {
      x: x1 + t * (x2 - x1),
      y: y1 + t * (y2 - y1)
     };
    }
    return null;
   }
   
   function distance(p1, p2) {
    return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);
   }
   
   function drawPoint(point, label, color) {
    ctx.beginPath();
    ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.strokeStyle = color;
    ctx.stroke();
    
    ctx.fillStyle = color;
    ctx.font = '14px Arial';
    ctx.fillText(label, point.x + 8, point.y - 8);
   }
   
   // Event listeners
   lineX1Input.addEventListener('input', function() {
    lineX1Value.textContent = this.value;
    drawTriangle();
   });
   
   lineY1Input.addEventListener('input', function() {
    lineY1Value.textContent = this.value;
    drawTriangle();
   });
   
   lineX2Input.addEventListener('input', function() {
    lineX2Value.textContent = this.value;
    drawTriangle();
   });
   
   lineY2Input.addEventListener('input', function() {
    lineY2Value.textContent = this.value;
    drawTriangle();
   });
   
   // Initial draw
   drawTriangle();
   
   // Solution toggle function
   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    const button = solution.previousElementSibling;
    
    if (solution.style.display === 'none') {
     solution.style.display = 'block';
     button.textContent = 'Hide Solution';
    } else {
     solution.style.display = 'none';
     button.textContent = 'Show Solution';
    }
   }
  </script>
 </body>
</html>
