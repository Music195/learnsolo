<!DOCTYPE html>
<!-- tags: Trigonometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Trigonometric Addition and Subtraction Formulas
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .interactive-demo {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border: 2px solid #3498db;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
   }
   .demo-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: center;
    margin-bottom: 20px;
   }
   .control-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
   }
   .control-group label {
    font-weight: bold;
    color: #2c3e50;
   }
   .control-group input, .control-group select {
    padding: 8px;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    font-size: 14px;
   }
   .demo-output {
    background: white;
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
    border: 1px solid #ecf0f1;
   }
   .formula-block {
    background: #ecf0f1;
    border-left: 4px solid #3498db;
    padding: 15px;
    margin: 15px 0;
    font-family: 'Times New Roman', serif;
   }
   .practice-problem {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
   }
   .solution {
    background: #d4edda;
    border: 1px solid #c3e6cb;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    display: none;
   }
   .solution-button {
    background: #007bff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
   }
   .solution-button:hover {
    background: #0056b3;
   }
   .key-takeaways {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
   }
   .key-takeaways h3 {
    margin-top: 0;
    color: white;
   }
   .key-takeaways ul {
    margin: 10px 0 0 0;
    padding-left: 20px;
   }
   .key-takeaways li {
    margin: 8px 0;
   }
   .worked-example {
    background: #e8f4f8;
    border: 1px solid #bee5eb;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
   }
   .worked-example h4 {
    margin-top: 0;
    color: #0c5460;
   }
   .math-foundation {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
   }
   .math-foundation h3 {
    margin-top: 0;
    color: #2c3e50;
   }
   .canvas-container {
    text-align: center;
    margin: 20px 0;
    position: relative;
   }
   .canvas-legend {
    background: rgba(255,255,255,0.9);
    border-radius: 5px;
    padding: 10px;
    margin-top: 10px;
    display: inline-block;
    font-size: 14px;
   }
   .legend-item {
    display: inline-block;
    margin: 0 15px;
   }
   .legend-color {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 5px;
    vertical-align: middle;
   }
   .formula-highlight {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 5px;
    padding: 10px;
    margin: 10px 0;
    font-weight: bold;
   }
   @media (max-width: 768px) {
    .demo-controls {
     flex-direction: column;
     align-items: stretch;
    }
    .control-group {
     width: 100%;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Trigonometry">
   Trigonometric Addition and Subtraction Formulas
  </div>
  <div class="container">
   <div class="main-content">

    <div class="math-foundation">
     <h3>Mathematical Foundation</h3>
     <p>The trigonometric addition and subtraction formulas are fundamental identities that express the sine, cosine, and tangent of the sum or difference of two angles in terms of the trigonometric functions of the individual angles. These formulas are essential for simplifying complex trigonometric expressions and solving trigonometric equations.</p>

     <div class="formula-block">
      <strong>Core Addition Formulas:</strong>
      <ul>
       <li>$\sin(\alpha + \beta) = \sin\alpha\cos\beta + \cos\alpha\sin\beta$</li>
       <li>$\cos(\alpha + \beta) = \cos\alpha\cos\beta - \sin\alpha\sin\beta$</li>
       <li>$\tan(\alpha + \beta) = \frac{\tan\alpha + \tan\beta}{1 - \tan\alpha\tan\beta}$</li>
      </ul>
      <strong>Core Subtraction Formulas:</strong>
      <ul>
       <li>$\sin(\alpha - \beta) = \sin\alpha\cos\beta - \cos\alpha\sin\beta$</li>
       <li>$\cos(\alpha - \beta) = \cos\alpha\cos\beta + \sin\alpha\sin\beta$</li>
       <li>$\tan(\alpha - \beta) = \frac{\tan\alpha - \tan\beta}{1 + \tan\alpha\tan\beta}$</li>
      </ul>
     </div>
    </div>

    <div class="interactive-demo">
     <h3>Interactive Addition/Subtraction Formula Calculator</h3>
     <div class="demo-controls">
      <div class="control-group">
       <label for="alpha-input">Angle α (radians):</label>
       <input type="number" id="alpha-input" step="0.1" value="0.5">
      </div>
      <div class="control-group">
       <label for="beta-input">Angle β (radians):</label>
       <input type="number" id="beta-input" step="0.1" value="0.8">
      </div>
      <div class="control-group">
       <label for="operation-select">Operation:</label>
       <select id="operation-select">
        <option value="add">Addition (α + β)</option>
        <option value="subtract">Subtraction (α - β)</option>
       </select>
      </div>
      <button onclick="updateDemo()" style="padding: 8px 16px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer;">Calculate</button>
     </div>

     <div class="canvas-container">
      <canvas id="interactive-canvas" width="600" height="600"></canvas>
      <div class="canvas-legend">
       <div class="legend-item">
        <span class="legend-color" style="background: #27ae60;"></span>
        <span>Angle α</span>
       </div>
       <div class="legend-item">
        <span class="legend-color" style="background: #e74c3c;"></span>
        <span>Result (α ± β)</span>
       </div>
       <div class="legend-item">
        <span class="legend-color" style="background: #3498db;"></span>
        <span>Angle β</span>
       </div>
      </div>
     </div>

     <div class="demo-output" id="demo-output">
      <strong>Current Values:</strong><br>
      α = 0.5 rad, β = 0.8 rad<br>
      sin(α) = 0.479, cos(α) = 0.878<br>
      sin(β) = 0.717, cos(β) = 0.697<br>
      sin(α + β) = 0.997, cos(α + β) = -0.075
     </div>
    </div>

    <div class="worked-example">
     <h4>Worked Example 1: Finding sin(75°)</h4>
     <p>Express sin(75°) in terms of 45° and 30° using the addition formula.</p>
     <p><strong>Solution:</strong></p>
     <p>75° = 45° + 30°, so:</p>
     <p>sin(75°) = sin(45° + 30°) = sin(45°)cos(30°) + cos(45°)sin(30°)</p>
     <p>= (√2/2)(√3/2) + (√2/2)(1/2) = (√6 + √2)/4</p>
     <p>≈ 0.9659</p>
    </div>

    <div class="worked-example">
     <h4>Worked Example 2: Finding cos(15°)</h4>
     <p>Express cos(15°) in terms of 45° and 30° using the subtraction formula.</p>
     <p><strong>Solution:</strong></p>
     <p>15° = 45° - 30°, so:</p>
     <p>cos(15°) = cos(45° - 30°) = cos(45°)cos(30°) + sin(45°)sin(30°)</p>
     <p>= (√2/2)(√3/2) + (√2/2)(1/2) = (√6 + √2)/4</p>
     <p>≈ 0.9659</p>
    </div>

    <div class="worked-example">
     <h4>Worked Example 3: Finding tan(15°)</h4>
     <p>Express tan(15°) in terms of 45° and 30° using the tangent subtraction formula.</p>
     <p><strong>Solution:</strong></p>
     <p>15° = 45° - 30°, so:</p>
     <p>tan(15°) = tan(45° - 30°) = (tan(45°) - tan(30°))/(1 + tan(45°)tan(30°))</p>
     <p>= (1 - 1/√3)/(1 + 1×1/√3) = ((√3 - 1)/√3)/((√3 + 1)/√3) = (√3 - 1)/(√3 + 1)</p>
     <p>Rationalize: (√3 - 1)²/(3 - 1) = (3 - 2√3 + 1)/2 = (4 - 2√3)/2 = 2 - √3</p>
     <p>≈ 0.2679</p>
    </div>

    <h3>Detailed Formulas</h3>

    <div style="margin: 30px 0;">
     <strong>1. Sine Addition and Subtraction Formulas</strong>
     <div class="graybox">
      <strong>Formulas:</strong>
      <div class="formula-highlight">
       $$\sin(\alpha + \beta) = \sin\alpha\cos\beta + \cos\alpha\sin\beta$$
      </div>
      <div class="formula-highlight">
       $$\sin(\alpha - \beta) = \sin\alpha\cos\beta - \cos\alpha\sin\beta$$
      </div>
     </div>
     <p><strong>Note:</strong> The subtraction formula can be derived from the addition formula by replacing β with -β and using the identities sin(-β) = -sinβ and cos(-β) = cosβ.</p>
    </div>

    <div style="margin: 30px 0;">
     <strong>2. Cosine Addition and Subtraction Formulas</strong>
     <div class="graybox">
      <strong>Formulas:</strong>
      <div class="formula-highlight">
       $$\cos(\alpha + \beta) = \cos\alpha\cos\beta - \sin\alpha\sin\beta$$
      </div>
      <div class="formula-highlight">
       $$\cos(\alpha - \beta) = \cos\alpha\cos\beta + \sin\alpha\sin\beta$$
      </div>
     </div>
     <p><strong>Note:</strong> The subtraction formula can be derived from the addition formula by replacing β with -β.</p>
    </div>

    <div style="margin: 30px 0;">
     <strong>3. Tangent Addition and Subtraction Formulas</strong>
     <div class="graybox">
      <strong>Formulas:</strong>
      <div class="formula-highlight">
       $$\tan(\alpha + \beta) = \frac{\tan\alpha + \tan\beta}{1 - \tan\alpha\tan\beta}$$
      </div>
      <div class="formula-highlight">
       $$\tan(\alpha - \beta) = \frac{\tan\alpha - \tan\beta}{1 + \tan\alpha\tan\beta}$$
      </div>
     </div>
     <p><strong>Derivation:</strong> These formulas can be derived from the sine and cosine addition formulas using tanθ = sinθ/cosθ.</p>
    </div>

    <h3>Geometric Visualizations</h3>

    <div style="margin: 30px 0;">
     <strong>4. Visual Proof of Addition Formula</strong>
     <p>The sine and cosine addition formulas can be understood geometrically using the unit circle:</p>
     <div class="canvas-container">
      <canvas id="additionCanvas" width="600" height="600"></canvas>
     </div>
     <p style="text-align: center; font-style: italic;">Geometric representation of sin(α + β) and cos(α + β) on the unit circle</p>
    </div>

    <div style="margin: 30px 0;">
     <strong>5. Alternative Geometric Proof</strong>
     <p>Another way to visualize the addition formula using perpendicular projections:</p>
     <div class="canvas-container">
      <canvas id="proofCanvas" width="600" height="600"></canvas>
     </div>
     <p style="text-align: center; font-style: italic;">Detailed geometric proof showing how sin(α + β) is composed of sin α cos β + cos α sin β</p>
    </div>

    <h3>Practice Problems</h3>

    <div class="practice-problem">
     <strong>Problem 1:</strong> Use the addition formula to find the exact value of sin(105°).
     <br><button class="solution-button" onclick="toggleSolution(1)">Show Solution</button>
     <div class="solution" id="solution1">
      <strong>Solution:</strong><br>
      105° = 60° + 45°<br>
      sin(105°) = sin(60° + 45°) = sin(60°)cos(45°) + cos(60°)sin(45°)<br>
      = (√3/2)(√2/2) + (1/2)(√2/2) = (√6 + √2)/4
     </div>
    </div>

    <div class="practice-problem">
     <strong>Problem 2:</strong> Use the subtraction formula to find the exact value of cos(75°).
     <br><button class="solution-button" onclick="toggleSolution(2)">Show Solution</button>
     <div class="solution" id="solution2">
      <strong>Solution:</strong><br>
      75° = 135° - 60°<br>
      cos(75°) = cos(135° - 60°) = cos(135°)cos(60°) + sin(135°)sin(60°)<br>
      = (-√2/2)(1/2) + (√2/2)(√3/2) = (-√2 + √6)/4
     </div>
    </div>

    <div class="practice-problem">
     <strong>Problem 3:</strong> Use the tangent addition formula to find tan(75°).
     <br><button class="solution-button" onclick="toggleSolution(3)">Show Solution</button>
     <div class="solution" id="solution3">
      <strong>Solution:</strong><br>
      75° = 45° + 30°<br>
      tan(75°) = tan(45° + 30°) = (tan(45°) + tan(30°))/(1 - tan(45°)tan(30°))<br>
      = (1 + 1/√3)/(1 - 1×1/√3) = ((√3 + 1)/√3)/((√3 - 1)/√3) = (√3 + 1)/(√3 - 1)<br>
      Rationalize: (√3 + 1)²/(3 - 1) = (3 + 2√3 + 1)/2 = (4 + 2√3)/2 = 2 + √3
     </div>
    </div>

    <div class="practice-problem">
     <strong>Problem 4:</strong> Simplify sin(x + π/2) using the addition formula.
     <br><button class="solution-button" onclick="toggleSolution(4)">Show Solution</button>
     <div class="solution" id="solution4">
      <strong>Solution:</strong><br>
      sin(x + π/2) = sin(x)cos(π/2) + cos(x)sin(π/2)<br>
      = sin(x)×0 + cos(x)×1 = cos(x)
     </div>
    </div>

    <div class="key-takeaways">
     <h3>Key Takeaways</h3>
     <ul>
      <li><strong>Sine Addition:</strong> sin(α + β) combines sine and cosine of both angles with positive sine-cosine cross terms.</li>
      <li><strong>Cosine Addition:</strong> cos(α + β) combines cosine products minus sine products, creating the angle difference identity.</li>
      <li><strong>Tangent Addition:</strong> tan(α + β) uses a fraction with numerator sum and denominator difference of tangents.</li>
      <li><strong>Subtraction Formulas:</strong> Derived by replacing β with -β, maintaining the same structure with sign changes.</li>
      <li><strong>Geometric Interpretation:</strong> The formulas represent the composition of rotations on the unit circle.</li>
      <li><strong>Applications:</strong> Essential for solving trigonometric equations, simplifying expressions, and finding exact values of compound angles.</li>
     </ul>
    </div>

    <script>
     function updateDemo() {
      const alpha = parseFloat(document.getElementById('alpha-input').value);
      const beta = parseFloat(document.getElementById('beta-input').value);
      const operation = document.getElementById('operation-select').value;
      const canvas = document.getElementById('interactive-canvas');
      const ctx = canvas.getContext('2d');
      const w = canvas.width;
      const h = canvas.height;
      const centerX = w / 2;
      const centerY = h / 2;
      const radius = 200;

      // Clear canvas
      ctx.clearRect(0, 0, w, h);

      // Unit circle
      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Axes
      ctx.beginPath();
      ctx.moveTo(50, centerY);
      ctx.lineTo(w - 50, centerY);
      ctx.moveTo(centerX, 50);
      ctx.lineTo(centerX, h - 50);
      ctx.strokeStyle = '#666';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Arrow tips
      ctx.fillStyle = '#666';
      ctx.beginPath();
      ctx.moveTo(w - 50, centerY);
      ctx.lineTo(w - 57, centerY - 4);
      ctx.lineTo(w - 57, centerY + 4);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(centerX, 50);
      ctx.lineTo(centerX - 4, 57);
      ctx.lineTo(centerX + 4, 57);
      ctx.fill();

      // Point at angle α (green)
      const pax = centerX + radius * Math.cos(alpha);
      const pay = centerY - radius * Math.sin(alpha);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(pax, pay);
      ctx.strokeStyle = '#27ae60';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(pax, pay, 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#27ae60';
      ctx.fill();

      // Angle arc α
      ctx.beginPath();
      ctx.arc(centerX, centerY, 50, 0, alpha, false);
      ctx.strokeStyle = '#27ae60';
      ctx.lineWidth = 2;
      ctx.stroke();

      let resultAngle, color, label;

      if (operation === 'add') {
       resultAngle = alpha + beta;
       color = '#e74c3c';
       label = 'α + β';
      } else {
       resultAngle = alpha - beta;
       color = '#e74c3c';
       label = 'α - β';
      }

      // Point at result angle (red)
      const prx = centerX + radius * Math.cos(resultAngle);
      const pry = centerY - radius * Math.sin(resultAngle);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(prx, pry);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2.5;
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(prx, pry, 6, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.fill();

      // Angle arc for result
      ctx.beginPath();
      ctx.arc(centerX, centerY, 70, 0, resultAngle, false);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.stroke();
      ctx.setLineDash([]);

      // If addition, show beta arc from alpha
      if (operation === 'add') {
       ctx.beginPath();
       ctx.arc(centerX, centerY, 60, alpha, resultAngle, false);
       ctx.strokeStyle = '#3498db';
       ctx.lineWidth = 2;
       ctx.stroke();
      }

      // Labels
      ctx.font = '16px Arial';
      ctx.fillStyle = '#27ae60';
      ctx.fillText('α', centerX + 60, centerY - 10);

      ctx.fillStyle = color;
      ctx.fillText(label, prx + 10, pry - 10);

      if (operation === 'add') {
       ctx.fillStyle = '#3498db';
       ctx.fillText('β', centerX + 80, centerY - 40);
      }

      ctx.fillStyle = '#000';
      ctx.fillText('O', centerX + 10, centerY - 10);

      // Update output
      const output = document.getElementById('demo-output');
      const sinAlpha = Math.sin(alpha).toFixed(3);
      const cosAlpha = Math.cos(alpha).toFixed(3);
      const sinBeta = Math.sin(beta).toFixed(3);
      const cosBeta = Math.cos(beta).toFixed(3);
      const sinResult = Math.sin(resultAngle).toFixed(3);
      const cosResult = Math.cos(resultAngle).toFixed(3);

      const operationSymbol = operation === 'add' ? '+' : '-';

      output.innerHTML = `<strong>Current Values:</strong><br>
      α = ${alpha.toFixed(3)} rad, β = ${beta.toFixed(3)} rad<br>
      sin(α) = ${sinAlpha}, cos(α) = ${cosAlpha}<br>
      sin(β) = ${sinBeta}, cos(β) = ${cosBeta}<br>
      sin(α ${operationSymbol} β) = ${sinResult}, cos(α ${operationSymbol} β) = ${cosResult}`;

      // Re-render MathJax
      if (window.MathJax) {
       MathJax.typesetPromise([output]).catch(function(err) {
        console.log('MathJax re-render error:', err);
       });
      }
     }

     function toggleSolution(num) {
      const solution = document.getElementById('solution' + num);
      if (solution.style.display === 'none' || solution.style.display === '') {
       solution.style.display = 'block';
      } else {
       solution.style.display = 'none';
      }
     }

     // Initialize demo
     updateDemo();

     // Original diagrams (keeping the existing code)
     window.addEventListener('load', function() {
      // Addition Canvas
      const canvas = document.getElementById('additionCanvas');
      const ctx = canvas.getContext('2d');
      const w = canvas.width;
      const h = canvas.height;
      const centerX = w / 2;
      const centerY = h / 2;
      const radius = 220;

      const alpha = Math.PI / 6; // 30 degrees
      const beta = Math.PI / 4;  // 45 degrees
      const sum = alpha + beta;  // 75 degrees

      // Unit circle
      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      // Axes
      ctx.beginPath();
      ctx.moveTo(50, centerY);
      ctx.lineTo(w - 50, centerY);
      ctx.moveTo(centerX, 50);
      ctx.lineTo(centerX, h - 50);
      ctx.strokeStyle = '#666';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Arrow tips
      ctx.fillStyle = '#666';
      ctx.beginPath();
      ctx.moveTo(w - 50, centerY);
      ctx.lineTo(w - 57, centerY - 4);
      ctx.lineTo(w - 57, centerY + 4);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(centerX, 50);
      ctx.lineTo(centerX - 4, 57);
      ctx.lineTo(centerX + 4, 57);
      ctx.fill();

      // Point at angle α (green)
      const pax = centerX + radius * Math.cos(alpha);
      const pay = centerY - radius * Math.sin(alpha);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(pax, pay);
      ctx.strokeStyle = '#27ae60';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(pax, pay, 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#27ae60';
      ctx.fill();

      // Angle arc α
      ctx.beginPath();
      ctx.arc(centerX, centerY, 60, -alpha, 0, false);
      ctx.strokeStyle = '#27ae60';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Point at angle α + β (red)
      const pabx = centerX + radius * Math.cos(sum);
      const paby = centerY - radius * Math.sin(sum);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(pabx, paby);
      ctx.strokeStyle = '#e74c3c';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(pabx, paby, 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#e74c3c';
      ctx.fill();

      // Angle arc β (from α to α+β)
      ctx.beginPath();
      ctx.arc(centerX, centerY, 80, -sum, -alpha, false);
      ctx.strokeStyle = '#3498db';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Full angle arc α + β
      ctx.beginPath();
      ctx.arc(centerX, centerY, 100, -sum, 0, false);
      ctx.strokeStyle = '#e74c3c';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Vertical line from point (α+β) to x-axis (shows sin(α+β))
      ctx.beginPath();
      ctx.moveTo(pabx, paby);
      ctx.lineTo(pabx, centerY);
      ctx.strokeStyle = '#e74c3c';
      ctx.lineWidth = 2;
      ctx.setLineDash([3, 3]);
      ctx.stroke();

      // Horizontal line from point (α+β) to y-axis (shows cos(α+β))
      ctx.beginPath();
      ctx.moveTo(pabx, paby);
      ctx.lineTo(centerX, paby);
      ctx.strokeStyle = '#3498db';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.setLineDash([]);

      // Construction lines for geometric proof
      // Line from P(α+β) perpendicular to radius at α
      const perpDist = radius * Math.cos(beta);
      const perpX = centerX + perpDist * Math.cos(alpha);
      const perpY = centerY - perpDist * Math.sin(alpha);

      ctx.beginPath();
      ctx.moveTo(pabx, paby);
      ctx.lineTo(perpX, perpY);
      ctx.strokeStyle = '#9b59b6';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([4, 4]);
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(perpX, perpY, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#9b59b6';
      ctx.fill();

      // Line from perpendicular point to origin
      ctx.beginPath();
      ctx.moveTo(perpX, perpY);
      ctx.lineTo(centerX, centerY);
      ctx.strokeStyle = '#9b59b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);

      // Right angle marker at perpendicular point
      // Direction from R to O
      const toOriginAngle = Math.atan2(centerY - perpY, centerX - perpX);
      // Direction from R to Q
      const toQAngle = Math.atan2(paby - perpY, pabx - perpX);
      const markerSize = 12;

      // Create right angle marker square
      const corner1X = perpX + markerSize * Math.cos(toOriginAngle);
      const corner1Y = perpY + markerSize * Math.sin(toOriginAngle);
      const corner2X = perpX + markerSize * Math.cos(toQAngle);
      const corner2Y = perpY + markerSize * Math.sin(toQAngle);
      const corner3X = corner1X + markerSize * Math.cos(toQAngle);
      const corner3Y = corner1Y + markerSize * Math.sin(toQAngle);

      ctx.beginPath();
      ctx.moveTo(corner1X, corner1Y);
      ctx.lineTo(corner3X, corner3Y);
      ctx.lineTo(corner2X, corner2Y);
      ctx.strokeStyle = '#9b59b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Labels
      ctx.font = '18px Arial';

      // Angle labels positioned along the arcs using angular coordinates
      const alphaLabelAngle = alpha / 2;
      const alphaLabelRadius = 70;
      ctx.fillStyle = '#27ae60';
      ctx.fillText('α', 
        centerX + alphaLabelRadius * Math.cos(alphaLabelAngle), 
        centerY - alphaLabelRadius * Math.sin(alphaLabelAngle) + 5);

      const betaLabelAngle = alpha + beta / 2;
      const betaLabelRadius = 90;
      ctx.fillStyle = '#3498db';
      ctx.fillText('β', 
        centerX + betaLabelRadius * Math.cos(betaLabelAngle)-10, 
        centerY - betaLabelRadius * Math.sin(betaLabelAngle) );

      const sumLabelAngle = sum / 2;
      const sumLabelRadius = 115;
      ctx.fillStyle = '#e74c3c';
      ctx.fillText('α + β', 
        centerX + sumLabelRadius * Math.cos(sumLabelAngle) + 10, 
        centerY - sumLabelRadius * Math.sin(sumLabelAngle) + 50);

      // Origin and radius label
      ctx.fillStyle = '#000';
      ctx.fillText('O', centerX - 25, centerY + 20);
      ctx.fillText('1', centerX + radius + 15, centerY + 5);

      // sin and cos labels on the projection lines
      ctx.fillStyle = '#e74c3c';
      ctx.fillText('sin(α+β)', pabx , (paby + centerY) / 2 + 10);

      ctx.fillStyle = '#3498db';
      ctx.fillText('cos(α+β)', (centerX + pabx) / 2-20 , paby-10 );

      // Point labels
      ctx.font = '16px Arial';
      ctx.fillStyle = '#27ae60';
      ctx.fillText('P', pax + 15, pay - 5);

      ctx.fillStyle = '#e74c3c';
      ctx.fillText('Q', pabx + 10, paby + 20);

      ctx.fillStyle = '#9b59b6';
      ctx.fillText('R', perpX , perpY + 5);

      // Formula box
      ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
      ctx.fillRect(10, 80, 300, 100);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.strokeRect(10, 80, 300, 100);

      ctx.font = '14px Arial';
      ctx.fillStyle = '#000';
      ctx.fillText('sin(α + β) = sin α cos β + cos α sin β', 20, 110);
      ctx.fillText('cos(α + β) = cos α cos β - sin α sin β', 20, 140);
      ctx.fillText('tan(α + β) = (tan α + tan β)/(1 - tan α tan β)', 20, 170);

      // Alternative Proof Diagram
      const canvas2 = document.getElementById('proofCanvas');
      const ctx2 = canvas2.getContext('2d');
      const w2 = canvas2.width;
      const h2 = canvas2.height;

      const alpha2 = Math.PI / 6;
      const beta2 = Math.PI / 6;
      const sum2 = alpha2 + beta2;

      // Title
      ctx2.fillStyle = '#000';
      ctx2.font = 'bold 18px Arial';
      ctx2.textAlign = 'center';
      ctx2.fillText('Angle Sum Formula Diagram', w2 / 2, 50);

      // Calculate trig values
      const sinAlpha = Math.sin(alpha2);
      const cosAlpha = Math.cos(alpha2);
      const sinBeta = Math.sin(beta2);
      const cosBeta = Math.cos(beta2);
      const sinSum = Math.sin(sum2);
      const cosSum = Math.cos(sum2);

      // Scale factor
      const scale = 400;

      // Origin point (bottom-left corner)
      const originX = 150;
      const originY = 480;

      // Rectangle formed by cos(α+β) + cosαsinβ width and sin(α+β) height
      const rectWidth = cosAlpha * cosBeta * scale;
      const rectHeight = sinSum * scale;

      // Corners of main rectangle
      const topRightX = originX + rectWidth;
      const topRightY = originY - rectHeight;

      // Point P on right edge: where line at angle α intersects
      const pX = originX + cosAlpha * cosBeta * scale;
      const pY = originY - sinAlpha * cosBeta * scale;
      const qX = originX + (cosSum * scale);
      const qY = originY - (sinSum * scale);

      // Draw the outer rectangle
      ctx2.strokeStyle = '#666';
      ctx2.lineWidth = 2.5;
      ctx2.strokeRect(originX, topRightY, rectWidth, rectHeight);

      // Draw vertical line from bottom at P's x-coordinate
      ctx2.beginPath();
      ctx2.moveTo(pX, pY);
      ctx2.lineTo(qX, qY);
      ctx2.stroke();

      // Draw diagonal from origin to P (represents unit length at angle α)
      ctx2.beginPath();
      ctx2.moveTo(originX, originY);
      ctx2.lineTo(pX, pY);
      ctx2.strokeStyle = '#e74c3c';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      // Draw diagonal from origin to top-right (represents unit length at angle α+β)
      ctx2.beginPath();
      ctx2.moveTo(originX, originY);
      ctx2.lineTo(qX , qY);
      ctx2.strokeStyle = '#3498db';
      ctx.lineWidth = 2.5;
      ctx.stroke();

      // Right angle markers
      const markerSize2 = 12;
      ctx2.strokeStyle = '#000';
      ctx2.lineWidth = 1.5;

      // top-left corner
      ctx2.strokeRect(originX, topRightY, markerSize2, markerSize2);

      // Bottom-right corner
      ctx2.strokeRect(topRightX - markerSize2, originY - markerSize2, markerSize2, markerSize2);

      // Top-right corner
      ctx2.strokeRect(topRightX - markerSize2, topRightY, markerSize2, markerSize2);

      // At point P
      const pCorner1X = pX - markerSize2 * Math.sin((Math.PI/2)-alpha2);
      const pCorner1Y = pY + markerSize2 * Math.cos((Math.PI/2)-alpha2);
      const pCorner2X = pCorner1X - markerSize2 * Math.cos((Math.PI/2)-alpha2);
      const pCorner2Y = pCorner1Y - markerSize2 * Math.sin((Math.PI/2)-alpha2);
      const pCorner3X = pCorner2X + markerSize2 * Math.cos(alpha2);
      const pCorner3Y = pCorner2Y - markerSize2 * Math.sin(alpha2);
      ctx2.beginPath();
      ctx2.moveTo(pCorner1X, pCorner1Y);
      ctx2.lineTo(pCorner2X, pCorner2Y);
      ctx2.lineTo(pCorner3X, pCorner3Y);
      ctx2.stroke();

      // Angle arcs
      // α at origin
      ctx2.beginPath();
      ctx2.arc(originX, originY, 45, -alpha2, 0, false);
      ctx2.strokeStyle = '#e74c3c';
      ctx2.lineWidth = 1.5;
      ctx2.stroke();

      // β at origin
      ctx2.beginPath();
      ctx2.arc(originX, originY, 50, -sum2, -alpha2, false);
      ctx2.strokeStyle = '#27ae60';
      ctx2.lineWidth = 1.5;
      ctx2.stroke();

      // α+β arc at origin
      ctx2.beginPath();
      ctx2.arc(originX, originY, 75, -sum2, 0, false);
      ctx2.strokeStyle = '#3498db';
      ctx2.lineWidth = 1.5;
      ctx2.stroke();

      // α angle at p
      ctx2.beginPath();
      ctx2.arc(pX, pY, 30, -(Math.PI / 2 + alpha), -Math.PI / 2, false);
      ctx2.strokeStyle = '#000';
      ctx2.lineWidth = 1.5;
      ctx2.stroke();

      // Labels - angles
      ctx2.fillStyle = '#000';
      ctx2.font = '16px Arial';
      ctx2.textAlign = 'left';

      ctx2.fillStyle = '#e74c3c';
      ctx2.fillText('α', originX + 52, originY - 10);
      ctx2.fillStyle = '#000';
      ctx2.fillText('α', pX-20 , pY - 40);
      ctx2.fillStyle = '#27ae60';
      ctx2.fillText('β', originX + 38, originY - 40);
      ctx2.fillStyle = '#3498db';
      ctx2.fillText('α+β', originX + 80, originY - 32);

      // Label "1" on diagonals
      const midToTopX = (originX + topRightX) / 2;
      const midToTopY = (originY + topRightY) / 2;
      ctx2.font = '50px Arial'
      ctx2.fillStyle = 'black';
      ctx2.fillText('1', midToTopX - 50, midToTopY - 5);

      // Labels on sides of rectangle
      ctx2.font = '15px Arial';
      ctx2.textAlign = 'center';
      ctx2.fillStyle = '#000';

      // Bottom - left segment
      const bottomLeftMidX = (originX + pX) / 2;
      ctx2.fillText('cos α cos β', bottomLeftMidX, originY + 25);

      // Left side
      ctx2.save();
      ctx2.translate(originX - 45, (originY + topRightY) / 2);
      ctx2.rotate(-Math.PI / 2);
      ctx2.fillText('sin(α + β)', 0, 0);
      ctx2.restore();

      // Vertical line at P - bottom segment
      ctx2.save();
      ctx2.translate(pX + 50, (originY + pY) / 2);
      ctx2.rotate(-Math.PI / 2);
      ctx2.fillText('sin α cos β', 0, 0);
      ctx2.restore();

      // Vertical line at P - top segment
      ctx2.save();
      ctx2.translate(pX + 50, (pY + topRightY) / 2);
      ctx2.rotate(-Math.PI / 2);
      ctx2.fillText('cos α sin β', 0, 0);
      ctx2.restore();

      // top right label
      ctx2.fillText('cos α sin β', topRightX-50, topRightY- 8);

      //unit triangle label
      ctx2.fillText('sin β', topRightX-40, topRightY+ 70);
      ctx2.fillText('cos β', bottomLeftMidX+20, originY - 75);

      // Top side
      const topMidX = (originX + topRightX) / 2;
      ctx2.fillText('cos(α + β)', topMidX-50, topRightY - 10);

      // Formulas at bottom
      ctx2.font = '16px Arial';
      ctx2.textAlign = 'center';
      ctx2.fillText('sin(α + β) = sin β cos α + sin α cos β', w2 / 2, h2 - 50);
      ctx2.fillText('cos(α + β) = cos α cos β − sin α sin β', w2 / 2, h2 - 20);
     });
    </script>
   </div>
  </div>
 </body>
</html>
