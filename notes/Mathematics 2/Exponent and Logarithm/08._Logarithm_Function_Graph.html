<!DOCTYPE html>
<!-- tags: Exponent and Logarithm -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Graph of Logarithmic Functions
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graph-section {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    margin: 30px 0;
   }

   .graph-box {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    text-align: center;
   }

   .graph-label {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 100px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
   }

   .log-canvas {
    border: 2px solid #ddd;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .property-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .property-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .property-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .property-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .property-card .description {
    color: #555;
    line-height: 1.5;
   }

   .symmetry-section {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    text-align: center;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Exponent and Logarithm">
   Graph of Logarithmic Functions
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     Logarithmic functions have distinctive graphs that reflect their inverse relationship with exponential functions. Understanding these graphs helps visualize logarithmic behavior and transformations.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>General Form:</strong> $$y = \log_a x$$
      </div>
      <div class="formula-item">
       <strong>Domain:</strong> $$x > 0$$
      </div>
      <div class="formula-item">
       <strong>Range:</strong> $$y \in \mathbb{R}$$
      </div>
      <div class="formula-item">
       <strong>Key Points:</strong> $$(1, 0), (a, 1)$$
      </div>
     </div>

     <div class="graph-section">
      <div class="graph-box">
       <div class="graph-label">
        When <strong>a > 1</strong>: Increasing logarithmic curve
       </div>
       <canvas class="log-canvas" height="220" id="logUp" width="300"></canvas>
      </div>
      <div class="graph-box">
       <div class="graph-label">
        When <strong>0 < a < 1</strong>: Decreasing logarithmic curve
       </div>
       <canvas class="log-canvas" height="220" id="logDown" width="300"></canvas>
      </div>
     </div>
    </div>

    <div class="symmetry-section">
     <h3>Symmetry with Exponential Functions</h3>
     <p>The graph of <strong>y = logₐ x</strong> is symmetric to the graph of <strong>y = aˣ</strong> with respect to the line <strong>y = x</strong>.</p>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{cases}
      y = a^x \quad \text{(exponential)} \\
      y = \log_a x \quad \text{(logarithmic)}
      \end{cases}
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Interactive Logarithmic Graph Explorer</div>

     <div class="input-group">
      <div class="input-field">
       <label for="baseA">Base (a):</label>
       <input id="baseA" max="5" min="0.1" step="0.1" type="number" value="2"/>
      </div>
      <div class="input-field">
       <label for="pointX">Test Point x:</label>
       <input id="pointX" min="0.1" step="0.1" type="number" value="4"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="analyzeGraph()">Analyze Graph</button>
      <button class="btn" onclick="showKeyPoints()">Show Key Points</button>
      <button class="btn" onclick="compareWithExp()">Compare with Exponential</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="functionDisplay">
       <strong>Function:</strong> y = log₂(x)
      </div>
      <div class="result-text" id="behaviorDisplay">
       <strong>Behavior:</strong> Increasing function (base > 1)
      </div>
      <div class="result-text" id="pointDisplay">
       <strong>Test Point:</strong> (4, 2)
      </div>
     </div>

     <div class="canvas-container">
      <canvas class="log-canvas" height="350" id="interactiveCanvas" width="600"></canvas>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The graph of a logarithmic function reflects its fundamental properties:</p>
     <ul>
      <li><strong>Domain:</strong> x > 0 (positive real numbers only)</li>
      <li><strong>Range:</strong> All real numbers (ℝ)</li>
      <li><strong>Vertical Asymptote:</strong> x = 0 (y-axis)</li>
      <li><strong>x-intercept:</strong> (1, 0) - crosses x-axis at x = 1</li>
      <li><strong>y-intercept:</strong> None - undefined at x = 0</li>
      <li><strong>Monotonicity:</strong> Increasing for a > 1, decreasing for 0 < a < 1</li>
     </ul>
     <p>The shape of the logarithmic curve comes from the fact that logarithms grow very slowly:</p>
     <div class="formula-block" style="margin: 20px 0;">
      \lim_{x \to 0^+} \log_a x = -\infty \quad \text{and} \quad \lim_{x \to \infty} \log_a x = \infty
     </div>
    </div>

    <div class="section">
     <div class="section-title">Key Properties and Characteristics</div>
     <div class="property-grid">
      <div class="property-card">
       <h3>Domain & Range</h3>
       <div class="formula">Domain: (0, ∞)</div>
       <div class="formula">Range: ℝ</div>
       <div class="description">
        Defined for positive x only, outputs cover all real numbers.
       </div>
      </div>

      <div class="property-card">
       <h3>Asymptotes</h3>
       <div class="formula">x = 0 (vertical)</div>
       <div class="description">
        The y-axis is a vertical asymptote. The function approaches but never reaches x = 0.
       </div>
      </div>

      <div class="property-card">
       <h3>Intercepts</h3>
       <div class="formula">x-intercept: (1, 0)</div>
       <div class="description">
        Always passes through (1, 0). No y-intercept since x = 0 is undefined.
       </div>
      </div>

      <div class="property-card">
       <h3>Monotonicity</h3>
       <div class="formula">a > 1: Increasing</div>
       <div class="formula">0 < a < 1: Decreasing</div>
       <div class="description">
        The function either always increases or always decreases.
       </div>
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Graph Analysis</h4>
       <p>Analyze the graph of y = log₂(x) and identify key features.</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Comparing Bases</h4>
       <p>Compare the graphs of y = log₂(x) and y = log₃(x).</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Point Evaluation</h4>
       <p>Find points on the graph of y = log₁₀(x) and describe the behavior.</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Sketch the graph of y = log₃(x) and identify: domain, range, asymptotes, and intercepts.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <ul>
         <li><strong>Domain:</strong> x > 0</li>
         <li><strong>Range:</strong> All real numbers ℝ</li>
         <li><strong>Vertical asymptote:</strong> x = 0</li>
         <li><strong>x-intercept:</strong> (1, 0)</li>
         <li><strong>Behavior:</strong> Increasing function (base > 1)</li>
         <li><strong>Key points:</strong> (1, 0), (3, 1), (9, 2), (1/3, -1)</li>
        </ul>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Compare the graphs of y = log₂(x) and y = (0.5)^x. What do you notice?</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>The graphs are symmetric with respect to the line y = x:</p>
        <ul>
         <li>y = log₂(x) is the reflection of y = 2^x over the line y = x</li>
         <li>Where y = 2^x passes through (2, 4), y = log₂(x) passes through (4, 2)</li>
         <li>The exponential function has domain ℝ and range (0, ∞)</li>
         <li>The logarithmic function has domain (0, ∞) and range ℝ</li>
         <li>They are inverse functions of each other</li>
        </ul>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Determine whether y = log₀.₂(x) is increasing or decreasing. Explain why.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Since the base 0.2 < 1, y = log₀.₂(x) is a decreasing function.</p>
        <p><strong>Explanation:</strong></p>
        <ul>
         <li>For bases between 0 and 1, logarithmic functions decrease as x increases</li>
         <li>As x increases from 0 to ∞, log₀.₂(x) decreases from -∞ to 0</li>
         <li>The function still has domain (0, ∞) and range ℝ</li>
         <li>Key points: (1, 0), (0.2, 1), (0.04, 2), (5, -1)</li>
        </ul>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Domain: (0, ∞); Range: ℝ (all real numbers)</li>
      <li class="takeaway-item">Vertical asymptote: x = 0 (y-axis)</li>
      <li class="takeaway-item">x-intercept: (1, 0); no y-intercept</li>
      <li class="takeaway-item">a > 1: increasing curve; 0 < a < 1: decreasing curve</li>
      <li class="takeaway-item">Symmetric to exponential function y = a^x over line y = x</li>
      <li class="takeaway-item">Grows very slowly - takes large x values for small y increases</li>
      <li class="takeaway-item">Continuous and smooth everywhere in domain</li>
      <li class="takeaway-item">One-to-one function with inverse relationship to exponential</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   // Initialize canvas when page loads
   window.addEventListener('load', function() {
    // Draw original graphs
    drawLogGraph("logUp", 2.2, "#1976d2", true);
    drawLogGraph("logDown", 0.5, "#f57c00", false);
    // Initialize interactive canvas
    analyzeGraph();
   });

   function drawLogGraph(canvasId, a, color, isIncreasing) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const w = canvas.width, h = canvas.height;
    const x0 = 60; // y-axis position
    const y0 = h / 2 + 10; // x-axis position (centered)

    const xScale = 50; // pixels per unit
    const yScale = 40; // pixels per unit

    // Draw grid lines
    ctx.strokeStyle = "#e8e8e8";
    ctx.lineWidth = 0.8;
    for (let i = -3; i <= 5; i++) {
     // Vertical grid lines
     let px = x0 + i * xScale;
     if (px >= 0 && px <= w) {
      ctx.beginPath();
      ctx.moveTo(px, 0);
      ctx.lineTo(px, h);
      ctx.stroke();
     }
     // Horizontal grid lines
     let py = y0 - i * yScale;
     if (py >= 0 && py <= h) {
      ctx.beginPath();
      ctx.moveTo(0, py);
      ctx.lineTo(w, py);
      ctx.stroke();
     }
    }

    // Draw axes
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, y0);
    ctx.lineTo(w, y0);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(x0, 0);
    ctx.lineTo(x0, h);
    ctx.stroke();

    // Axis arrows
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.moveTo(w - 3, y0);
    ctx.lineTo(w - 12, y0 - 5);
    ctx.lineTo(w - 12, y0 + 5);
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(x0, 3);
    ctx.lineTo(x0 - 5, 12);
    ctx.lineTo(x0 + 5, 12);
    ctx.fill();

    // Draw logarithmic curve
    ctx.strokeStyle = color;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let started = false;
    for (let x = 0.01; x <= 4; x += 0.01) {
     let y = Math.log(x) / Math.log(a);
     let px = x0 + x * xScale;
     let py = y0 - y * yScale;
     if (py >= 0 && py <= h && px >= 0 && px <= w) {
      if (!started) {
       ctx.moveTo(px, py);
       started = true;
      } else {
       ctx.lineTo(px, py);
      }
     }
    }
    ctx.stroke();

    // Mark key points
    // Point (1, 0)
    let px1 = x0 + 1 * xScale;
    let py1 = y0;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(px1, py1, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Point (a, 1)
    let pxA = x0 + a * xScale;
    let pyA = y0 - 1 * yScale;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(pxA, pyA, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = "#000";
    ctx.font = "bold 15px Arial";
    ctx.fillText("x", w - 20, y0 + 20);
    ctx.fillText("y", x0 - 20, 15);
    ctx.font = "14px Arial";
    ctx.fillText("O", x0 - 18, y0 + 18);

    // Tick marks
    ctx.font = "12px Arial";
    ctx.fillStyle = "#000";
    for (let i = 1; i <= 3; i++) {
     let px = x0 + i * xScale;
     if (px >= 0 && px <= w) {
      ctx.fillText(i.toString(), px - 4, y0 + 16);
     }
    }
    for (let i = -2; i <= 2; i++) {
     if (i !== 0) {
      let py = y0 - i * yScale;
      if (py >= 15 && py <= h) {
       ctx.fillText(i.toString(), x0 - 18, py + 4);
      }
     }
    }

    // Point labels
    ctx.fillStyle = color;
    ctx.font = "italic 13px Georgia, serif";
    ctx.fillText("(1, 0)", px1 + 8, py1 + 18);
    ctx.fillText(`(${a.toFixed(1)}, 1)`, pxA + 8, pyA - 6);

    // Function label - beautiful mathematical notation
    const labelX = a > 1 ? x0 + 130 : x0 + 30;
    const labelY = a > 1 ? 35 : h - 30;

    ctx.fillStyle = color;
    ctx.font = "italic 17px Georgia, serif";
    ctx.fillText("y", labelX, labelY);

    ctx.font = "16px Arial";
    ctx.fillText(" = log", labelX + 12, labelY);

    // Subscript a
    ctx.font = "italic 12px Georgia, serif";
    ctx.fillText("a", labelX + 58, labelY + 5);

    // x
    ctx.font = "italic 17px Georgia, serif";
    ctx.fillText("x", labelX + 70, labelY);
   }

   function analyzeGraph() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);
     const x = parseFloat(document.getElementById('pointX').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     if (x <= 0) {
      document.getElementById('errorMessage').textContent = 'x must be positive.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const behavior = a > 1 ? 'Increasing function (base > 1)' : 'Decreasing function (base < 1)';
     const y = Math.log(x) / Math.log(a);

     document.getElementById('functionDisplay').innerHTML = `<strong>Function:</strong> y = log<sub>${a}</sub>(x)`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Behavior:</strong> ${behavior}`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Test Point:</strong> (${x}, ${y.toFixed(3)})`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, x);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error analyzing graph. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function showKeyPoints() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     document.getElementById('functionDisplay').innerHTML = `<strong>Key Points:</strong> (1, 0), (${a.toFixed(2)}, 1)`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Asymptote:</strong> x = 0 (vertical)`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Domain & Range:</strong> x > 0, y ∈ ℝ`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, null, true);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error showing key points. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function compareWithExp() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     document.getElementById('functionDisplay').innerHTML = `<strong>Logarithmic:</strong> y = log<sub>${a}</sub>(x)`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Exponential:</strong> y = ${a}<sup>x</sup>`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Symmetric over:</strong> y = x`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, null, false, true);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error comparing with exponential. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function drawInteractiveGraph(a, testX = null, showKeyPoints = false, showSymmetry = false) {
    const canvas = document.getElementById('interactiveCanvas');
    const ctx = canvas.getContext('2d');

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const w = canvas.width, h = canvas.height;
    const x0 = 80;
    const y0 = h / 2;

    const xScale = 40;
    const yScale = 30;

    // Draw grid
    ctx.strokeStyle = "#e8e8e8";
    ctx.lineWidth = 0.8;
    for (let i = -5; i <= 8; i++) {
     let px = x0 + i * xScale;
     if (px >= 0 && px <= w) {
      ctx.beginPath();
      ctx.moveTo(px, 0);
      ctx.lineTo(px, h);
      ctx.stroke();
     }
     let py = y0 - i * yScale;
     if (py >= 0 && py <= h) {
      ctx.beginPath();
      ctx.moveTo(0, py);
      ctx.lineTo(w, py);
      ctx.stroke();
     }
    }

    // Draw axes
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, y0);
    ctx.lineTo(w, y0);
    ctx.moveTo(x0, 0);
    ctx.lineTo(x0, h);
    ctx.stroke();

    // Draw symmetry line if requested
    if (showSymmetry) {
     ctx.strokeStyle = "#e74c3c";
     ctx.setLineDash([5, 5]);
     ctx.lineWidth = 2;
     ctx.beginPath();
     // Draw y = x line
     const startX = Math.max(0, x0);
     const endX = Math.min(w, x0 + 10 * xScale);
     ctx.moveTo(startX, y0 - (startX - x0) / xScale * yScale);
     ctx.lineTo(endX, y0 - (endX - x0) / xScale * yScale);
     ctx.stroke();
     ctx.setLineDash([]);
    }

    // Draw logarithmic curve
    ctx.strokeStyle = "#667eea";
    ctx.lineWidth = 3;
    ctx.beginPath();
    let started = false;
    for (let x = 0.01; x <= 8; x += 0.02) {
     let y = Math.log(x) / Math.log(a);
     let px = x0 + x * xScale;
     let py = y0 - y * yScale;
     if (py >= 0 && py <= h && px >= 0 && px <= w && !isNaN(y) && isFinite(y)) {
      if (!started) {
       ctx.moveTo(px, py);
       started = true;
      } else {
       ctx.lineTo(px, py);
      }
     }
    }
    ctx.stroke();

    // Draw exponential curve if showing symmetry
    if (showSymmetry) {
     ctx.strokeStyle = "#27ae60";
     ctx.lineWidth = 3;
     ctx.beginPath();
     started = false;
     for (let x = -4; x <= 3; x += 0.02) {
      let y = Math.pow(a, x);
      let px = x0 + x * xScale;
      let py = y0 - y * yScale;
      if (py >= 0 && py <= h && px >= 0 && px <= w && !isNaN(y) && isFinite(y)) {
       if (!started) {
        ctx.moveTo(px, py);
        started = true;
       } else {
        ctx.lineTo(px, py);
       }
      }
     }
     ctx.stroke();
    }

    // Draw key points if requested
    if (showKeyPoints) {
     // Point (1, 0)
     const px1 = x0 + 1 * xScale;
     const py1 = y0;
     ctx.fillStyle = "#e74c3c";
     ctx.beginPath();
     ctx.arc(px1, py1, 6, 0, 2 * Math.PI);
     ctx.fill();
     ctx.strokeStyle = "#fff";
     ctx.lineWidth = 2;
     ctx.stroke();

     // Point (a, 1)
     const pxA = x0 + a * xScale;
     const pyA = y0 - 1 * yScale;
     ctx.fillStyle = "#e74c3c";
     ctx.beginPath();
     ctx.arc(pxA, pyA, 6, 0, 2 * Math.PI);
     ctx.fill();
     ctx.stroke();
    }

    // Draw test point
    if (testX && testX > 0) {
     const y = Math.log(testX) / Math.log(a);
     const px = x0 + testX * xScale;
     const py = y0 - y * yScale;

     if (px >= 0 && px <= w && py >= 0 && py <= h) {
      ctx.fillStyle = "#f39c12";
      ctx.beginPath();
      ctx.arc(px, py, 8, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 2;
      ctx.stroke();
     }
    }

    // Labels
    ctx.fillStyle = "#000";
    ctx.font = "12px Arial";
    ctx.fillText("x", w - 15, y0 + 15);
    ctx.fillText("y", x0 - 15, 15);
    ctx.fillText("O", x0 - 12, y0 + 15);

    // Function labels
    ctx.fillStyle = "#667eea";
    ctx.font = "bold 14px Arial";
    ctx.fillText(`y = log_${a}(x)`, 400, 30);

    if (showSymmetry) {
     ctx.fillStyle = "#27ae60";
     ctx.fillText(`y = ${a}^x`, 400, 50);
     ctx.fillStyle = "#e74c3c";
     ctx.fillText("y = x (symmetry)", 400, 70);
    }
   }

   function resetDemo() {
    document.getElementById('baseA').value = '2';
    document.getElementById('pointX').value = '4';
    analyzeGraph();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Graph Analysis</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: y = log₂(x)</div>
        <div class="calculation-step">Domain: x > 0 (positive real numbers)</div>
        <div class="calculation-step">Range: all real numbers ℝ</div>
        <div class="calculation-step">Vertical asymptote: x = 0</div>
        <div class="calculation-step">x-intercept: (1, 0)</div>
        <div class="calculation-step">Behavior: increasing (base > 1)</div>
        <div class="calculation-step">Key points: (1, 0), (2, 1), (4, 2), (8, 3), (0.5, -1)</div>
        <div class="calculation-step">As x → 0⁺: y → -∞; As x → ∞: y → ∞</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Comparing Bases</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Compare y = log₂(x) and y = log₃(x)</div>
        <div class="calculation-step">Both are increasing functions (bases > 1)</div>
        <div class="calculation-step">Both have same domain (0, ∞) and range ℝ</div>
        <div class="calculation-step">Both have vertical asymptote x = 0</div>
        <div class="calculation-step">Both pass through (1, 0)</div>
        <div class="calculation-step">log₂(x) grows faster than log₃(x) for x > 1</div>
        <div class="calculation-step">At x = 2: log₂(2) = 1, log₃(2) ≈ 0.631</div>
        <div class="calculation-step">At x = 3: log₂(3) ≈ 1.585, log₃(3) = 1</div>
        <div class="calculation-step">log₂(x) > log₃(x) for x > 1</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Point Evaluation</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: y = log₁₀(x) (common logarithm)</div>
        <div class="calculation-step">Point (1, 0): log₁₀(1) = 0</div>
        <div class="calculation-step">Point (10, 1): log₁₀(10) = 1</div>
        <div class="calculation-step">Point (100, 2): log₁₀(100) = 2</div>
        <div class="calculation-step">Point (0.1, -1): log₁₀(0.1) = -1</div>
        <div class="calculation-step">Point (0.01, -2): log₁₀(0.01) = -2</div>
        <div class="calculation-step">Behavior: increases slowly, takes large x for small y increase</div>
        <div class="calculation-step">Applications: pH scale, earthquake magnitude, sound intensity</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }
  </script>
 </body>
</html>