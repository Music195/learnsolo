<!DOCTYPE html>
<!-- tags: Exponent and Logarithm -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Properties of Logarithmic Functions
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graph-section {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    margin: 30px 0;
   }

   .graph-box {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    text-align: center;
   }

   .graph-label {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 100px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
   }

   .log-canvas {
    border: 2px solid #ddd;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .property-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .property-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .property-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .property-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .property-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Exponent and Logarithm">
   Properties of Logarithmic Functions
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     Logarithmic functions possess several important properties that make them useful in mathematics, science, and engineering. Understanding these properties helps in solving equations and analyzing real-world phenomena.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>General Form:</strong> $$y = \log_a x$$
      </div>
      <div class="formula-item">
       <strong>Domain:</strong> $$x > 0$$
      </div>
      <div class="formula-item">
       <strong>Range:</strong> $$y \in \mathbb{R}$$
      </div>
      <div class="formula-item">
       <strong>Monotonicity:</strong>
       <br/>
       $$a > 1: \text{increasing}$$
       <br/>
       $$0 < a < 1: \text{decreasing}$$
      </div>
     </div>

     <div class="graph-section">
      <div class="graph-box">
       <div class="graph-label">
        When <strong>a > 1</strong>: Increasing logarithmic curve
       </div>
       <canvas class="log-canvas" height="220" id="logUp" width="300"></canvas>
      </div>
      <div class="graph-box">
       <div class="graph-label">
        When <strong>0 < a < 1</strong>: Decreasing logarithmic curve
       </div>
       <canvas class="log-canvas" height="220" id="logDown" width="300"></canvas>
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Interactive Logarithmic Properties Explorer</div>

     <div class="input-group">
      <div class="input-field">
       <label for="baseA">Base (a):</label>
       <input id="baseA" max="5" min="0.1" step="0.1" type="number" value="2"/>
      </div>
      <div class="input-field">
       <label for="pointP">Point p:</label>
       <input id="pointP" min="0.1" step="0.1" type="number" value="0.5"/>
      </div>
      <div class="input-field">
       <label for="pointQ">Point q:</label>
       <input id="pointQ" min="0.1" step="0.1" type="number" value="2"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="analyzeProperties()">Analyze Properties</button>
      <button class="btn" onclick="showMonotonicity()">Show Monotonicity</button>
      <button class="btn" onclick="compareValues()">Compare p and q</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="functionDisplay">
       <strong>Function:</strong> y = log₂(x)
      </div>
      <div class="result-text" id="behaviorDisplay">
       <strong>Behavior:</strong> Increasing function (base > 1)
      </div>
      <div class="result-text" id="comparisonDisplay">
       <strong>Comparison:</strong> log₂(0.5) < log₂(2)
      </div>
     </div>

     <div class="canvas-container">
      <canvas class="log-canvas" height="350" id="interactiveCanvas" width="600"></canvas>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The properties of logarithmic functions are derived from their relationship with exponential functions:</p>
     <ul>
      <li><strong>Domain and Range:</strong> Domain is (0, ∞), range is all real numbers ℝ</li>
      <li><strong>Monotonicity:</strong> Determined by the base value</li>
      <li><strong>Inverse Relationship:</strong> Logarithms are inverses of exponentials</li>
      <li><strong>One-to-One:</strong> Each input has exactly one output</li>
      <li><strong>Continuity:</strong> Continuous everywhere in its domain</li>
     </ul>
     <p>The monotonicity property is crucial:</p>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{cases}
      a > 1: \quad 0 < p < q \implies \log_a p < \log_a q \\
      0 < a < 1: \quad 0 < p < q \implies \log_a p > \log_a q
      \end{cases}
     </div>
    </div>

    <div class="section">
     <div class="section-title">Key Properties and Characteristics</div>
     <div class="property-grid">
      <div class="property-card">
       <h3>Domain & Range</h3>
       <div class="formula">Domain: (0, ∞)</div>
       <div class="formula">Range: ℝ</div>
       <div class="description">
        Defined for positive real numbers only, outputs cover all real numbers.
       </div>
      </div>

      <div class="property-card">
       <h3>Monotonicity</h3>
       <div class="formula">a > 1: Increasing</div>
       <div class="formula">0 < a < 1: Decreasing</div>
       <div class="description">
        The function either always increases or always decreases depending on the base.
       </div>
      </div>

      <div class="property-card">
       <h3>One-to-One</h3>
       <div class="formula">f(x₁) = f(x₂) ⇒ x₁ = x₂</div>
       <div class="description">
        Different inputs produce different outputs, making the function invertible.
       </div>
      </div>

      <div class="property-card">
       <h3>Continuity</h3>
       <div class="formula">Continuous on (0, ∞)</div>
       <div class="description">
        The function is continuous everywhere in its domain with no breaks or jumps.
       </div>
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Monotonicity Analysis</h4>
       <p>Determine if y = log₃(x) is increasing or decreasing and explain why.</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Value Comparison</h4>
       <p>Compare log₂(0.25) and log₂(4) without calculating the actual values.</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Base Comparison</h4>
       <p>Compare the behavior of y = log₂(x) and y = log₀.₅(x) for x > 1.</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Determine whether y = log₄(x) is an increasing or decreasing function. Explain your reasoning.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Since the base 4 > 1, y = log₄(x) is an increasing function.</p>
        <p><strong>Explanation:</strong></p>
        <ul>
         <li>For bases greater than 1, logarithmic functions are increasing</li>
         <li>As x increases, log₄(x) also increases</li>
         <li>This means that if 0 < a < b, then log₄(a) < log₄(b)</li>
         <li>The function passes through (1, 0) and increases slowly</li>
        </ul>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Without calculating, determine which is larger: log₀.₃(0.1) or log₀.₃(0.5).</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Since 0.1 < 0.5 and the base 0.3 < 1, log₀.₃(0.1) > log₀.₃(0.5).</p>
        <p><strong>Explanation:</strong></p>
        <ul>
         <li>For bases between 0 and 1, logarithmic functions are decreasing</li>
         <li>If 0 < p < q and 0 < a < 1, then log_a(p) > log_a(q)</li>
         <li>Since 0.1 < 0.5, log₀.₃(0.1) > log₀.₃(0.5)</li>
         <li>The function decreases as x increases from 0 to ∞</li>
        </ul>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Explain why logarithmic functions are one-to-one and what this property means.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Logarithmic functions are one-to-one because they are either strictly increasing (a > 1) or strictly decreasing (0 < a < 1).</p>
        <p><strong>Explanation:</strong></p>
        <ul>
         <li>A function is one-to-one if different inputs produce different outputs</li>
         <li>Since logarithmic functions are monotonic, f(x₁) = f(x₂) implies x₁ = x₂</li>
         <li>This property allows logarithmic functions to have inverse functions</li>
         <li>The inverse of y = log_a(x) is y = a^x</li>
         <li>One-to-one property is essential for solving logarithmic equations</li>
        </ul>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Domain: (0, ∞); Range: ℝ (all real numbers)</li>
      <li class="takeaway-item">Monotonicity depends on base: a > 1 (increasing), 0 < a < 1 (decreasing)</li>
      <li class="takeaway-item">One-to-one function: different inputs give different outputs</li>
      <li class="takeaway-item">Continuous everywhere in its domain</li>
      <li class="takeaway-item">Inverse relationship with exponential functions</li>
      <li class="takeaway-item">Vertical asymptote at x = 0</li>
      <li class="takeaway-item">x-intercept at (1, 0), no y-intercept</li>
      <li class="takeaway-item">Grows very slowly - takes large x values for small y increases</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   // Initialize canvas when page loads
   window.addEventListener('load', function() {
    // Draw original graphs
    drawLogPropertyGraph("logUp", 2.2, "#1976d2", true);
    drawLogPropertyGraph("logDown", 0.5, "#f57c00", false);
    // Initialize interactive canvas
    analyzeProperties();
   });

   function drawLogPropertyGraph(canvasId, a, color, isIncreasing) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const w = canvas.width, h = canvas.height;
    const x0 = 60; // y-axis position
    const y0 = h / 2 + 10; // x-axis position (centered)

    const xScale = 50; // pixels per unit
    const yScale = 40; // pixels per unit

    // Draw grid lines
    ctx.strokeStyle = "#e8e8e8";
    ctx.lineWidth = 0.8;
    for (let i = -3; i <= 5; i++) {
     // Vertical grid lines
     let px = x0 + i * xScale;
     if (px >= 0 && px <= w) {
      ctx.beginPath();
      ctx.moveTo(px, 0);
      ctx.lineTo(px, h);
      ctx.stroke();
     }
     // Horizontal grid lines
     let py = y0 - i * yScale;
     if (py >= 0 && py <= h) {
      ctx.beginPath();
      ctx.moveTo(0, py);
      ctx.lineTo(w, py);
      ctx.stroke();
     }
    }

    // Draw axes
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, y0);
    ctx.lineTo(w, y0);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(x0, 0);
    ctx.lineTo(x0, h);
    ctx.stroke();

    // Axis arrows
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.moveTo(w - 3, y0);
    ctx.lineTo(w - 12, y0 - 5);
    ctx.lineTo(w - 12, y0 + 5);
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(x0, 3);
    ctx.lineTo(x0 - 5, 12);
    ctx.lineTo(x0 + 5, 12);
    ctx.fill();

    // Draw logarithmic curve
    ctx.strokeStyle = color;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let started = false;
    for (let x = 0.01; x <= 4; x += 0.01) {
     let y = Math.log(x) / Math.log(a);
     let px = x0 + x * xScale;
     let py = y0 - y * yScale;
     if (py >= 0 && py <= h && px >= 0 && px <= w) {
      if (!started) {
       ctx.moveTo(px, py);
       started = true;
      } else {
       ctx.lineTo(px, py);
      }
     }
    }
    ctx.stroke();

    // Mark points p < q
    let p = 0.8, q = 2.0;
    let px_p = x0 + p * xScale;
    let px_q = x0 + q * xScale;
    let py_p = y0 - (Math.log(p) / Math.log(a)) * yScale;
    let py_q = y0 - (Math.log(q) / Math.log(a)) * yScale;

    ctx.setLineDash([3, 3]);
    ctx.strokeStyle = "#999";
    ctx.lineWidth = 1;
    // Vertical lines for p and q
    ctx.beginPath();
    ctx.moveTo(px_p, y0);
    ctx.lineTo(px_p, py_p);
    ctx.moveTo(px_q, y0);
    ctx.lineTo(px_q, py_q);
    ctx.stroke();
    ctx.setLineDash([]);

    // Dots at (p, log_a p) and (q, log_a q)
    ctx.fillStyle = "#d32f2f";
    ctx.beginPath();
    ctx.arc(px_p, py_p, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = "#d32f2f";
    ctx.beginPath();
    ctx.arc(px_q, py_q, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = "#000";
    ctx.font = "bold 15px Arial";
    ctx.fillText("x", w - 20, y0 + 20);
    ctx.fillText("y", x0 - 20, 15);
    ctx.font = "14px Arial";
    ctx.fillText("O", x0 - 18, y0 + 18);

    // p, q labels on x-axis
    ctx.font = "italic 13px Georgia, serif";
    ctx.fillStyle = "#000";
    ctx.fillText("p", px_p - 15, y0 + 18);
    ctx.fillText("q", px_q, y0 + 18);

    // log_a p, log_a q labels (beautiful notation)
    ctx.fillStyle = "#d32f2f";
    ctx.font = "14px Arial";
    ctx.fillText("log", px_p + 8, py_p - 8);
    ctx.font = "italic 11px Georgia, serif";
    ctx.fillText("a", px_p + 32, py_p - 3);
    ctx.font = "italic 13px Georgia, serif";
    ctx.fillText("p", px_p + 40, py_p - 8);

    ctx.font = "14px Arial";
    ctx.fillText("log", px_q + 8, py_q - 8);
    ctx.font = "italic 11px Georgia, serif";
    ctx.fillText("a", px_q + 32, py_q - 3);
    ctx.font = "italic 13px Georgia, serif";
    ctx.fillText("q", px_q + 40, py_q - 8);

    // Function label - beautiful mathematical notation
    const labelX = w / 2 - 35;
    const labelY = a > 1 ? 35 : h - 30;

    ctx.fillStyle = color;
    ctx.font = "italic 17px Georgia, serif";
    ctx.fillText("y", labelX, labelY);

    ctx.font = "16px Arial";
    ctx.fillText(" = log", labelX + 12, labelY);

    // Subscript a
    ctx.font = "italic 12px Georgia, serif";
    ctx.fillText("a", labelX + 58, labelY + 5);

    // x
    ctx.font = "italic 17px Georgia, serif";
    ctx.fillText("x", labelX + 70, labelY);
   }

   function analyzeProperties() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);
     const p = parseFloat(document.getElementById('pointP').value);
     const q = parseFloat(document.getElementById('pointQ').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     if (p <= 0 || q <= 0) {
      document.getElementById('errorMessage').textContent = 'Points p and q must be positive.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const behavior = a > 1 ? 'Increasing function (base > 1)' : 'Decreasing function (base < 1)';
     const logP = Math.log(p) / Math.log(a);
     const logQ = Math.log(q) / Math.log(a);
     const comparison = a > 1 ?
      (p < q ? 'log_a(p) < log_a(q)' : 'log_a(p) > log_a(q)') :
      (p < q ? 'log_a(p) > log_a(q)' : 'log_a(p) < log_a(q)');

     document.getElementById('functionDisplay').innerHTML = `<strong>Function:</strong> y = log<sub>${a}</sub>(x)`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Behavior:</strong> ${behavior}`;
     document.getElementById('comparisonDisplay').innerHTML = `<strong>Comparison:</strong> ${comparison}`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, p, q);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error analyzing properties. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function showMonotonicity() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const behavior = a > 1 ? 'Strictly Increasing' : 'Strictly Decreasing';
     const property = a > 1 ?
      '0 < p < q ⇒ log_a(p) < log_a(q)' :
      '0 < p < q ⇒ log_a(p) > log_a(q)';

     document.getElementById('functionDisplay').innerHTML = `<strong>Monotonicity:</strong> ${behavior}`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Property:</strong> ${property}`;
     document.getElementById('comparisonDisplay').innerHTML = `<strong>One-to-One:</strong> Yes (injective function)`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, null, null, true);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error showing monotonicity. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function compareValues() {
    try {
     const a = parseFloat(document.getElementById('baseA').value);
     const p = parseFloat(document.getElementById('pointP').value);
     const q = parseFloat(document.getElementById('pointQ').value);

     if (a <= 0 || a === 1) {
      document.getElementById('errorMessage').textContent = 'Base must be positive and not equal to 1.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     if (p <= 0 || q <= 0) {
      document.getElementById('errorMessage').textContent = 'Points p and q must be positive.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const logP = Math.log(p) / Math.log(a);
     const logQ = Math.log(q) / Math.log(a);
     const comparison = logP < logQ ? 'log_a(p) < log_a(q)' : 'log_a(p) > log_a(q)';
     const relation = p < q ? 'p < q' : 'p > q';

     document.getElementById('functionDisplay').innerHTML = `<strong>Values:</strong> log<sub>${a}</sub>(${p}) ≈ ${logP.toFixed(3)}, log<sub>${a}</sub>(${q}) ≈ ${logQ.toFixed(3)}`;
     document.getElementById('behaviorDisplay').innerHTML = `<strong>Relation:</strong> ${relation}`;
     document.getElementById('comparisonDisplay').innerHTML = `<strong>Result:</strong> ${comparison}`;

     document.getElementById('errorMessage').style.display = 'none';
     drawInteractiveGraph(a, p, q, false, true);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error comparing values. Please check your input values.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function drawInteractiveGraph(a, p = null, q = null, showMonotonicity = false, showComparison = false) {
    const canvas = document.getElementById('interactiveCanvas');
    const ctx = canvas.getContext('2d');

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const w = canvas.width, h = canvas.height;
    const x0 = 80;
    const y0 = h / 2;

    const xScale = 40;
    const yScale = 30;

    // Draw grid
    ctx.strokeStyle = "#e8e8e8";
    ctx.lineWidth = 0.8;
    for (let i = -5; i <= 8; i++) {
     let px = x0 + i * xScale;
     if (px >= 0 && px <= w) {
      ctx.beginPath();
      ctx.moveTo(px, 0);
      ctx.lineTo(px, h);
      ctx.stroke();
     }
     let py = y0 - i * yScale;
     if (py >= 0 && py <= h) {
      ctx.beginPath();
      ctx.moveTo(0, py);
      ctx.lineTo(w, py);
      ctx.stroke();
     }
    }

    // Draw axes
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, y0);
    ctx.lineTo(w, y0);
    ctx.moveTo(x0, 0);
    ctx.lineTo(x0, h);
    ctx.stroke();

    // Draw logarithmic curve
    ctx.strokeStyle = "#667eea";
    ctx.lineWidth = 3;
    ctx.beginPath();
    let started = false;
    for (let x = 0.01; x <= 8; x += 0.02) {
     let y = Math.log(x) / Math.log(a);
     let px = x0 + x * xScale;
     let py = y0 - y * yScale;
     if (py >= 0 && py <= h && px >= 0 && px <= w && !isNaN(y) && isFinite(y)) {
      if (!started) {
       ctx.moveTo(px, py);
       started = true;
      } else {
       ctx.lineTo(px, py);
      }
     }
    }
    ctx.stroke();

    // Draw points p and q if provided
    if (p && p > 0) {
     const y_p = Math.log(p) / Math.log(a);
     const px_p = x0 + p * xScale;
     const py_p = y0 - y_p * yScale;

     if (px_p >= 0 && px_p <= w && py_p >= 0 && py_p <= h) {
      ctx.fillStyle = "#e74c3c";
      ctx.beginPath();
      ctx.arc(px_p, py_p, 6, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 2;
      ctx.stroke();
     }
    }

    if (q && q > 0) {
     const y_q = Math.log(q) / Math.log(a);
     const px_q = x0 + q * xScale;
     const py_q = y0 - y_q * yScale;

     if (px_q >= 0 && px_q <= w && py_q >= 0 && py_q <= h) {
      ctx.fillStyle = "#27ae60";
      ctx.beginPath();
      ctx.arc(px_q, py_q, 6, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 2;
      ctx.stroke();
     }
    }

    // Labels
    ctx.fillStyle = "#000";
    ctx.font = "12px Arial";
    ctx.fillText("x", w - 15, y0 + 15);
    ctx.fillText("y", x0 - 15, 15);
    ctx.fillText("O", x0 - 12, y0 + 15);

    // Function labels
    ctx.fillStyle = "#667eea";
    ctx.font = "bold 14px Arial";
    ctx.fillText(`y = log_${a}(x)`, 400, 30);

    if (showMonotonicity) {
     ctx.fillStyle = "#e74c3c";
     ctx.fillText(a > 1 ? "Increasing" : "Decreasing", 400, 50);
    }

    if (showComparison && p && q) {
     ctx.fillStyle = "#27ae60";
     ctx.fillText(`p=${p}, q=${q}`, 400, 50);
    }
   }

   function resetDemo() {
    document.getElementById('baseA').value = '2';
    document.getElementById('pointP').value = '0.5';
    document.getElementById('pointQ').value = '2';
    analyzeProperties();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Monotonicity Analysis</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: y = log₃(x)</div>
        <div class="calculation-step">Base: 3 > 1</div>
        <div class="calculation-step">Conclusion: Increasing function</div>
        <div class="calculation-step">Property: 0 < p < q ⇒ log₃(p) < log₃(q)</div>
        <div class="calculation-step">Example: log₃(0.5) ≈ -0.631, log₃(2) ≈ 0.631</div>
        <div class="calculation-step">Verification: 0.5 < 2, and -0.631 < 0.631 ✓</div>
        <div class="calculation-step">As x increases from 0⁺ to ∞, y increases from -∞ to ∞</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Value Comparison</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Compare: log₂(0.25) and log₂(4)</div>
        <div class="calculation-step">Base: 2 > 1 (increasing function)</div>
        <div class="calculation-step">Compare inputs: 0.25 < 4</div>
        <div class="calculation-step">Property: 0.25 < 4 ⇒ log₂(0.25) < log₂(4)</div>
        <div class="calculation-step">Calculation: log₂(0.25) = log₂(1/4) = -2</div>
        <div class="calculation-step">Calculation: log₂(4) = 2</div>
        <div class="calculation-step">Verification: -2 < 2 ✓</div>
        <div class="calculation-step">The larger input gives the larger output</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Base Comparison</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Compare: y = log₂(x) and y = log₀.₅(x) for x > 1</div>
        <div class="calculation-step">log₂(x): base 2 > 1, increasing function</div>
        <div class="calculation-step">log₀.₅(x): base 0.5 < 1, decreasing function</div>
        <div class="calculation-step">For x > 1: log₂(x) > 0, log₀.₅(x) < 0</div>
        <div class="calculation-step">Example at x = 2: log₂(2) = 1, log₀.₅(2) ≈ -1</div>
        <div class="calculation-step">Example at x = 4: log₂(4) = 2, log₀.₅(4) ≈ -2</div>
        <div class="calculation-step">As x increases, log₂(x) increases, log₀.₅(x) decreases</div>
        <div class="calculation-step">The functions have opposite behaviors</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }
  </script>
 </body>
</html>