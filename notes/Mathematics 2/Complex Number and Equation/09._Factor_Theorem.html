<!DOCTYPE html>
<!-- tags: Complex Number and Equation -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Factor Theorem
  </title>
  <script>
   MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                macros: {
                    blue: ['{\\color{blue}{#1}}', 1],
                    red: ['{\\color{red}{#1}}', 1]
                }
            },
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .diagram-block {
    flex: 1;
    min-width: 300px;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    display: flex;
    justify-content: center;
    align-items: center;
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 120px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
   }

   .factor-canvas {
    border: 2px solid #ddd;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .factor-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .factor-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .factor-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .factor-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .factor-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Complex Number and Equation">
   Factor Theorem
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     The Factor Theorem establishes the crucial link between polynomial roots and factors, making factorization and root-finding equivalent processes.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>Factor Theorem:</strong> $$P(k) = 0 \iff (x - k) \text{ divides } P(x)$$
      </div>
      <div class="formula-item">
       <strong>Root-Factor Equivalence:</strong> $$k \text{ is a root} \iff (x - k) \text{ is a factor}$$
      </div>
      <div class="formula-item">
       <strong>Multiple Roots:</strong> $$P(k) = P'(k) = 0 \implies (x - k)^2 \text{ divides } P(x)$$
      </div>
     </div>

     <div class="diagram-block">
      <svg viewbox="0 0 250 200" xmlns="http://www.w3.org/2000/svg">
       <!-- Factor theorem visualization -->
       <text fill="#333" font-size="14" x="125" y="20" text-anchor="middle">Polynomial P(x)</text>
       <!-- Root -->
       <circle cx="125" cy="80" fill="#e74c3c" r="4"></circle>
       <text fill="#e74c3c" font-size="12" x="120" y="65">k</text>
       <!-- Bidirectional arrows -->
       <line marker-end="url(#arrowhead)" stroke="#666" stroke-width="2" x1="125" x2="125" y1="90" y2="130"></line>
       <line marker-end="url(#arrowhead)" marker-start="url(#arrowhead)" stroke="#666" stroke-width="2" x1="125" x2="125" y1="130" y2="170"></line>
       <!-- Factor -->
       <text fill="#27ae60" font-size="12" x="125" y="150" text-anchor="middle">(x - k) factor</text>
       <!-- P(k) = 0 -->
       <text fill="#f39c12" font-size="12" x="125" y="185" text-anchor="middle">P(k) = 0</text>
       <!-- Arrow markers -->
       <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
         <polygon fill="#666" points="0 0, 10 3.5, 0 7"></polygon>
        </marker>
       </defs>
      </svg>
     </div>
    </div>

    <div class="factor-grid">
     <div class="factor-card">
      <h3>Forward Direction</h3>
      <div class="formula">P(k) = 0 ⇒ (x - k) divides P(x)</div>
      <div class="description">
       If k is a root of P(x), then (x - k) is an exact divisor of P(x).
       <br><br>
       This follows directly from the Remainder Theorem when remainder is zero.
      </div>
     </div>

     <div class="factor-card">
      <h3>Reverse Direction</h3>
      <div class="formula">(x - k) divides P(x) ⇒ P(k) = 0</div>
      <div class="description">
       If (x - k) divides P(x) exactly, then k must be a root of P(x).
       <br><br>
       This is the converse of the forward direction.
      </div>
     </div>

     <div class="factor-card">
      <h3>Complex Factors</h3>
      <div class="formula">Complex roots come in conjugate pairs</div>
      <div class="description">
       For polynomials with real coefficients, complex roots appear as conjugate pairs.
       <br><br>
       If a + bi is a root, then a - bi is also a root.
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Interactive Factor Checker</div>

     <div class="input-group">
      <div class="input-field">
       <label for="polyCoeffs">P(x) coefficients (comma-separated):</label>
       <input id="polyCoeffs" placeholder="1, -5, 6" type="text" value="1, -5, 6"/>
      </div>
      <div class="input-field">
       <label for="testRoot">Test value k:</label>
       <input id="testRoot" step="any" type="number" value="2"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="checkFactor()">Check if Factor</button>
      <button class="btn" onclick="findFactors()">Find All Factors</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="polynomialDisplay">
       Polynomial: <strong id="polynomialText">x² - 5x + 6</strong>
      </div>
      <div class="result-text" id="factorCheckDisplay">
       Is (x - 2) a factor?: <strong id="factorCheckText">Not checked</strong>
      </div>
      <div class="result-text" id="allFactorsDisplay">
       All factors: <strong id="allFactorsText">Not found</strong>
      </div>
     </div>

     <div class="canvas-container">
      <canvas class="factor-canvas" height="400" id="factorCanvas" width="500"></canvas>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The Factor Theorem is a direct consequence of the Remainder Theorem:</p>
     <div class="formula-block" style="margin: 20px 0;">
      $$\text{If } P(x) = (x - k)Q(x) + R, \text{ then } R = P(k)$$
     </div>
     <p>If (x - k) is a factor of P(x), then R = 0, so:</p>
     <div class="formula-block" style="margin: 20px 0;">
      $$P(x) = (x - k)Q(x) \implies P(k) = 0$$
     </div>
     <p>Conversely, if P(k) = 0, then R = 0, so (x - k) divides P(x) exactly.</p>
     <p>This establishes the equivalence between roots and factors, making polynomial factorization and root-finding interchangeable processes.</p>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Checking factors</h4>
       <p>Check if x - 1 is a factor of x³ - 3x² + 3x - 1</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Finding unknown coefficients</h4>
       <p>Find k so x - 1 is a factor of x³ + x² - kx - 3</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Complex factors</h4>
       <p>Factor x⁴ + 1 using complex numbers</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Applications</div>
     <ul>
      <li><strong>Polynomial Factorization:</strong> Breaking down polynomials into linear factors</li>
      <li><strong>Root Finding:</strong> Testing potential rational roots</li>
      <li><strong>Equation Solving:</strong> Finding solutions to polynomial equations</li>
      <li><strong>Polynomial Division:</strong> Checking exact divisibility</li>
      <li><strong>Function Analysis:</strong> Understanding polynomial behavior at specific points</li>
     </ul>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Determine if x + 2 is a factor of x³ + 3x² - 2x - 8.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Check P(-2): (-2)³ + 3(-2)² - 2(-2) - 8</p>
        <p>= -8 + 3(4) + 4 - 8 = -8 + 12 + 4 - 8 = 0</p>
        <p>Since P(-2) = 0, x + 2 is a factor.</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Find the value of a such that x - 3 is a factor of x³ - ax² + 7x - 6.</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Since x - 3 is a factor, P(3) = 0</p>
        <p>3³ - a(3)² + 7(3) - 6 = 0</p>
        <p>27 - 9a + 21 - 6 = 0</p>
        <p>42 - 9a = 0 ⇒ a = 42/9 = 14/3</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Show that x² + 1 is a factor of x⁴ + 2x² + 1.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Let P(x) = x⁴ + 2x² + 1 = (x² + 1)²</p>
        <p>Indeed, (x² + 1)² = x⁴ + 2x² + 1</p>
        <p>So x² + 1 is a factor.</p>
        <p>Alternatively, check P(i): i⁴ + 2i² + 1 = 1 + 2(-1) + 1 = 0</p>
        <p>Check P(-i): (-i)⁴ + 2(-i)² + 1 = 1 + 2(-1) + 1 = 0</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">P(k) = 0 if and only if (x - k) is a factor of P(x)</li>
      <li class="takeaway-item">Roots and factors are equivalent concepts</li>
      <li class="takeaway-item">Complex roots come in conjugate pairs for real polynomials</li>
      <li class="takeaway-item">Essential for polynomial factorization and root finding</li>
      <li class="takeaway-item">Works for any polynomial and any complex number k</li>
      <li class="takeaway-item">Foundation for solving polynomial equations</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function parsePolynomial(coeffsStr) {
    return coeffsStr.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
   }

   function evaluatePolynomial(coeffs, x) {
    let result = 0;
    for (let i = 0; i < coeffs.length; i++) {
     result += coeffs[i] * Math.pow(x, coeffs.length - 1 - i);
    }
    return result;
   }

   function formatPolynomial(coeffs) {
    if (coeffs.length === 0) return '0';

    let terms = [];
    for (let i = 0; i < coeffs.length; i++) {
     const power = coeffs.length - 1 - i;
     const coeff = coeffs[i];

     if (coeff === 0) continue;

     let term = '';
     if (power === 0) {
      term = coeff.toString();
     } else if (power === 1) {
      term = coeff === 1 ? 'x' : coeff === -1 ? '-x' : coeff + 'x';
     } else {
      term = coeff === 1 ? `x^${power}` : coeff === -1 ? `-x^${power}` : coeff + `x^${power}`;
     }

     terms.push(term);
    }

    return terms.join(' + ').replace(/\+\s*-/g, '- ');
   }

   function checkFactor() {
    try {
     const coeffsStr = document.getElementById('polyCoeffs').value;
     const k = parseFloat(document.getElementById('testRoot').value);

     if (!coeffsStr.trim()) {
      document.getElementById('errorMessage').textContent = 'Please enter polynomial coefficients.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const coeffs = parsePolynomial(coeffsStr);
     if (coeffs.length === 0) {
      document.getElementById('errorMessage').textContent = 'Invalid polynomial coefficients.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const value = evaluatePolynomial(coeffs, k);
     const isFactor = Math.abs(value) < 1e-10; // Account for floating point precision

     const polyStr = formatPolynomial(coeffs);
     document.getElementById('polynomialText').textContent = polyStr;
     document.getElementById('factorCheckText').textContent = isFactor ? 'Yes' : 'No';
     document.getElementById('errorMessage').style.display = 'none';

     drawFactorVisualization(coeffs, k, value);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error checking factor. Please check your input.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function findFactors() {
    try {
     const coeffsStr = document.getElementById('polyCoeffs').value;
     const coeffs = parsePolynomial(coeffsStr);

     if (coeffs.length === 0) {
      document.getElementById('errorMessage').textContent = 'Invalid polynomial coefficients.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     // Find rational roots (factors of constant term over factors of leading coefficient)
     const leadingCoeff = coeffs[0];
     const constantTerm = coeffs[coeffs.length - 1];

     const leadingFactors = getFactors(Math.abs(leadingCoeff));
     const constantFactors = getFactors(Math.abs(constantTerm));

     const possibleRoots = [];
     for (const num of constantFactors) {
      for (const den of leadingFactors) {
       possibleRoots.push(num / den, -num / den);
      }
     }

     // Remove duplicates
     const uniqueRoots = [...new Set(possibleRoots)];

     const actualRoots = [];
     for (const root of uniqueRoots) {
      if (Math.abs(evaluatePolynomial(coeffs, root)) < 1e-10) {
       actualRoots.push(root);
      }
     }

     let factorsStr = 'None found';
     if (actualRoots.length > 0) {
      factorsStr = actualRoots.map(r => `(x - ${r})`).join(', ');
     }

     document.getElementById('allFactorsText').textContent = factorsStr;
     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error finding factors.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function getFactors(n) {
    const factors = [];
    for (let i = 1; i <= n; i++) {
     if (n % i === 0) {
      factors.push(i);
     }
    }
    return factors;
   }

   function drawFactorVisualization(coeffs, k, value) {
    const canvas = document.getElementById('factorCanvas');
    const ctx = canvas.getContext('2d');

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Calculate some points around k
    const points = [];
    const range = 4;
    const step = 0.5;

    for (let x = k - range; x <= k + range; x += step) {
     points.push({x: x, y: evaluatePolynomial(coeffs, x)});
    }

    // Find bounds
    const ys = points.map(p => p.y);
    const minY = Math.min(...ys);
    const maxY = Math.max(...ys);

    // Scale factors
    const scaleX = canvas.width / (2 * range);
    const scaleY = canvas.height / (maxY - minY + 4);
    const offsetX = canvas.width / 2 - k * scaleX;
    const offsetY = canvas.height / 2 - (minY + maxY) / 2 * scaleY;

    // Draw axes
    ctx.strokeStyle = '#ddd';
    ctx.lineWidth = 1;

    // X-axis
    ctx.beginPath();
    ctx.moveTo(0, offsetY);
    ctx.lineTo(canvas.width, offsetY);
    ctx.stroke();

    // Y-axis
    ctx.beginPath();
    ctx.moveTo(offsetX, 0);
    ctx.lineTo(offsetX, canvas.height);
    ctx.stroke();

    // Draw polynomial curve
    ctx.strokeStyle = '#667eea';
    ctx.lineWidth = 2;
    ctx.beginPath();

    points.forEach((point, index) => {
     const canvasX = point.x * scaleX + offsetX;
     const canvasY = -point.y * scaleY + offsetY;

     if (index === 0) {
      ctx.moveTo(canvasX, canvasY);
     } else {
      ctx.lineTo(canvasX, canvasY);
     }
    });

    ctx.stroke();

    // Draw the point (k, P(k))
    const pointX = k * scaleX + offsetX;
    const pointY = -value * scaleY + offsetY;

    const isRoot = Math.abs(value) < 1e-10;
    ctx.fillStyle = isRoot ? '#27ae60' : '#e74c3c';
    ctx.beginPath();
    ctx.arc(pointX, pointY, 6, 0, 2 * Math.PI);
    ctx.fill();

    // Draw x-axis crossing if it's a root
    if (isRoot) {
     ctx.strokeStyle = '#27ae60';
     ctx.setLineDash([5, 5]);
     ctx.beginPath();
     ctx.moveTo(pointX, pointY);
     ctx.lineTo(pointX, offsetY);
     ctx.stroke();
     ctx.setLineDash([]);
    }

    // Labels
    ctx.fillStyle = '#333';
    ctx.font = '12px Arial';
    ctx.textAlign = 'center';
    ctx.fillText(`(${k}, ${value.toFixed(3)})`, pointX, pointY - 10);
    ctx.fillText(`x = ${k}`, pointX, canvas.height - 10);

    // Legend
    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
    ctx.fillRect(10, 10, 140, 60);
    ctx.strokeStyle = '#333';
    ctx.strokeRect(10, 10, 140, 60);

    ctx.fillStyle = '#333';
    ctx.font = '10px Arial';
    ctx.textAlign = 'left';
    ctx.fillText('Legend:', 15, 25);
    ctx.fillText('● P(k) = 0 (root)', 15, 40);
    ctx.fillText('● P(k) ≠ 0', 15, 55);
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Checking Factors</h4>
       <div class="calculation-steps">
        <div class="calculation-step">P(x) = x³ - 3x² + 3x - 1</div>
        <div class="calculation-step">Check if x - 1 is a factor: P(1) = ?</div>
        <div class="calculation-step">P(1) = 1³ - 3(1)² + 3(1) - 1 = 1 - 3 + 3 - 1 = 0</div>
        <div class="calculation-step">Since P(1) = 0, x - 1 is a factor</div>
        <div class="calculation-step">Factorization: (x - 1)(x² - 2x + 1) = (x - 1)(x - 1)² = (x - 1)³</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Finding Unknown Coefficients</h4>
       <div class="calculation-steps">
        <div class="calculation-step">P(x) = x³ + x² - kx - 3</div>
        <div class="calculation-step">x - 1 is a factor, so P(1) = 0</div>
        <div class="calculation-step">P(1) = 1³ + 1² - k(1) - 3 = 0</div>
        <div class="calculation-step">1 + 1 - k - 3 = 0</div>
        <div class="calculation-step">-k + (-1) = 0 ⇒ k = -1</div>
        <div class="calculation-step">Verification: P(x) = x³ + x² - (-1)x - 3 = x³ + x² + x - 3</div>
        <div class="calculation-step">(x - 1)(x² + 2x + 3) = x³ + 2x² + 3x - x² - 2x - 3 = x³ + x² + x - 3 ✓</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Complex Factors</h4>
       <div class="calculation-steps">
        <div class="calculation-step">P(x) = x⁴ + 1</div>
        <div class="calculation-step">x⁴ + 1 = (x² + √2 x + 1)(x² - √2 x + 1)</div>
        <div class="calculation-step">But we can use complex numbers: x⁴ + 1 = 0</div>
        <div class="calculation-step">x⁴ = -1 = e^(iπ) = e^(iπ + i2kπ)</div>
        <div class="calculation-step">x = e^(i(π + 2kπ)/4) = e^(iπ(1 + 2k)/4)</div>
        <div class="calculation-step">For k=0: x = e^(iπ/4) = (1+i)/√2</div>
        <div class="calculation-step">For k=1: x = e^(i3π/4) = (-1+i)/√2</div>
        <div class="calculation-step">For k=2: x = e^(i5π/4) = (-1-i)/√2</div>
        <div class="calculation-step">For k=3: x = e^(i7π/4) = (1-i)/√2</div>
        <div class="calculation-step">Factors: (x - (1+i)/√2)(x - (1-i)/√2)(x - (-1+i)/√2)(x - (-1-i)/√2)</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   function resetDemo() {
    document.getElementById('polyCoeffs').value = '1, -5, 6';
    document.getElementById('testRoot').value = '2';
    document.getElementById('polynomialText').textContent = 'x² - 5x + 6';
    document.getElementById('factorCheckText').textContent = 'Not checked';
    document.getElementById('allFactorsText').textContent = 'Not found';
    document.getElementById('errorMessage').style.display = 'none';
    checkFactor();
   }

   // Initialize with default values
   document.addEventListener('DOMContentLoaded', function() {
    checkFactor();
   });
  </script>
 </body>
</html>
