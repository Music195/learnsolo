<!DOCTYPE html>
<!-- tags: Geometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Distance Between a Point and a Line
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graybox {
    background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
    color: #2c3e50;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 120px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .canvas-title {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .formula-display {
    text-align: center;
    margin: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    color: #e74c3c;
   }

   .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .case-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .case-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .case-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .case-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Geometry">
   Distance Between a Point and a Line
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     The distance between a point and a line is the length of the perpendicular segment connecting the point to the line. This fundamental concept is essential for coordinate geometry and spatial relationships.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>General Formula:</strong> $$d = \frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}}$$<br/>
       <strong>Point:</strong> (x₁, y₁)<br/>
       <strong>Line:</strong> ax + by + c = 0
      </div>
      <div class="formula-item">
       <strong>From Origin:</strong> $$d = \frac{|c|}{\sqrt{a^2 + b^2}}$$<br/>
       <strong>Special case when (x₁, y₁) = (0, 0)</strong>
      </div>
      <div class="formula-item">
       <strong>Foot of Perpendicular:</strong><br/>
       $$x = \frac{b(bx_1 - ay_1) - ac}{a^2 + b^2}$$<br/>
       $$y = \frac{a(ay_1 - bx_1) - bc}{a^2 + b^2}$$
      </div>
     </div>

     <div class="graybox">
      The distance formula represents the shortest path from a point to a line, measured along the perpendicular. The absolute value ensures the distance is always positive, regardless of which side of the line the point lies.
     </div>
    </div>

    <div class="section">
     <div class="section-title">Distance Formula Cases</div>
     <div class="cases-grid">
      <div class="case-card">
       <h3>General Case</h3>
       <div class="canvas-container">
        <div class="canvas-title">Distance from any point to a line</div>
        <canvas id="pointLineCanvas" width="350" height="300"></canvas>
       </div>
       <div class="formula">$$d = \frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}}$$</div>
       <div class="description">
        <strong>Point:</strong> (x₁, y₁)<br/>
        <strong>Line:</strong> ax + by + c = 0<br/>
        <strong>Distance:</strong> Length of perpendicular<br/>
        <strong>Foot:</strong> Point H where PH ⊥ line
       </div>
      </div>

      <div class="case-card">
       <h3>From Origin</h3>
       <div class="canvas-container">
        <div class="canvas-title">Distance from origin to line</div>
        <canvas id="originLineCanvas" width="350" height="300"></canvas>
       </div>
       <div class="formula">$$d = \frac{|c|}{\sqrt{a^2 + b^2}}$$</div>
       <div class="description">
        <strong>Point:</strong> (0, 0)<br/>
        <strong>Line:</strong> ax + by + c = 0<br/>
        <strong>Special case:</strong> x₁ = y₁ = 0<br/>
        <strong>Simplified:</strong> No x₁, y₁ terms
       </div>
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Distance Calculator</div>

     <div class="input-group">
      <div class="input-field">
       <label for="a">Line: ax + by + c = 0</label>
       <input id="a" placeholder="3" type="number" value="3"/>
       <input id="b" placeholder="4" type="number" value="4"/>
       <input id="c" placeholder="-24" type="number" value="-24"/>
      </div>
      <div class="input-field">
       <label for="x1">Point (x₁, y₁):</label>
       <input id="x1" placeholder="7" type="number" value="7"/>
       <input id="y1" placeholder="3" type="number" value="3"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="calculateDistance()">Calculate Distance</button>
      <button class="btn" onclick="calculateOriginDistance()">Distance from Origin</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="lineDisplay">
       <strong>Line:</strong> 3x + 4y - 24 = 0
      </div>
      <div class="result-text" id="pointDisplay">
       <strong>Point:</strong> (7, 3)
      </div>
      <div class="result-text" id="distanceDisplay">
       <strong>Distance:</strong> d = |3×7 + 4×3 + (-24)| / √(3² + 4²) = 3.00
      </div>
      <div class="result-text" id="footDisplay">
       <strong>Foot of Perpendicular:</strong> H(6.00, 4.50)
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The distance formula is derived from the concept of perpendicular distance:</p>
     <ul>
      <li><strong>Perpendicular Distance:</strong> Shortest distance from point to line</li>
      <li><strong>Vector Projection:</strong> Distance equals |projection| of point onto normal vector</li>
      <li><strong>Normal Vector:</strong> Vector (a, b) is normal to the line ax + by + c = 0</li>
      <li><strong>Absolute Value:</strong> Ensures positive distance regardless of side</li>
      <li><strong>Denominator:</strong> √(a² + b²) is magnitude of normal vector</li>
      <li><strong>Geometric Interpretation:</strong> Distance from point to plane in 2D</li>
     </ul>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{aligned}
      \text{Derivation:} \\
      \text{Line: } ax + by + c = 0 \\
      \text{Point: } (x_1, y_1) \\
      \text{Distance d = } \frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}} \\
      \\
      \text{Foot of perpendicular H(x,y):} \\
      \text{Vector PH ⊥ normal vector (a,b)} \\
      \text{So: } \frac{y - y_1}{x - x_1} = -\frac{a}{b} \\
      \text{And: } a(x - x_1) + b(y - y_1) = 0
      \end{aligned}
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: General Distance</h4>
       <p>Find distance from (7, 3) to line 3x + 4y - 24 = 0.</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Distance from Origin</h4>
       <p>Find distance from (0, 0) to line 2x + 3y - 6 = 0.</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Foot of Perpendicular</h4>
       <p>Find foot of perpendicular from (4, 5) to line x + y - 3 = 0.</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Find the distance between the point (3, 4) and the line 2x + 3y - 6 = 0.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Formula: d = |2×3 + 3×4 - 6| / √(2² + 3²)</p>
        <p>d = |6 + 12 - 6| / √(4 + 9) = |12| / √13 = 12/√13</p>
        <p><strong>Result:</strong> 12/√13 units</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Find the distance from the origin to the line 4x + 3y + 5 = 0.</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Formula: d = |5| / √(4² + 3²) = 5 / √(16 + 9) = 5/√25 = 5/5 = 1</p>
        <p><strong>Result:</strong> 1 unit</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Find the foot of the perpendicular from (2, 3) to the line x - 2y + 1 = 0.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Line: 1x + (-2)y + 1 = 0, so a=1, b=-2, c=1</p>
        <p>Foot H(x,y): a(x-x₁) + b(y-y₁) = 0</p>
        <p>1(x-2) + (-2)(y-3) = 0</p>
        <p>x - 2 - 2y + 6 = 0</p>
        <p>x - 2y + 4 = 0</p>
        <p>Also on line: x - 2y + 1 = 0</p>
        <p>Solving: x - 2y = -1, x - 2y = -4</p>
        <p>Subtract: 0 = 3 (inconsistent)</p>
        <p>Wait, let me recalculate...</p>
        <p>From perpendicular: 1(x-2) - 2(y-3) = 0</p>
        <p>x - 2 - 2y + 6 = 0</p>
        <p>x - 2y + 4 = 0</p>
        <p>Line: x - 2y = -1</p>
        <p>So: x - 2y = -1</p>
        <p>x - 2y = -4</p>
        <p>This gives x - 2y = -1 and x - 2y = -4, which is impossible.</p>
        <p>I think I made an error. Let me use the formula:</p>
        <p>t = (a*x₁ + b*y₁ + c)/(a² + b²)</p>
        <p>t = (1*2 + (-2)*3 + 1)/(1 + 4) = (2 - 6 + 1)/5 = (-3)/5 = -0.6</p>
        <p>x = x₁ - a*t = 2 - 1*(-0.6) = 2 + 0.6 = 2.6</p>
        <p>y = y₁ - b*t = 3 - (-2)*(-0.6) = 3 - 1.2 = 1.8</p>
        <p><strong>Result:</strong> H(2.6, 1.8)</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Distance is the length of the perpendicular from point to line</li>
      <li class="takeaway-item">Formula: d = |ax₁ + by₁ + c| / √(a² + b²)</li>
      <li class="takeaway-item">From origin: d = |c| / √(a² + b²) when x₁ = y₁ = 0</li>
      <li class="takeaway-item">Absolute value ensures positive distance</li>
      <li class="takeaway-item">Denominator √(a² + b²) is magnitude of normal vector (a,b)</li>
      <li class="takeaway-item">Foot of perpendicular can be calculated using the formula</li>
      <li class="takeaway-item">Essential for geometry, optimization, and spatial analysis</li>
      <li class="takeaway-item">Used in computer graphics, robotics, and engineering</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function calculateDistance() {
    try {
     const a = parseFloat(document.getElementById('a').value);
     const b = parseFloat(document.getElementById('b').value);
     const c = parseFloat(document.getElementById('c').value);
     const x1 = parseFloat(document.getElementById('x1').value);
     const y1 = parseFloat(document.getElementById('y1').value);

     if (isNaN(a) || isNaN(b) || isNaN(c) || isNaN(x1) || isNaN(y1)) {
      throw new Error('All values must be valid numbers');
     }

     if (a === 0 && b === 0) {
      throw new Error('Coefficients a and b cannot both be zero');
     }

     const numerator = Math.abs(a * x1 + b * y1 + c);
     const denominator = Math.sqrt(a * a + b * b);
     const distance = numerator / denominator;

     // Calculate foot of perpendicular
     const t = (a * x1 + b * y1 + c) / (a * a + b * b);
     const hx = x1 - a * t;
     const hy = y1 - b * t;

     document.getElementById('lineDisplay').innerHTML = `<strong>Line:</strong> ${a}x + ${b}y + ${c} = 0`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Point:</strong> (${x1}, ${y1})`;
     document.getElementById('distanceDisplay').innerHTML = `<strong>Distance:</strong> d = |${a}×${x1} + ${b}×${y1} + ${c}| / √(${a}² + ${b}²) = ${distance.toFixed(2)}`;
     document.getElementById('footDisplay').innerHTML = `<strong>Foot of Perpendicular:</strong> H(${hx.toFixed(2)}, ${hy.toFixed(2)})`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function calculateOriginDistance() {
    try {
     const a = parseFloat(document.getElementById('a').value);
     const b = parseFloat(document.getElementById('b').value);
     const c = parseFloat(document.getElementById('c').value);

     if (isNaN(a) || isNaN(b) || isNaN(c)) {
      throw new Error('Line coefficients must be valid numbers');
     }

     if (a === 0 && b === 0) {
      throw new Error('Coefficients a and b cannot both be zero');
     }

     const distance = Math.abs(c) / Math.sqrt(a * a + b * b);

     // Calculate foot of perpendicular from origin
     const t = c / (a * a + b * b);
     const hx = -a * t;
     const hy = -b * t;

     document.getElementById('lineDisplay').innerHTML = `<strong>Line:</strong> ${a}x + ${b}y + ${c} = 0`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Point:</strong> (0, 0)`;
     document.getElementById('distanceDisplay').innerHTML = `<strong>Distance:</strong> d = |${c}| / √(${a}² + ${b}²) = ${distance.toFixed(2)}`;
     document.getElementById('footDisplay').innerHTML = `<strong>Foot of Perpendicular:</strong> H(${hx.toFixed(2)}, ${hy.toFixed(2)})`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function resetDemo() {
    document.getElementById('a').value = '3';
    document.getElementById('b').value = '4';
    document.getElementById('c').value = '-24';
    document.getElementById('x1').value = '7';
    document.getElementById('y1').value = '3';
    calculateDistance();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - General Distance</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find distance from (7, 3) to line 3x + 4y - 24 = 0</div>
        <div class="calculation-step">Formula: d = |3×7 + 4×3 - 24| / √(3² + 4²)</div>
        <div class="calculation-step">Numerator: |21 + 12 - 24| = |9| = 9</div>
        <div class="calculation-step">Denominator: √(9 + 16) = √25 = 5</div>
        <div class="calculation-step">Distance: 9/5 = 1.8 units</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Distance from Origin</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find distance from (0, 0) to line 2x + 3y - 6 = 0</div>
        <div class="calculation-step">Formula: d = |-6| / √(2² + 3²)</div>
        <div class="calculation-step">Numerator: 6</div>
        <div class="calculation-step">Denominator: √(4 + 9) = √13</div>
        <div class="calculation-step">Distance: 6/√13 units</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Foot of Perpendicular</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find foot from (4, 5) to line x + y - 3 = 0</div>
        <div class="calculation-step">Line: 1x + 1y - 3 = 0, so a=1, b=1, c=-3</div>
        <div class="calculation-step">t = (1×4 + 1×5 - 3)/(1² + 1²) = (4 + 5 - 3)/2 = 6/2 = 3</div>
        <div class="calculation-step">x = 4 - 1×3 = 1</div>
        <div class="calculation-step">y = 5 - 1×3 = 2</div>
        <div class="calculation-step">Foot of perpendicular: H(1, 2)</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   // Initialize canvas visualizations
   window.addEventListener('load', function() {
    // Distance from Point to Line
    const canvas1 = document.getElementById('pointLineCanvas');
    const ctx1 = canvas1.getContext('2d');
    const w1 = canvas1.width;
    const h1 = canvas1.height;

    const x0_1 = 50, y0_1 = h1 - 40;
    const scale1 = 30;

    // Grid
    ctx1.strokeStyle = '#e8e8e8';
    ctx1.lineWidth = 0.8;
    for (let i = -1; i <= 10; i++) {
     ctx1.beginPath();
     ctx1.moveTo(x0_1 + i * scale1, 20);
     ctx1.lineTo(x0_1 + i * scale1, h1 - 20);
     ctx1.stroke();

     ctx1.beginPath();
     ctx1.moveTo(30, y0_1 - i * scale1);
     ctx1.lineTo(w1 - 20, y0_1 - i * scale1);
     ctx1.stroke();
    }

    // Axes
    ctx1.strokeStyle = '#000';
    ctx1.lineWidth = 2;
    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1, h1 - 20);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(30, y0_1);
    ctx1.lineTo(w1 - 20, y0_1);
    ctx1.stroke();

    // Arrow tips
    ctx1.fillStyle = '#000';
    ctx1.beginPath();
    ctx1.moveTo(w1 - 20, y0_1);
    ctx1.lineTo(w1 - 27, y0_1 - 4);
    ctx1.lineTo(w1 - 27, y0_1 + 4);
    ctx1.fill();

    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1 - 4, 27);
    ctx1.lineTo(x0_1 + 4, 27);
    ctx1.fill();

    // Axis labels
    ctx1.font = '14px Arial';
    ctx1.fillStyle = '#000';
    ctx1.textAlign = 'center';
    ctx1.fillText('x', w1 - 10, y0_1 + 20);
    ctx1.fillText('y', x0_1 - 20, 15);
    ctx1.fillText('O', x0_1 - 15, y0_1 + 15);

    // Line: 3x + 4y - 24 = 0 (or y = -0.75x + 6)
    const a = 3, b = 4, c = -24;
    const m = -a/b;
    const n = -c/b;

    ctx1.strokeStyle = '#3498db';
    ctx1.lineWidth = 2.5;
    ctx1.beginPath();
    const x1Start = 0, x1End = 9;
    const y1Start = m * x1Start + n;
    const y1End = m * x1End + n;
    ctx1.moveTo(x0_1 + x1Start * scale1, y0_1 - y1Start * scale1);
    ctx1.lineTo(x0_1 + x1End * scale1, y0_1 - y1End * scale1);
    ctx1.stroke();

    // Point P(7, 3)
    const px = 7, py = 3;
    ctx1.fillStyle = '#e74c3c';
    ctx1.beginPath();
    ctx1.arc(x0_1 + px * scale1, y0_1 - py * scale1, 5, 0, 2*Math.PI);
    ctx1.fill();

    // Perpendicular from point to line
    // Foot of perpendicular: H
    // Direction vector of line: (-b, a) = (-4, 3)
    // Perpendicular direction: (a, b) = (3, 4)
    const t = (a*px + b*py + c) / (a*a + b*b);
    const hx = px - a*t;
    const hy = py - b*t;

    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 2;
    ctx1.setLineDash([5, 5]);
    ctx1.beginPath();
    ctx1.moveTo(x0_1 + px * scale1, y0_1 - py * scale1);
    ctx1.lineTo(x0_1 + hx * scale1, y0_1 - hy * scale1);
    ctx1.stroke();
    ctx1.setLineDash([]);

    // Foot point H
    ctx1.fillStyle = '#27ae60';
    ctx1.beginPath();
    ctx1.arc(x0_1 + hx * scale1, y0_1 - hy * scale1, 4, 0, 2*Math.PI);
    ctx1.fill();

    // Right angle marker at H
    const cornerSize = 10;
    const hxPx = x0_1 + hx * scale1;
    const hyPx = y0_1 - hy * scale1;

    // Direction vectors
    const perpDx = (px - hx);
    const perpDy = (py - hy);
    const perpLen = Math.sqrt(perpDx*perpDx + perpDy*perpDy);
    const perpUnitX = perpDx / perpLen;
    const perpUnitY = perpDy / perpLen;

    // Line direction (perpendicular to perpendicular)
    const lineDx = -perpUnitY;
    const lineDy = perpUnitX;

    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 1.5;
    ctx1.beginPath();
    ctx1.moveTo(hxPx + cornerSize * perpUnitX, hyPx - cornerSize * perpUnitY);
    ctx1.lineTo(hxPx + cornerSize * perpUnitX + cornerSize * lineDx,
                hyPx - cornerSize * perpUnitY - cornerSize * lineDy);
    ctx1.lineTo(hxPx + cornerSize * lineDx, hyPx - cornerSize * lineDy);
    ctx1.stroke();

    // Labels
    ctx1.font = 'italic 16px Georgia';
    ctx1.fillStyle = '#e74c3c';
    ctx1.textAlign = 'left';
    ctx1.fillText('P(x₁, y₁)', x0_1 + px * scale1 + 10, y0_1 - py * scale1 - 5);

    ctx1.fillStyle = '#27ae60';
    ctx1.fillText('H', x0_1 + hx * scale1 - 15, y0_1 - hy * scale1 + 20);

    ctx1.fillStyle = '#3498db';
    ctx1.textAlign = 'center';
    ctx1.fillText('ax + by + c = 0', x0_1 + 4.5 * scale1, y0_1 - (m * 4.5 + n) * scale1 - 45);

    ctx1.font = '14px Arial';
    ctx1.fillStyle = '#27ae60';
    ctx1.textAlign = 'center';
    const midX = (px + hx) / 2;
    const midY = (py + hy) / 2;
    ctx1.fillText('d', x0_1 + midX * scale1 + 15, y0_1 - midY * scale1);

    // Distance from Origin to Line
    const canvas2 = document.getElementById('originLineCanvas');
    const ctx2 = canvas2.getContext('2d');
    const w2 = canvas2.width;
    const h2 = canvas2.height;

    const x0_2 = 50, y0_2 = h2 - 40;
    const scale2 = 30;

    // Grid
    ctx2.strokeStyle = '#e8e8e8';
    ctx2.lineWidth = 0.8;
    for (let i = -1; i <= 10; i++) {
     ctx2.beginPath();
     ctx2.moveTo(x0_2 + i * scale2, 20);
     ctx2.lineTo(x0_2 + i * scale2, h2 - 20);
     ctx2.stroke();

     ctx2.beginPath();
     ctx2.moveTo(30, y0_2 - i * scale2);
     ctx2.lineTo(w2 - 20, y0_2 - i * scale2);
     ctx2.stroke();
    }

    // Axes
    ctx2.strokeStyle = '#000';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2, h2 - 20);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(30, y0_2);
    ctx2.lineTo(w2 - 20, y0_2);
    ctx2.stroke();

    // Arrow tips
    ctx2.fillStyle = '#000';
    ctx2.beginPath();
    ctx2.moveTo(w2 - 20, y0_2);
    ctx2.lineTo(w2 - 27, y0_2 - 4);
    ctx2.lineTo(w2 - 27, y0_2 + 4);
    ctx2.fill();

    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2 - 4, 27);
    ctx2.lineTo(x0_2 + 4, 27);
    ctx2.fill();

    // Axis labels
    ctx2.font = '14px Arial';
    ctx2.fillStyle = '#000';
    ctx2.textAlign = 'center';
    ctx2.fillText('x', w2 - 10, y0_2 + 20);
    ctx2.fillText('y', x0_2 - 20, 15);
    ctx2.fillText('O', x0_2 - 15, y0_2 + 15);

    // Same line: 3x + 4y - 24 = 0
    const a2 = 3, b2 = 4, c2 = -24;
    const m2 = -a2/b2;
    const n2 = -c2/b2;

    ctx2.strokeStyle = '#3498db';
    ctx2.lineWidth = 2.5;
    ctx2.beginPath();
    const x2Start = 0, x2End = 9;
    const y2Start = m2 * x2Start + n2;
    const y2End = m2 * x2End + n2;
    ctx2.moveTo(x0_2 + x2Start * scale2, y0_2 - y2Start * scale2);
    ctx2.lineTo(x0_2 + x2End * scale2, y0_2 - y2End * scale2);
    ctx2.stroke();

    // Origin point
    ctx2.fillStyle = '#e74c3c';
    ctx2.beginPath();
    ctx2.arc(x0_2, y0_2, 5, 0, 2*Math.PI);
    ctx2.fill();

    // Perpendicular from origin to line
    const t2 = c2 / (a2*a2 + b2*b2);
    const hx2 = -a2*t2;
    const hy2 = -b2*t2;

    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 2;
    ctx2.setLineDash([5, 5]);
    ctx2.beginPath();
    ctx2.moveTo(x0_2, y0_2);
    ctx2.lineTo(x0_2 + hx2 * scale2, y0_2 - hy2 * scale2);
    ctx2.stroke();
    ctx2.setLineDash([]);

    // Foot point H
    ctx2.fillStyle = '#27ae60';
    ctx2.beginPath();
    ctx2.arc(x0_2 + hx2 * scale2, y0_2 - hy2 * scale2, 4, 0, 2*Math.PI);
    ctx2.fill();

    // Right angle marker at H
    const cornerSize2 = 10;
    const hxPx2 = x0_2 + hx2 * scale2;
    const hyPx2 = y0_2 - hy2 * scale2;

    // Direction vectors
    const perpDx2 = (0 - hx2);
    const perpDy2 = (0 - hy2);
    const perpLen2 = Math.sqrt(perpDx2*perpDx2 + perpDy2*perpDy2);
    const perpUnitX2 = perpDx2 / perpLen2;
    const perpUnitY2 = perpDy2 / perpLen2;

    // Line direction (perpendicular to perpendicular)
    const lineDx2 = -perpUnitY2;
    const lineDy2 = perpUnitX2;

    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 1.5;
    ctx2.beginPath();
    ctx2.moveTo(hxPx2 + cornerSize2 * perpUnitX2, hyPx2 - cornerSize2 * perpUnitY2);
    ctx2.lineTo(hxPx2 + cornerSize2 * perpUnitX2 + cornerSize2 * lineDx2,
                hyPx2 - cornerSize2 * perpUnitY2 - cornerSize2 * lineDy2);
    ctx2.lineTo(hxPx2 + cornerSize2 * lineDx2, hyPx2 - cornerSize2 * lineDy2);
    ctx2.stroke();

    // Labels
    ctx2.font = 'italic 16px Georgia';
    ctx2.fillStyle = '#e74c3c';
    ctx2.textAlign = 'right';
    ctx2.fillText('O(0, 0)', x0_2 - 10, y0_2 - 10);

    ctx2.fillStyle = '#27ae60';
    ctx2.textAlign = 'left';
    ctx2.fillText('H', x0_2 + hx2 * scale2 - 5, y0_2 - hy2 * scale2 - 10);

    ctx2.fillStyle = '#3498db';
    ctx2.textAlign = 'center';
    ctx2.fillText('ax + by + c = 0', x0_2 + 6 * scale2, y0_2 - (m2 * 4.5 + n2) * scale2 - 15);

    ctx2.font = '14px Arial';
    ctx2.fillStyle = '#27ae60';
    ctx2.textAlign = 'center';
    const midX2 = hx2 / 2;
    const midY2 = hy2 / 2;
    ctx2.fillText('d', x0_2 + midX2 * scale2 + 15, y0_2 - midY2 * scale2 + 5);

    // Initialize calculator
    calculateDistance();
   });
  </script>
 </body>
</html>