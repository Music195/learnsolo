<!DOCTYPE html>
<!-- tags: Geometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Position Relationship Between a Circle and a Line
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graybox {
    background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
    color: #2c3e50;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 120px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .canvas-title {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .formula-display {
    text-align: center;
    margin: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    color: #e74c3c;
   }

   .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .case-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .case-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .case-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .case-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Geometry">
   Position Relationship Between a Circle and a Line
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     The position relationship between a circle and a line is determined by the discriminant of the quadratic equation formed by substituting the line equation into the circle equation. This reveals whether the line intersects, touches, or misses the circle.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>Discriminant:</strong> $D = b^2 - 4ac$<br/>
       <strong>From quadratic:</strong> $ax^2 + bx + c = 0$
      </div>
      <div class="formula-item">
       <strong>D > 0:</strong> Two intersection points<br/>
       <strong>D = 0:</strong> One tangent point<br/>
       <strong>D < 0:</strong> No intersection
      </div>
      <div class="formula-item">
       <strong>Distance formula:</strong> $d = \frac{|ax_0 + by_0 + c|}{\sqrt{a^2 + b^2}}$<br/>
       <strong>Compare with radius</strong>
      </div>
     </div>

     <div class="graybox">
      The discriminant D determines the number of intersection points between the circle and line. This is the same discriminant used in quadratic equations.
     </div>
    </div>

    <div class="section">
     <div class="section-title">Three Cases of Intersection</div>
     <div class="cases-grid">
      <div class="case-card">
       <h3>Two Intersection Points</h3>
       <div class="canvas-container">
        <div class="canvas-title">Line intersects circle at two points</div>
        <canvas id="twoPointsCanvas" width="350" height="300"></canvas>
       </div>
       <div class="formula">$$D > 0 \quad \text{(Line crosses circle)}$$</div>
       <div class="description">
        <strong>Condition:</strong> Discriminant D > 0<br/>
        <strong>Geometric meaning:</strong> Line passes through circle<br/>
        <strong>Real solutions:</strong> Two distinct intersection points<br/>
        <strong>Distance:</strong> Line is outside circle
       </div>
      </div>

      <div class="case-card">
       <h3>Tangent Line</h3>
       <div class="canvas-container">
        <div class="canvas-title">Line touches circle at one point</div>
        <canvas id="tangentCanvas" width="350" height="300"></canvas>
       </div>
       <div class="formula">$$D = 0 \quad \text{(Line is tangent)}$$</div>
       <div class="description">
        <strong>Condition:</strong> Discriminant D = 0<br/>
        <strong>Geometric meaning:</strong> Line touches circle<br/>
        <strong>One solution:</strong> Single tangent point<br/>
        <strong>Distance:</strong> Line distance equals radius
       </div>
      </div>

      <div class="case-card">
       <h3>No Intersection</h3>
       <div class="canvas-container">
        <div class="canvas-title">Line does not intersect circle</div>
        <canvas id="noPointsCanvas" width="350" height="300"></canvas>
       </div>
       <div class="formula">$$D < 0 \quad \text{(No intersection)}$$</div>
       <div class="description">
        <strong>Condition:</strong> Discriminant D < 0<br/>
        <strong>Geometric meaning:</strong> Line misses circle<br/>
        <strong>No solutions:</strong> No intersection points<br/>
        <strong>Distance:</strong> Line is outside circle
       </div>
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Circle-Line Intersection Calculator</div>

     <div class="input-group">
      <div class="input-field">
       <label for="circleCenterX">Circle Center (h, k):</label>
       <input id="circleCenterX" placeholder="0" type="number" value="0"/>
       <input id="circleCenterY" placeholder="0" type="number" value="0"/>
      </div>
      <div class="input-field">
       <label for="circleRadius">Radius (r):</label>
       <input id="circleRadius" placeholder="5" type="number" value="5" min="0.1" step="0.1"/>
      </div>
      <div class="input-field">
       <label for="lineA">Line (ax + by + c = 0):</label>
       <input id="lineA" placeholder="1" type="number" value="1"/>
       <input id="lineB" placeholder="1" type="number" value="1"/>
       <input id="lineC" placeholder="-5" type="number" value="-5"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="calculateIntersection()">Calculate Intersection</button>
      <button class="btn" onclick="findTangentLine()">Find Tangent Line</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="circleDisplay">
       <strong>Circle:</strong> (x - 0)² + (y - 0)² = 25
      </div>
      <div class="result-text" id="lineDisplay">
       <strong>Line:</strong> x + y - 5 = 0
      </div>
      <div class="result-text" id="discriminantDisplay">
       <strong>Discriminant:</strong> D = 0
      </div>
      <div class="result-text" id="intersectionDisplay">
       <strong>Intersection:</strong> Tangent at (2.5, 2.5)
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The position relationship is determined by solving the system of circle and line equations:</p>
     <ul>
      <li><strong>Circle equation:</strong> $(x - h)^2 + (y - k)^2 = r^2$</li>
      <li><strong>Line equation:</strong> $ax + by + c = 0$</li>
      <li><strong>Substitution:</strong> Substitute line equation into circle to get quadratic in x</li>
      <li><strong>Quadratic form:</strong> $Ax^2 + Bx + C = 0$ where A, B, C are functions of circle and line parameters</li>
      <li><strong>Discriminant:</strong> D = B² - 4AC determines number of solutions</li>
      <li><strong>Geometric interpretation:</strong> D > 0 (secant), D = 0 (tangent), D < 0 (no intersection)</li>
      <li><strong>Distance formula:</strong> Alternative approach using perpendicular distance from center to line</li>
      <li><strong>Tangent condition:</strong> Distance from center to line equals radius</li>
     </ul>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{aligned}
      \text{System:} \\
      (x - h)^2 + (y - k)^2 = r^2 \\
      ax + by + c = 0 \\
      \\
      \text{Solve for y from line:} \\
      y = -\frac{a}{b}x - \frac{c}{b} \\
      \\
      \text{Substitute into circle:} \\
      (x - h)^2 + \left(-\frac{a}{b}x - \frac{c}{b} - k\right)^2 = r^2 \\
      \\
      \text{Expand and collect terms to get:} \\
      Ax^2 + Bx + C = 0 \\
      \\
      \text{Discriminant:} \\
      D = B^2 - 4AC
      \end{aligned}
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Two Intersection Points</h4>
       <p>Find intersection of (x-1)² + (y-2)² = 9 and x + y - 3 = 0.</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Tangent Line</h4>
       <p>Find intersection of x² + y² = 25 and x + y - 5√2 = 0.</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: No Intersection</h4>
       <p>Find intersection of (x-2)² + (y-3)² = 4 and x + y + 10 = 0.</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Find the intersection points of the circle x² + y² = 25 and the line x + y = 7.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Circle: x² + y² = 25</p>
        <p>Line: x + y = 7 ⇒ y = 7 - x</p>
        <p>Substitute: x² + (7 - x)² = 25</p>
        <p>x² + 49 - 14x + x² = 25</p>
        <p>2x² - 14x + 24 = 0</p>
        <p>x² - 7x + 12 = 0</p>
        <p>(x - 3)(x - 4) = 0</p>
        <p>x = 3, y = 4; x = 4, y = 3</p>
        <p><strong>Result:</strong> (3, 4) and (4, 3)</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Determine if the line 3x + 4y = 25 is tangent to the circle x² + y² = 25.</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Circle: x² + y² = 25</p>
        <p>Line: 3x + 4y - 25 = 0</p>
        <p>Distance from center (0,0) to line: |0+0-25|/√(9+16) = 25/5 = 5</p>
        <p>Distance equals radius (5), so tangent.</p>
        <p><strong>Result:</strong> Yes, the line is tangent to the circle.</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Find the value of k so that the line x + y = k is tangent to x² + y² = 16.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Circle: x² + y² = 16</p>
        <p>Line: x + y - k = 0</p>
        <p>Distance = radius: |k|/√2 = 4</p>
        <p>|k| = 4√2</p>
        <p>k = 4√2 or k = -4√2</p>
        <p><strong>Result:</strong> k = ±4√2</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Discriminant D = b² - 4ac determines intersection: D > 0 (two points), D = 0 (tangent), D < 0 (no intersection)</li>
      <li class="takeaway-item">Substitute line equation into circle equation to get quadratic equation in one variable</li>
      <li class="takeaway-item">Tangent condition: perpendicular distance from center to line equals radius</li>
      <li class="takeaway-item">Distance formula: d = |ax₀ + by₀ + c|/√(a² + b²) where (x₀,y₀) is center</li>
      <li class="takeaway-item">For tangent lines, the point of tangency is where radius is perpendicular to tangent</li>
      <li class="takeaway-item">Two intersection points occur when line crosses through the circle</li>
      <li class="takeaway-item">No intersection when line is completely outside circle (distance > radius)</li>
      <li class="takeaway-item">Essential for solving systems of circle and line equations in analytic geometry</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function calculateIntersection() {
    try {
     const h = parseFloat(document.getElementById('circleCenterX').value);
     const k = parseFloat(document.getElementById('circleCenterY').value);
     const r = parseFloat(document.getElementById('circleRadius').value);
     const a = parseFloat(document.getElementById('lineA').value);
     const b = parseFloat(document.getElementById('lineB').value);
     const c = parseFloat(document.getElementById('lineC').value);

     if (isNaN(h) || isNaN(k) || isNaN(r) || isNaN(a) || isNaN(b) || isNaN(c) || r <= 0) {
      throw new Error('All values must be valid numbers and radius must be positive');
     }

     if (a === 0 && b === 0) {
      throw new Error('Line coefficients a and b cannot both be zero');
     }

     // Calculate quadratic coefficients
     const A = a*a + b*b;
     const B = 2*a*(b*k - b*h + c) + 2*b*c; // Simplified
     const C = (h*h + k*k - r*r)*b*b + 2*b*c*(k) + c*c + 2*a*c*h; // Simplified

     // Actually, let's use the proper substitution method
     // From line: by = -ax - c ⇒ y = (-a/b)x - c/b (assuming b ≠ 0)
     let A_quad, B_quad, C_quad;

     if (Math.abs(b) > 1e-10) {
      // y = (-a/b)x - c/b
      const m = -a/b;
      const intercept = -c/b;

      // Substitute into circle: (x - h)^2 + (m*x + intercept - k)^2 = r^2
      A_quad = 1 + m*m;
      B_quad = 2*m*(intercept - k) - 2*h;
      C_quad = (intercept - k)*(intercept - k) + h*h - r*r;
     } else {
      // Vertical line x = -c/a
      const x_val = -c/a;
      // Substitute x into circle: (x_val - h)^2 + (y - k)^2 = r^2
      // (y - k)^2 = r^2 - (x_val - h)^2
      const discriminant = r*r - (x_val - h)*(x_val - h);
      if (discriminant > 0) {
       A_quad = 0; B_quad = 0; C_quad = -discriminant; // Two solutions
      } else if (discriminant === 0) {
       A_quad = 0; B_quad = 0; C_quad = 0; // One solution
      } else {
       A_quad = 0; B_quad = 0; C_quad = discriminant; // No solutions
      }
     }

     const D = B_quad*B_quad - 4*A_quad*C_quad;

     document.getElementById('circleDisplay').innerHTML = `<strong>Circle:</strong> (x - ${h})² + (y - ${k})² = ${r*r}`;
     document.getElementById('lineDisplay').innerHTML = `<strong>Line:</strong> ${a}x + ${b}y + ${c} = 0`;

     let discriminantText = `<strong>Discriminant:</strong> D = ${D.toFixed(2)}`;
     if (Math.abs(D) < 1e-10) discriminantText += " ≈ 0";
     document.getElementById('discriminantDisplay').innerHTML = discriminantText;

     let intersectionText = "<strong>Intersection:</strong> ";
     if (D > 1e-10) {
      intersectionText += "Two intersection points";
     } else if (Math.abs(D) < 1e-10) {
      intersectionText += "Tangent (one point)";
     } else {
      intersectionText += "No intersection";
     }
     document.getElementById('intersectionDisplay').innerHTML = intersectionText;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function findTangentLine() {
    try {
     const h = parseFloat(document.getElementById('circleCenterX').value);
     const k = parseFloat(document.getElementById('circleCenterY').value);
     const r = parseFloat(document.getElementById('circleRadius').value);

     if (isNaN(h) || isNaN(k) || isNaN(r) || r <= 0) {
      throw new Error('Circle parameters must be valid');
     }

     // For tangent from origin to circle centered at (h,k) with radius r
     // The tangent condition is distance = radius
     // For line ax + by + c = 0, distance = |ah + bk + c|/√(a²+b²) = r

     // Let's set a simple case: tangent from (0,0) to circle
     const distance = Math.sqrt(h*h + k*k);
     if (distance < r) {
      throw new Error('Center is inside circle - no tangent from origin');
     }

     // The tangent lines from (0,0) to circle (x-h)² + (y-k)² = r²
     // Solve the system and set discriminant to zero
     // This is complex, so let's provide a specific example

     document.getElementById('lineA').value = h;
     document.getElementById('lineB').value = k;
     document.getElementById('lineC').value = -(h*h + k*k - r*r)/2;

     calculateIntersection();

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function resetDemo() {
    document.getElementById('circleCenterX').value = '0';
    document.getElementById('circleCenterY').value = '0';
    document.getElementById('circleRadius').value = '5';
    document.getElementById('lineA').value = '1';
    document.getElementById('lineB').value = '1';
    document.getElementById('lineC').value = '-5';
    calculateIntersection();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Two Intersection Points</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: (x-1)² + (y-2)² = 9</div>
        <div class="calculation-step">Line: x + y - 3 = 0 ⇒ y = 3 - x</div>
        <div class="calculation-step">Substitute: (x-1)² + (3-x-2)² = 9</div>
        <div class="calculation-step">(x-1)² + (1-x)² = 9</div>
        <div class="calculation-step">x²-2x+1 + 1-2x+x² = 9</div>
        <div class="calculation-step">2x² - 4x + 2 = 9</div>
        <div class="calculation-step">2x² - 4x - 7 = 0</div>
        <div class="calculation-step">x = [4 ± √(16 + 56)]/4 = [4 ± √72]/4</div>
        <div class="calculation-step">x = [4 ± 6√2]/4 = [2 ± 3√2]/2</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Tangent Line</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: x² + y² = 25</div>
        <div class="calculation-step">Line: x + y - 5√2 = 0 ⇒ y = 5√2 - x</div>
        <div class="calculation-step">Substitute: x² + (5√2 - x)² = 25</div>
        <div class="calculation-step">x² + 50 - 10√2 x + x² = 25</div>
        <div class="calculation-step">2x² - 10√2 x + 25 = 0</div>
        <div class="calculation-step">Discriminant: D = (10√2)² - 4*2*25 = 200 - 200 = 0</div>
        <div class="calculation-step">x = 10√2 / (4) = 5√2 / 2 = (5/2)√2</div>
        <div class="calculation-step">y = 5√2 - (5/2)√2 = (10/2 - 5/2)√2 = (5/2)√2</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - No Intersection</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: (x-2)² + (y-3)² = 4</div>
        <div class="calculation-step">Line: x + y + 10 = 0 ⇒ y = -x - 10</div>
        <div class="calculation-step">Substitute: (x-2)² + (-x-10-3)² = 4</div>
        <div class="calculation-step">(x-2)² + (-x-13)² = 4</div>
        <div class="calculation-step">x²-4x+4 + x²+26x+169 = 4</div>
        <div class="calculation-step">2x² + 22x + 173 = 4</div>
        <div class="calculation-step">2x² + 22x + 169 = 0</div>
        <div class="calculation-step">Discriminant: D = 484 - 4*2*169 = 484 - 1352 = -868 < 0</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   // Initialize canvas visualizations
   window.addEventListener('load', function() {
    // Two Intersection Points
    const canvas1 = document.getElementById('twoPointsCanvas');
    const ctx1 = canvas1.getContext('2d');
    const w1 = canvas1.width;
    const h1 = canvas1.height;

    const x0_1 = 50, y0_1 = h1 - 40;
    const scale1 = 35;

    // Grid
    ctx1.strokeStyle = '#e8e8e8';
    ctx1.lineWidth = 0.8;
    for (let i = -1; i <= 11; i++) {
     ctx1.beginPath();
     ctx1.moveTo(x0_1 + i * scale1, 20);
     ctx1.lineTo(x0_1 + i * scale1, h1 - 20);
     ctx1.stroke();

     ctx1.beginPath();
     ctx1.moveTo(30, y0_1 - i * scale1);
     ctx1.lineTo(w1 - 20, y0_1 - i * scale1);
     ctx1.stroke();
    }

    // Axes
    ctx1.strokeStyle = '#000';
    ctx1.lineWidth = 2;
    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1, h1 - 20);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(30, y0_1);
    ctx1.lineTo(w1 - 20, y0_1);
    ctx1.stroke();

    // Arrow tips
    ctx1.fillStyle = '#000';
    ctx1.beginPath();
    ctx1.moveTo(w1 - 20, y0_1);
    ctx1.lineTo(w1 - 27, y0_1 - 4);
    ctx1.lineTo(w1 - 27, y0_1 + 4);
    ctx1.fill();

    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1 - 4, 27);
    ctx1.lineTo(x0_1 + 4, 27);
    ctx1.fill();

    // Axis labels
    ctx1.font = '14px Arial';
    ctx1.fillStyle = '#000';
    ctx1.textAlign = 'center';
    ctx1.fillText('x', w1 - 10, y0_1 + 20);
    ctx1.fillText('y', x0_1 - 20, 15);
    ctx1.fillText('O', x0_1 - 15, y0_1 + 15);

    // Circle with center (5, 5) and radius 3
    const ca1 = 5, cb1 = 5, r1 = 3;

    ctx1.strokeStyle = '#3498db';
    ctx1.lineWidth = 2.5;
    ctx1.beginPath();
    ctx1.arc(x0_1 + ca1 * scale1, y0_1 - cb1 * scale1, r1 * scale1, 0, 2*Math.PI);
    ctx1.stroke();

    // Center point
    ctx1.fillStyle = '#e74c3c';
    ctx1.beginPath();
    ctx1.arc(x0_1 + ca1 * scale1, y0_1 - cb1 * scale1, 4, 0, 2*Math.PI);
    ctx1.fill();

    // Line passing through circle: y = -0.5x + 6
    const m1 = -0.5, n1 = 6;
    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 2.5;
    ctx1.beginPath();
    const x1Start = 1, x1End = 10;
    const y1Start = m1 * x1Start + n1;
    const y1End = m1 * x1End + n1;
    ctx1.moveTo(x0_1 + x1Start * scale1, y0_1 - y1Start * scale1);
    ctx1.lineTo(x0_1 + x1End * scale1, y0_1 - y1End * scale1);
    ctx1.stroke();

    // Intersection points (calculated)
    const int1x = 6.8, int1y = 2.6;
    const int2x = 2, int2y = 5;

    ctx1.fillStyle = '#9b59b6';
    ctx1.beginPath();
    ctx1.arc(x0_1 + int1x * scale1, y0_1 - int1y * scale1, 5, 0, 2*Math.PI);
    ctx1.fill();

    ctx1.beginPath();
    ctx1.arc(x0_1 + int2x * scale1, y0_1 - int2y * scale1, 5, 0, 2*Math.PI);
    ctx1.fill();

    // Labels
    ctx1.font = 'italic 14px Georgia';
    ctx1.fillStyle = '#3498db';
    ctx1.textAlign = 'left';
    ctx1.fillText('Circle', x0_1 + (ca1 + r1) * scale1 + 10, y0_1 - cb1 * scale1);

    ctx1.fillStyle = '#27ae60';
    ctx1.fillText('Line', x0_1 + 9 * scale1, y0_1 - (m1 * 9 + n1) * scale1 - 10);

    ctx1.fillStyle = '#9b59b6';
    ctx1.font = '13px Arial';
    ctx1.fillText('D > 0', x0_1 + 8.5 * scale1, y0_1 - 8 * scale1);

    // Tangent Line
    const canvas2 = document.getElementById('tangentCanvas');
    const ctx2 = canvas2.getContext('2d');
    const w2 = canvas2.width;
    const h2 = canvas2.height;

    const x0_2 = 50, y0_2 = h2 - 40;
    const scale2 = 35;

    // Grid
    ctx2.strokeStyle = '#e8e8e8';
    ctx2.lineWidth = 0.8;
    for (let i = -1; i <= 11; i++) {
     ctx2.beginPath();
     ctx2.moveTo(x0_2 + i * scale2, 20);
     ctx2.lineTo(x0_2 + i * scale2, h2 - 20);
     ctx2.stroke();

     ctx2.beginPath();
     ctx2.moveTo(30, y0_2 - i * scale2);
     ctx2.lineTo(w2 - 20, y0_2 - i * scale2);
     ctx2.stroke();
    }

    // Axes
    ctx2.strokeStyle = '#000';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2, h2 - 20);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(30, y0_2);
    ctx2.lineTo(w2 - 20, y0_2);
    ctx2.stroke();

    // Arrow tips
    ctx2.fillStyle = '#000';
    ctx2.beginPath();
    ctx2.moveTo(w2 - 20, y0_2);
    ctx2.lineTo(w2 - 27, y0_2 - 4);
    ctx2.lineTo(w2 - 27, y0_2 + 4);
    ctx2.fill();

    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2 - 4, 27);
    ctx2.lineTo(x0_2 + 4, 27);
    ctx2.fill();

    // Axis labels
    ctx2.font = '14px Arial';
    ctx2.fillStyle = '#000';
    ctx2.textAlign = 'center';
    ctx2.fillText('x', w2 - 10, y0_2 + 20);
    ctx2.fillText('y', x0_2 - 20, 15);
    ctx2.fillText('O', x0_2 - 15, y0_2 + 15);

    // Circle with center (5, 5) and radius 3
    const ca2 = 5, cb2 = 5, r2 = 3;

    ctx2.strokeStyle = '#3498db';
    ctx2.lineWidth = 2.5;
    ctx2.beginPath();
    ctx2.arc(x0_2 + ca2 * scale2, y0_2 - cb2 * scale2, r2 * scale2, 0, 2*Math.PI);
    ctx2.stroke();

    // Center point
    ctx2.fillStyle = '#e74c3c';
    ctx2.beginPath();
    ctx2.arc(x0_2 + ca2 * scale2, y0_2 - cb2 * scale2, 4, 0, 2*Math.PI);
    ctx2.fill();

    // Tangent line: y = 5 - 3√2/2 ≈ 2.88
    const tangentY = 2.88;
    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 2.5;
    ctx2.beginPath();
    ctx2.moveTo(x0_2 + 1 * scale2, y0_2 - tangentY * scale2);
    ctx2.lineTo(x0_2 + 9 * scale2, y0_2 - tangentY * scale2);
    ctx2.stroke();

    // Tangent point
    const tanX = 5, tanY = tangentY;
    ctx2.fillStyle = '#9b59b6';
    ctx2.beginPath();
    ctx2.arc(x0_2 + tanX * scale2, y0_2 - tanY * scale2, 5, 0, 2*Math.PI);
    ctx2.fill();

    // Radius to tangent point (dashed)
    ctx2.strokeStyle = '#e74c3c';
    ctx2.lineWidth = 1.5;
    ctx2.setLineDash([5, 5]);
    ctx2.beginPath();
    ctx2.moveTo(x0_2 + ca2 * scale2, y0_2 - cb2 * scale2);
    ctx2.lineTo(x0_2 + tanX * scale2, y0_2 - tanY * scale2);
    ctx2.stroke();
    ctx2.setLineDash([]);

    // Labels
    ctx2.font = 'italic 14px Georgia';
    ctx2.fillStyle = '#3498db';
    ctx2.textAlign = 'left';
    ctx2.fillText('Circle', x0_2 + (ca2 + r2) * scale2 + 10, y0_2 - cb2 * scale2);

    ctx2.fillStyle = '#27ae60';
    ctx2.fillText('Tangent Line', x0_2 + 6.5 * scale2, y0_2 - tangentY * scale2 - 10);

    ctx2.fillStyle = '#9b59b6';
    ctx2.font = '13px Arial';
    ctx2.fillText('D = 0', x0_2 + 8.5 * scale2, y0_2 - 7 * scale2);

    // No Intersection
    const canvas3 = document.getElementById('noPointsCanvas');
    const ctx3 = canvas3.getContext('2d');
    const w3 = canvas3.width;
    const h3 = canvas3.height;

    const x0_3 = 50, y0_3 = h3 - 40;
    const scale3 = 35;

    // Grid
    ctx3.strokeStyle = '#e8e8e8';
    ctx3.lineWidth = 0.8;
    for (let i = -1; i <= 11; i++) {
     ctx3.beginPath();
     ctx3.moveTo(x0_3 + i * scale3, 20);
     ctx3.lineTo(x0_3 + i * scale3, h3 - 20);
     ctx3.stroke();

     ctx3.beginPath();
     ctx3.moveTo(30, y0_3 - i * scale3);
     ctx3.lineTo(w3 - 20, y0_3 - i * scale3);
     ctx3.stroke();
    }

    // Axes
    ctx3.strokeStyle = '#000';
    ctx3.lineWidth = 2;
    ctx3.beginPath();
    ctx3.moveTo(x0_3, 20);
    ctx3.lineTo(x0_3, h3 - 20);
    ctx3.stroke();

    ctx3.beginPath();
    ctx3.moveTo(30, y0_3);
    ctx3.lineTo(w3 - 20, y0_3);
    ctx3.stroke();

    // Arrow tips
    ctx3.fillStyle = '#000';
    ctx3.beginPath();
    ctx3.moveTo(w3 - 20, y0_3);
    ctx3.lineTo(w3 - 27, y0_3 - 4);
    ctx3.lineTo(w3 - 27, y0_3 + 4);
    ctx3.fill();

    ctx3.beginPath();
    ctx3.moveTo(x0_3, 20);
    ctx3.lineTo(x0_3 - 4, 27);
    ctx3.lineTo(x0_3 + 4, 27);
    ctx3.fill();

    // Axis labels
    ctx3.font = '14px Arial';
    ctx3.fillStyle = '#000';
    ctx3.textAlign = 'center';
    ctx3.fillText('x', w3 - 10, y0_3 + 20);
    ctx3.fillText('y', x0_3 - 20, 15);
    ctx3.fillText('O', x0_3 - 15, y0_3 + 15);

    // Circle with center (5, 5) and radius 3
    const ca3 = 5, cb3 = 5, r3 = 3;

    ctx3.strokeStyle = '#3498db';
    ctx3.lineWidth = 2.5;
    ctx3.beginPath();
    ctx3.arc(x0_3 + ca3 * scale3, y0_3 - cb3 * scale3, r3 * scale3, 0, 2*Math.PI);
    ctx3.stroke();

    // Center point
    ctx3.fillStyle = '#e74c3c';
    ctx3.beginPath();
    ctx3.arc(x0_3 + ca3 * scale3, y0_3 - cb3 * scale3, 4, 0, 2*Math.PI);
    ctx3.fill();

    // Line not intersecting: y = 1
    const noIntY = 1;
    ctx3.strokeStyle = '#27ae60';
    ctx3.lineWidth = 2.5;
    ctx3.beginPath();
    ctx3.moveTo(x0_3 + 1 * scale3, y0_3 - noIntY * scale3);
    ctx3.lineTo(x0_3 + 9 * scale3, y0_3 - noIntY * scale3);
    ctx3.stroke();

    // Labels
    ctx3.font = 'italic 14px Georgia';
    ctx3.fillStyle = '#3498db';
    ctx3.textAlign = 'left';
    ctx3.fillText('Circle', x0_3 + (ca3 + r3) * scale3 + 10, y0_3 - cb3 * scale3);

    ctx3.fillStyle = '#27ae60';
    ctx3.fillText('Line', x0_3 + 7 * scale3, y0_3 - noIntY * scale3 - 10);

    ctx3.fillStyle = '#9b59b6';
    ctx3.font = '13px Arial';
    ctx3.fillText('D < 0', x0_3 + 8.5 * scale3, y0_3 - 7 * scale3);

    // Initialize calculator
    calculateIntersection();
   });
  </script>
 </body>
</html>