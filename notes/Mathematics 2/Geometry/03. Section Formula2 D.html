<!DOCTYPE html>
<!-- tags: Geometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Section Formula in 2D
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graybox {
    background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
    color: #2c3e50;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 120px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .canvas-title {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .formula-display {
    text-align: center;
    margin: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    color: #e74c3c;
   }

   .division-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .division-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .division-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .division-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .division-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Geometry">
   Section Formula in 2D
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     The section formula in 2D finds coordinates of points that divide line segments in given ratios. It applies to both internal and external division in the coordinate plane.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>Internal Division:</strong> $$\left(\frac{mx_2 + nx_1}{m + n}, \frac{my_2 + ny_1}{m + n}\right)$$<br/>
       $$\text{Point divides segment in ratio } m:n$$
      </div>
      <div class="formula-item">
       <strong>External Division:</strong> $$\left(\frac{mx_2 - nx_1}{m - n}, \frac{my_2 - ny_1}{m - n}\right)$$<br/>
       $$\text{Point lies outside segment}$$
      </div>
      <div class="formula-item">
       <strong>Midpoint:</strong> $$\left(\frac{x_1 + x_2}{2}, \frac{y_1 + y_2}{2}\right)$$<br/>
       $$\text{Special case: } m = n = 1$$
      </div>
     </div>

     <div class="graybox">
      The section formula gives coordinates of a point P that divides the line segment joining A(x₁,y₁) and B(x₂,y₂) in the ratio m:n. Internal division when P lies between A and B, external division when P lies outside the segment.
     </div>
    </div>

    <div class="section">
     <div class="section-title">Visual Representations</div>
     <div class="division-grid">
      <div class="division-card">
       <h3>Internal Division</h3>
       <div class="canvas-container">
        <div class="canvas-title">Point P divides AB internally in ratio m:n</div>
        <canvas id="internalCanvas" width="400" height="350"></canvas>
       </div>
       <div class="formula">$$P\left(\frac{mx_2 + nx_1}{m + n}, \frac{my_2 + ny_1}{m + n}\right)$$</div>
       <div class="description">
        <strong>Key Points:</strong>
        <br/>• P lies between A and B
        <br/>• AP:PB = m:n
        <br/>• m and n are positive
        <br/>• Weighted average of coordinates
       </div>
      </div>

      <div class="division-card">
       <h3>External Division</h3>
       <div class="canvas-container">
        <div class="canvas-title">Point Q divides AB externally in ratio m:n</div>
        <canvas id="externalCanvas" width="400" height="350"></canvas>
       </div>
       <div class="formula">$$Q\left(\frac{mx_2 - nx_1}{m - n}, \frac{my_2 - ny_1}{m - n}\right)$$</div>
       <div class="description">
        <strong>Key Points:</strong>
        <br/>• Q lies outside AB
        <br/>• AQ:QB = m:n
        <br/>• m > n for external division
        <br/>• Negative coefficient for first point
       </div>
      </div>

      <div class="division-card">
       <h3>Midpoint</h3>
       <div class="canvas-container">
        <div class="canvas-title">Midpoint M of AB</div>
        <canvas id="midpointCanvas" width="400" height="350"></canvas>
       </div>
       <div class="formula">$$M\left(\frac{x_1 + x_2}{2}, \frac{y_1 + y_2}{2}\right)$$</div>
       <div class="description">
        <strong>Key Points:</strong>
        <br/>• Special case of internal division
        <br/>• m = n = 1
        <br/>• Equal distance from both endpoints
        <br/>• AM = MB
       </div>
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Section Formula Calculator</div>

     <div class="input-group">
      <div class="input-field">
       <label for="x1">Point A (x₁, y₁):</label>
       <input id="x1" placeholder="2" type="number" value="2"/>
       <input id="y1" placeholder="2" type="number" value="2"/>
      </div>
      <div class="input-field">
       <label for="x2">Point B (x₂, y₂):</label>
       <input id="x2" placeholder="8" type="number" value="8"/>
       <input id="y2" placeholder="7" type="number" value="7"/>
      </div>
      <div class="input-field">
       <label for="m">Ratio m:n</label>
       <input id="m" placeholder="2" type="number" value="2"/>
       <input id="n" placeholder="1" type="number" value="1"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="calculateInternal()">Internal Division</button>
      <button class="btn" onclick="calculateExternal()">External Division</button>
      <button class="btn" onclick="calculateMidpoint()">Midpoint</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="expressionDisplay">
       <strong>Points:</strong> A(2,2), B(8,7), Ratio 2:1
      </div>
      <div class="result-text" id="resultDisplay">
       <strong>Internal:</strong> ((2×8 + 1×2)/(2+1), (2×7 + 1×2)/(2+1)) = (18/3, 16/3) = (6, 5.333)
      </div>
      <div class="result-text" id="simplifiedDisplay">
       <strong>External:</strong> ((2×8 - 1×2)/(2-1), (2×7 - 1×2)/(2-1)) = (14/1, 12/1) = (14, 12)
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The section formula is derived using the concept of proportional division and coordinate geometry:</p>
     <ul>
      <li><strong>Internal Division:</strong> Based on the property that if a point divides a line segment internally in the ratio m:n, then the coordinates satisfy the weighted average formula</li>
      <li><strong>External Division:</strong> Uses the concept of directed line segments where the ratio can be negative</li>
      <li><strong>Coordinate Geometry:</strong> Fundamental tool for finding coordinates of points on lines and in geometric constructions</li>
      <li><strong>Centroid:</strong> Used to find centroid of triangles (intersection of medians)</li>
      <li><strong>Vector Geometry:</strong> Section formula extends naturally to vectors and higher dimensions</li>
      <li><strong>Applications:</strong> Used in physics for center of mass, in engineering for structural analysis</li>
     </ul>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{aligned}
      \text{Derivation:} \\
      \text{If AP:PB = m:n, then:} \\
      \frac{x - x_1}{x_2 - x} = \frac{m}{n} \\
      \text{Solving gives: } x = \frac{mx_2 + nx_1}{m + n}
      \end{aligned}
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Internal Division</h4>
       <p>Find coordinates dividing (2,2) and (8,7) in ratio 2:1 internally.</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: External Division</h4>
       <p>Find coordinates dividing (2,2) and (8,7) in ratio 2:1 externally.</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Midpoint</h4>
       <p>Find midpoint of (3,2) and (7,6).</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Find the coordinates of the point that divides the line segment joining A(1,3) and B(5,7) internally in the ratio 1:2.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Using internal division formula with m=1, n=2:</p>
        <p>x = (1×5 + 2×1)/(1+2) = (5 + 2)/3 = 7/3 ≈ 2.333</p>
        <p>y = (1×7 + 2×3)/(1+2) = (7 + 6)/3 = 13/3 ≈ 4.333</p>
        <p><strong>Result:</strong> (7/3, 13/3)</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Find the midpoint of the line segment joining points (4,1) and (6,9).</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Using midpoint formula:</p>
        <p>x = (4 + 6)/2 = 10/2 = 5</p>
        <p>y = (1 + 9)/2 = 10/2 = 5</p>
        <p><strong>Result:</strong> (5, 5)</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Find the coordinates of the point that divides the line segment joining A(2,4) and B(6,10) externally in the ratio 3:1.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Using external division formula with m=3, n=1:</p>
        <p>x = (3×6 - 1×2)/(3-1) = (18 - 2)/2 = 16/2 = 8</p>
        <p>y = (3×10 - 1×4)/(3-1) = (30 - 4)/2 = 26/2 = 13</p>
        <p><strong>Result:</strong> (8, 13)</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Section formula finds coordinates of points dividing line segments in given ratios in 2D plane</li>
      <li class="takeaway-item">Internal division: point lies between endpoints, uses (mx₂ + nx₁)/(m+n) for both coordinates</li>
      <li class="takeaway-item">External division: point lies outside segment, uses (mx₂ - nx₁)/(m-n) for both coordinates</li>
      <li class="takeaway-item">Midpoint is special case of internal division with m=n=1</li>
      <li class="takeaway-item">Formula applies independently to x and y coordinates</li>
      <li class="takeaway-item">Used to find centroids, incenters, and other geometric centers</li>
      <li class="takeaway-item">Essential for coordinate geometry and analytic geometry</li>
      <li class="takeaway-item">Ratio m:n determines position and direction along the line segment</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function calculateInternal() {
    try {
     const x1 = parseFloat(document.getElementById('x1').value);
     const y1 = parseFloat(document.getElementById('y1').value);
     const x2 = parseFloat(document.getElementById('x2').value);
     const y2 = parseFloat(document.getElementById('y2').value);
     const m = parseFloat(document.getElementById('m').value);
     const n = parseFloat(document.getElementById('n').value);

     if (isNaN(x1) || isNaN(y1) || isNaN(x2) || isNaN(y2) || isNaN(m) || isNaN(n)) {
      throw new Error('All values must be valid numbers');
     }
     if (m <= 0 || n <= 0) {
      throw new Error('Ratio values must be positive for internal division');
     }

     const px = (m * x2 + n * x1) / (m + n);
     const py = (m * y2 + n * y1) / (m + n);

     document.getElementById('expressionDisplay').innerHTML = `<strong>Points:</strong> A(${x1},${y1}), B(${x2},${y2}), Ratio ${m}:${n}`;
     document.getElementById('resultDisplay').innerHTML = `<strong>Internal Division:</strong> ((${m}×${x2} + ${n}×${x1})/(${m}+${n}), (${m}×${y2} + ${n}×${y1})/(${m}+${n})) = (${px.toFixed(2)}, ${py.toFixed(2)})`;
     document.getElementById('simplifiedDisplay').innerHTML = `<strong>Coordinates:</strong> P(${px.toFixed(2)}, ${py.toFixed(2)})`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function calculateExternal() {
    try {
     const x1 = parseFloat(document.getElementById('x1').value);
     const y1 = parseFloat(document.getElementById('y1').value);
     const x2 = parseFloat(document.getElementById('x2').value);
     const y2 = parseFloat(document.getElementById('y2').value);
     const m = parseFloat(document.getElementById('m').value);
     const n = parseFloat(document.getElementById('n').value);

     if (isNaN(x1) || isNaN(y1) || isNaN(x2) || isNaN(y2) || isNaN(m) || isNaN(n)) {
      throw new Error('All values must be valid numbers');
     }
     if (m <= n) {
      throw new Error('For external division, m must be greater than n');
     }

     const qx = (m * x2 - n * x1) / (m - n);
     const qy = (m * y2 - n * y1) / (m - n);

     document.getElementById('expressionDisplay').innerHTML = `<strong>Points:</strong> A(${x1},${y1}), B(${x2},${y2}), Ratio ${m}:${n}`;
     document.getElementById('resultDisplay').innerHTML = `<strong>External Division:</strong> ((${m}×${x2} - ${n}×${x1})/(${m}-${n}), (${m}×${y2} - ${n}×${y1})/(${m}-${n})) = (${qx.toFixed(2)}, ${qy.toFixed(2)})`;
     document.getElementById('simplifiedDisplay').innerHTML = `<strong>Coordinates:</strong> Q(${qx.toFixed(2)}, ${qy.toFixed(2)})`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function calculateMidpoint() {
    try {
     const x1 = parseFloat(document.getElementById('x1').value);
     const y1 = parseFloat(document.getElementById('y1').value);
     const x2 = parseFloat(document.getElementById('x2').value);
     const y2 = parseFloat(document.getElementById('y2').value);

     if (isNaN(x1) || isNaN(y1) || isNaN(x2) || isNaN(y2)) {
      throw new Error('All coordinate values must be valid numbers');
     }

     const mx = (x1 + x2) / 2;
     const my = (y1 + y2) / 2;

     document.getElementById('expressionDisplay').innerHTML = `<strong>Points:</strong> A(${x1},${y1}), B(${x2},${y2})`;
     document.getElementById('resultDisplay').innerHTML = `<strong>Midpoint:</strong> ((${x1} + ${x2})/2, (${y1} + ${y2})/2) = (${mx}, ${my})`;
     document.getElementById('simplifiedDisplay').innerHTML = `<strong>Coordinates:</strong> M(${mx}, ${my})`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function resetDemo() {
    document.getElementById('x1').value = '2';
    document.getElementById('y1').value = '2';
    document.getElementById('x2').value = '8';
    document.getElementById('y2').value = '7';
    document.getElementById('m').value = '2';
    document.getElementById('n').value = '1';
    calculateInternal();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Internal Division</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find point dividing (2,2) and (8,7) in ratio 2:1 internally</div>
        <div class="calculation-step">Using formula: x = (2×8 + 1×2)/(2+1) = (16 + 2)/3 = 18/3 = 6</div>
        <div class="calculation-step">y = (2×7 + 1×2)/(2+1) = (14 + 2)/3 = 16/3 ≈ 5.333</div>
        <div class="calculation-step">Point lies between A and B on the line segment</div>
        <div class="calculation-step">AP:PB = 2:1, so point is closer to B</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - External Division</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find point dividing (2,2) and (8,7) in ratio 2:1 externally</div>
        <div class="calculation-step">Using formula: x = (2×8 - 1×2)/(2-1) = (16 - 2)/1 = 14/1 = 14</div>
        <div class="calculation-step">y = (2×7 - 1×2)/(2-1) = (14 - 2)/1 = 12/1 = 12</div>
        <div class="calculation-step">Point (14,12) lies outside the segment AB</div>
        <div class="calculation-step">AQ:QB = 2:1, extended beyond B</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Midpoint</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Find midpoint of (3,2) and (7,6)</div>
        <div class="calculation-step">x = (3 + 7)/2 = 10/2 = 5</div>
        <div class="calculation-step">y = (2 + 6)/2 = 8/2 = 4</div>
        <div class="calculation-step">Midpoint M(5,4) is equidistant from both points</div>
        <div class="calculation-step">AM = MB = distance from A to B divided by 2</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   // Initialize canvas visualizations
   window.addEventListener('load', function() {
    // Internal Division
    const canvas1 = document.getElementById('internalCanvas');
    const ctx1 = canvas1.getContext('2d');
    const w1 = canvas1.width;
    const h1 = canvas1.height;

    const x0_1 = 50, y0_1 = h1 - 40;
    const scale1 = 35;

    // Grid
    ctx1.strokeStyle = '#e8e8e8';
    ctx1.lineWidth = 0.8;
    for (let i = -1; i <= 10; i++) {
     ctx1.beginPath();
     ctx1.moveTo(x0_1 + i * scale1, 20);
     ctx1.lineTo(x0_1 + i * scale1, h1 - 20);
     ctx1.stroke();

     ctx1.beginPath();
     ctx1.moveTo(30, y0_1 - i * scale1);
     ctx1.lineTo(w1 - 20, y0_1 - i * scale1);
     ctx1.stroke();
    }

    // Axes
    ctx1.strokeStyle = '#000';
    ctx1.lineWidth = 2;
    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1, h1 - 20);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(30, y0_1);
    ctx1.lineTo(w1 - 20, y0_1);
    ctx1.stroke();

    // Arrow tips
    ctx1.fillStyle = '#000';
    ctx1.beginPath();
    ctx1.moveTo(w1 - 20, y0_1);
    ctx1.lineTo(w1 - 27, y0_1 - 4);
    ctx1.lineTo(w1 - 27, y0_1 + 4);
    ctx1.fill();

    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1 - 4, 27);
    ctx1.lineTo(x0_1 + 4, 27);
    ctx1.fill();

    // Axis labels
    ctx1.font = '14px Arial';
    ctx1.fillStyle = '#000';
    ctx1.textAlign = 'center';
    ctx1.fillText('x', w1 - 10, y0_1 + 20);
    ctx1.fillText('y', x0_1 - 20, 15);
    ctx1.fillText('O', x0_1 - 15, y0_1 + 15);

    // Points A, P, B
    const ax1 = 2, ay1 = 2;
    const bx1 = 8, by1 = 7;
    // P divides AB in ratio AP:PB = m:n = 2:1
    // So P = (n*A + m*B)/(m+n) = (1*A + 2*B)/3
    const px1 = (1*ax1 + 2*bx1)/3;
    const py1 = (1*ay1 + 2*by1)/3;

    const pax1 = x0_1 + ax1 * scale1;
    const pay1 = y0_1 - ay1 * scale1;
    const ppx1 = x0_1 + px1 * scale1;
    const ppy1 = y0_1 - py1 * scale1;
    const pbx1 = x0_1 + bx1 * scale1;
    const pby1 = y0_1 - by1 * scale1;

    // Line AB
    ctx1.strokeStyle = '#95a5a6';
    ctx1.lineWidth = 2;
    ctx1.beginPath();
    ctx1.moveTo(pax1, pay1);
    ctx1.lineTo(pbx1, pby1);
    ctx1.stroke();

    // Points
    ctx1.fillStyle = '#e74c3c';
    ctx1.beginPath();
    ctx1.arc(pax1, pay1, 5, 0, 2*Math.PI);
    ctx1.fill();

    ctx1.fillStyle = '#3498db';
    ctx1.beginPath();
    ctx1.arc(ppx1, ppy1, 5, 0, 2*Math.PI);
    ctx1.fill();

    ctx1.fillStyle = '#e74c3c';
    ctx1.beginPath();
    ctx1.arc(pbx1, pby1, 5, 0, 2*Math.PI);
    ctx1.fill();

    // Labels
    ctx1.font = 'italic 15px Georgia';
    ctx1.fillStyle = '#000';
    ctx1.textAlign = 'left';
    ctx1.fillText('A(x₁, y₁)', pax1 - 50, pay1 + 20);
    ctx1.fillText('P', ppx1 - 10, ppy1 - 15);
    ctx1.fillText('B(x₂, y₂)', pbx1 + 10, pby1 - 10);

    // Ratio labels with brackets
    ctx1.font = '13px Arial';
    ctx1.fillStyle = '#27ae60';
    const midAP1 = {x: (pax1 + ppx1)/2, y: (pay1 + ppy1)/2};
    const midPB1 = {x: (ppx1 + pbx1)/2, y: (ppy1 + pby1)/2};
    ctx1.fillText('m', midAP1.x + 10, midAP1.y);
    ctx1.fillText('n', midPB1.x + 10, midPB1.y);

    // Draw brackets for segments
    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 1.5;

    // Bracket for AP (perpendicular to line)
    const apAngle = Math.atan2(ppy1 - pay1, ppx1 - pax1);
    const perpAngle = apAngle + Math.PI/2;
    const bracketLen = 8;
    const bracketOffset = 20;

    const apMidX = (pax1 + ppx1)/2 + Math.cos(perpAngle) * bracketOffset;
    const apMidY = (pay1 + ppy1)/2 + Math.sin(perpAngle) * bracketOffset;

    ctx1.beginPath();
    ctx1.moveTo(pax1 + Math.cos(perpAngle) * bracketOffset, pay1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(pax1 + Math.cos(perpAngle) * (bracketOffset - bracketLen), pay1 + Math.sin(perpAngle) * (bracketOffset - bracketLen));
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(pax1 + Math.cos(perpAngle) * bracketOffset, pay1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(ppx1 + Math.cos(perpAngle) * bracketOffset, ppy1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(ppx1 + Math.cos(perpAngle) * bracketOffset, ppy1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(ppx1 + Math.cos(perpAngle) * (bracketOffset - bracketLen), ppy1 + Math.sin(perpAngle) * (bracketOffset - bracketLen));
    ctx1.stroke();

    // Bracket for PB
    const pbMidX = (ppx1 + pbx1)/2 + Math.cos(perpAngle) * bracketOffset;
    const pbMidY = (ppy1 + pby1)/2 + Math.sin(perpAngle) * bracketOffset;

    ctx1.beginPath();
    ctx1.moveTo(ppx1 + Math.cos(perpAngle) * bracketOffset, ppy1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(ppx1 + Math.cos(perpAngle) * (bracketOffset - bracketLen), ppy1 + Math.sin(perpAngle) * (bracketOffset - bracketLen));
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(ppx1 + Math.cos(perpAngle) * bracketOffset, ppy1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(pbx1 + Math.cos(perpAngle) * bracketOffset, pby1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(pbx1 + Math.cos(perpAngle) * bracketOffset, pby1 + Math.sin(perpAngle) * bracketOffset);
    ctx1.lineTo(pbx1 + Math.cos(perpAngle) * (bracketOffset - bracketLen), pby1 + Math.sin(perpAngle) * (bracketOffset - bracketLen));
    ctx1.stroke();

    // External Division
    const canvas2 = document.getElementById('externalCanvas');
    const ctx2 = canvas2.getContext('2d');
    const w2 = canvas2.width;
    const h2 = canvas2.height;

    const x0_2 = 50, y0_2 = h2 - 40;
    const scale2 = 35;

    // Grid
    ctx2.strokeStyle = '#e8e8e8';
    ctx2.lineWidth = 0.8;
    for (let i = -1; i <= 10; i++) {
     ctx2.beginPath();
     ctx2.moveTo(x0_2 + i * scale2, 20);
     ctx2.lineTo(x0_2 + i * scale2, h2 - 20);
     ctx2.stroke();

     ctx2.beginPath();
     ctx2.moveTo(30, y0_2 - i * scale2);
     ctx2.lineTo(w2 - 20, y0_2 - i * scale2);
     ctx2.stroke();
    }

    // Axes
    ctx2.strokeStyle = '#000';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2, h2 - 20);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(30, y0_2);
    ctx2.lineTo(w2 - 20, y0_2);
    ctx2.stroke();

    // Arrow tips
    ctx2.fillStyle = '#000';
    ctx2.beginPath();
    ctx2.moveTo(w2 - 20, y0_2);
    ctx2.lineTo(w2 - 27, y0_2 - 4);
    ctx2.lineTo(w2 - 27, y0_2 + 4);
    ctx2.fill();

    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2 - 4, 27);
    ctx2.lineTo(x0_2 + 4, 27);
    ctx2.fill();

    // Axis labels
    ctx2.font = '14px Arial';
    ctx2.fillStyle = '#000';
    ctx2.textAlign = 'center';
    ctx2.fillText('x', w2 - 10, y0_2 + 20);
    ctx2.fillText('y', x0_2 - 20, 15);
    ctx2.fillText('O', x0_2 - 15, y0_2 + 15);

    // Points A, B, Q (Q is outside beyond B)
    const ax2 = 2, ay2 = 2;
    const bx2 = 5, by2 = 5;
    // Q divides AB externally in ratio AQ:BQ = m:n = 3:1
    // So Q = (-n*A + m*B)/(m-n) = (-1*A + 3*B)/(3-1)
    const qx2 = (-1*ax2 + 3*bx2)/(3-1);
    const qy2 = (-1*ay2 + 3*by2)/(3-1);

    const pqx2 = x0_2 + qx2 * scale2;
    const pqy2 = y0_2 - qy2 * scale2;
    const pax2 = x0_2 + ax2 * scale2;
    const pay2 = y0_2 - ay2 * scale2;
    const pbx2 = x0_2 + bx2 * scale2;
    const pby2 = y0_2 - by2 * scale2;

    // Extended line
    ctx2.strokeStyle = '#95a5a6';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(pax2, pay2);
    ctx2.lineTo(pqx2, pqy2);
    ctx2.stroke();

    // Line AB
    ctx2.strokeStyle = '#bdc3c7';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(pax2, pay2);
    ctx2.lineTo(pbx2, pby2);
    ctx2.stroke();

    // Points
    ctx2.fillStyle = '#e74c3c';
    ctx2.beginPath();
    ctx2.arc(pax2, pay2, 5, 0, 2*Math.PI);
    ctx2.fill();

    ctx2.fillStyle = '#e74c3c';
    ctx2.beginPath();
    ctx2.arc(pbx2, pby2, 5, 0, 2*Math.PI);
    ctx2.fill();

    ctx2.fillStyle = '#9b59b6';
    ctx2.beginPath();
    ctx2.arc(pqx2, pqy2, 5, 0, 2*Math.PI);
    ctx2.fill();

    // Labels
    ctx2.font = 'italic 15px Georgia';
    ctx2.fillStyle = '#000';
    ctx2.textAlign = 'left';
    ctx2.fillText('A(x₁, y₁)', pax2 - 50, pay2 + 20);
    ctx2.fillText('B(x₂, y₂)', pbx2 - 25, pby2 - 15);
    ctx2.fillText('Q', pqx2 + 10, pqy2 - 10);

    // Ratio labels for AQ and BQ with brackets
    ctx2.font = '13px Arial';
    ctx2.fillStyle = '#27ae60';
    const midAQ2 = {x: (pax2 + pqx2)/2, y: (pay2 + pqy2)/2};
    const midBQ2 = {x: (pbx2 + pqx2)/2, y: (pby2 + pqy2)/2};
    ctx2.fillText('m', midAQ2.x + 15, midAQ2.y - 5);
    ctx2.fillStyle = 'red';
    ctx2.fillText('n', midBQ2.x + 30, midBQ2.y + 45);

    // Draw brackets for segments
    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 1.5;

    const aqAngle = Math.atan2(pqy2 - pay2, pqx2 - pax2);
    const perpAngle2 = aqAngle + Math.PI/2;
    const bracketLen2 = 8;
    const bracketOffset2 = 20;

    // Bracket for AQ
    ctx2.beginPath();
    ctx2.moveTo(pax2 + Math.cos(perpAngle2) * bracketOffset2, pay2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.lineTo(pax2 + Math.cos(perpAngle2) * (bracketOffset2 - bracketLen2), pay2 + Math.sin(perpAngle2) * (bracketOffset2 - bracketLen2));
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(pax2 + Math.cos(perpAngle2) * bracketOffset2, pay2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.lineTo(pqx2 + Math.cos(perpAngle2) * bracketOffset2, pqy2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(pqx2 + Math.cos(perpAngle2) * bracketOffset2, pqy2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.lineTo(pqx2 + Math.cos(perpAngle2) * (bracketOffset2 - bracketLen2), pqy2 + Math.sin(perpAngle2) * (bracketOffset2 - bracketLen2));
    ctx2.stroke();

    // Bracket for BQ
    ctx2.strokeStyle="red";
    ctx2.beginPath();
    ctx2.moveTo(pbx2 + Math.cos(perpAngle2) * (bracketOffset2 - bracketLen2), pby2 + Math.sin(perpAngle2) * (bracketOffset2 - bracketLen2));
    ctx2.lineTo((pbx2 + Math.cos(perpAngle2) * bracketOffset2) + 10, (pby2 + Math.sin(perpAngle2) * bracketOffset2) + 10);
    ctx2.lineTo((pqx2 + Math.cos(perpAngle2) * bracketOffset2) + 10, (pqy2 + Math.sin(perpAngle2) * bracketOffset2) + 10);
    ctx2.lineTo(pqx2 + Math.cos(perpAngle2) * bracketOffset2, pqy2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(pqx2 + Math.cos(perpAngle2) * bracketOffset2, pqy2 + Math.sin(perpAngle2) * bracketOffset2);
    ctx2.lineTo(pqx2 + Math.cos(perpAngle2) * (bracketOffset2 - bracketLen2), pqy2 + Math.sin(perpAngle2) * (bracketOffset2 - bracketLen2));
    ctx2.stroke();

    // Midpoint
    const canvas3 = document.getElementById('midpointCanvas');
    const ctx3 = canvas3.getContext('2d');
    const w3 = canvas3.width;
    const h3 = canvas3.height;

    const x0_3 = 50, y0_3 = h3 - 40;
    const scale3 = 35;

    // Grid
    ctx3.strokeStyle = '#e8e8e8';
    ctx3.lineWidth = 0.8;
    for (let i = -1; i <= 10; i++) {
     ctx3.beginPath();
     ctx3.moveTo(x0_3 + i * scale3, 20);
     ctx3.lineTo(x0_3 + i * scale3, h3 - 20);
     ctx3.stroke();

     ctx3.beginPath();
     ctx3.moveTo(30, y0_3 - i * scale3);
     ctx3.lineTo(w3 - 20, y0_3 - i * scale3);
     ctx3.stroke();
    }

    // Axes
    ctx3.strokeStyle = '#000';
    ctx3.lineWidth = 2;
    ctx3.beginPath();
    ctx3.moveTo(x0_3, 20);
    ctx3.lineTo(x0_3, h3 - 20);
    ctx3.stroke();

    ctx3.beginPath();
    ctx3.moveTo(30, y0_3);
    ctx3.lineTo(w3 - 20, y0_3);
    ctx3.stroke();

    // Arrow tips
    ctx3.fillStyle = '#000';
    ctx3.beginPath();
    ctx3.moveTo(w3 - 20, y0_3);
    ctx3.lineTo(w3 - 27, y0_3 - 4);
    ctx3.lineTo(w3 - 27, y0_3 + 4);
    ctx3.fill();

    ctx3.beginPath();
    ctx3.moveTo(x0_3, 20);
    ctx3.lineTo(x0_3 - 4, 27);
    ctx3.lineTo(x0_3 + 4, 27);
    ctx3.fill();

    // Axis labels
    ctx3.font = '14px Arial';
    ctx3.fillStyle = '#000';
    ctx3.textAlign = 'center';
    ctx3.fillText('x', w3 - 10, y0_3 + 20);
    ctx3.fillText('y', x0_3 - 20, 15);
    ctx3.fillText('O', x0_3 - 15, y0_3 + 15);

    // Points A, M, B
    const ax3 = 3, ay3 = 2;
    const bx3 = 7, by3 = 6;
    const mx3 = (ax3 + bx3)/2;
    const my3 = (ay3 + by3)/2;

    const pax3 = x0_3 + ax3 * scale3;
    const pay3 = y0_3 - ay3 * scale3;
    const pmx3 = x0_3 + mx3 * scale3;
    const pmy3 = y0_3 - my3 * scale3;
    const pbx3 = x0_3 + bx3 * scale3;
    const pby3 = y0_3 - by3 * scale3;

    // Line AB
    ctx3.strokeStyle = '#95a5a6';
    ctx3.lineWidth = 2;
    ctx3.beginPath();
    ctx3.moveTo(pax3, pay3);
    ctx3.lineTo(pbx3, pby3);
    ctx3.stroke();

    // Points
    ctx3.fillStyle = '#e74c3c';
    ctx3.beginPath();
    ctx3.arc(pax3, pay3, 5, 0, 2*Math.PI);
    ctx3.fill();

    ctx3.fillStyle = '#f39c12';
    ctx3.beginPath();
    ctx3.arc(pmx3, pmy3, 5, 0, 2*Math.PI);
    ctx3.fill();

    ctx3.fillStyle = '#e74c3c';
    ctx3.beginPath();
    ctx3.arc(pbx3, pby3, 5, 0, 2*Math.PI);
    ctx3.fill();

    // Labels
    ctx3.font = 'italic 15px Georgia';
    ctx3.fillStyle = '#000';
    ctx3.textAlign = 'left';
    ctx3.fillText('A(x₁, y₁)', pax3 - 50, pay3 + 20);
    ctx3.fillText('M', pmx3 - 10, pmy3 - 15);
    ctx3.fillText('B(x₂, y₂)', pbx3 + 10, pby3 - 10);

    // Equal segments labels
    ctx3.font = '13px Arial';
    ctx3.fillStyle = '#27ae60';
    const midAM3 = {x: (pax3 + pmx3)/2, y: (pay3 + pmy3)/2};
    const midMB3 = {x: (pmx3 + pbx3)/2, y: (pmy3 + pby3)/2};
    ctx3.fillText('1', midAM3.x + 10, midAM3.y);
    ctx3.fillText('1', midMB3.x + 10, midMB3.y);

    // Initialize calculator
    calculateInternal();
   });
  </script>
 </body>
</html>