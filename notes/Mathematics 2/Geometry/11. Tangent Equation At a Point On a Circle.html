<!DOCTYPE html>
<!-- tags: Geometry -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Tangent Equation at a Point on a Circle
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .graybox {
    background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
    color: #2c3e50;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 120px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .canvas-title {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 15px;
    color: #2c3e50;
   }

   .formula-display {
    text-align: center;
    margin: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    color: #e74c3c;
   }

   .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .case-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .case-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .case-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .case-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Geometry">
   Tangent Equation at a Point on a Circle
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     A tangent line to a circle touches the circle at exactly one point and is perpendicular to the radius at that point. For a circle centered at the origin, the tangent equation can be found by replacing variables in the circle equation.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>Tangent Formula:</strong> $px + qy = r^2$<br/>
       <strong>Point on circle:</strong> P(p, q)<br/>
       <strong>Circle equation:</strong> $x^2 + y^2 = r^2$
      </div>
      <div class="formula-item">
       <strong>General Circle:</strong> $(x - h)^2 + (y - k)^2 = r^2$<br/>
       <strong>Tangent:</strong> $(x - h)(p - h) + (y - k)(q - k) = r^2$<br/>
       <strong>Perpendicular condition</strong>
      </div>
      <div class="formula-item">
       <strong>Slope of radius:</strong> $m_r = \frac{q - k}{p - h}$<br/>
       <strong>Slope of tangent:</strong> $m_t = -\frac{1}{m_r}$<br/>
       <strong>Right angle property</strong>
      </div>
     </div>

     <div class="graybox">
      The tangent line is perpendicular to the radius at the point of tangency. For origin-centered circles, simply replace one x with p and one y with q in the circle equation.
     </div>
    </div>

    <div class="section">
     <div class="section-title">Tangent Line Properties</div>
     <div class="cases-grid">
      <div class="case-card">
       <h3>Origin-Centered Circle</h3>
       <div class="canvas-container">
        <div class="canvas-title">Tangent at point P(p,q)</div>
        <canvas id="tangentCanvas" width="350" height="350"></canvas>
       </div>
       <div class="formula">$$px + qy = r^2$$</div>
       <div class="description">
        <strong>Circle:</strong> x² + y² = r²<br/>
        <strong>Point:</strong> P(p, q) where p² + q² = r²<br/>
        <strong>Tangent:</strong> Replace x→p, y→q in circle equation<br/>
        <strong>Perpendicular:</strong> Radius ⊥ tangent at P
       </div>
      </div>

      <div class="case-card">
       <h3>General Circle</h3>
       <div class="canvas-container">
        <div class="canvas-title">Tangent at point P(p,q) on general circle</div>
        <canvas id="generalTangentCanvas" width="350" height="350"></canvas>
       </div>
       <div class="formula">$$(x - h)(p - h) + (y - k)(q - k) = r^2$$</div>
       <div class="description">
        <strong>Circle:</strong> (x-h)² + (y-k)² = r²<br/>
        <strong>Point:</strong> P(p, q) on circle<br/>
        <strong>Tangent:</strong> Expand and simplify<br/>
        <strong>Same property:</strong> Radius ⊥ tangent
       </div>
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Tangent Line Calculator</div>

     <div class="input-group">
      <div class="input-field">
       <label for="circleCenterX">Circle Center (h, k):</label>
       <input id="circleCenterX" placeholder="0" type="number" value="0"/>
       <input id="circleCenterY" placeholder="0" type="number" value="0"/>
      </div>
      <div class="input-field">
       <label for="circleRadius">Radius (r):</label>
       <input id="circleRadius" placeholder="5" type="number" value="5" min="0.1" step="0.1"/>
      </div>
      <div class="input-field">
       <label for="pointX">Point P(p, q):</label>
       <input id="pointX" placeholder="3" type="number" value="3"/>
       <input id="pointY" placeholder="4" type="number" value="4"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="calculateTangent()">Calculate Tangent</button>
      <button class="btn" onclick="verifyPoint()">Verify Point on Circle</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="circleDisplay">
       <strong>Circle:</strong> (x - 0)² + (y - 0)² = 25
      </div>
      <div class="result-text" id="pointDisplay">
       <strong>Point P:</strong> (3, 4)
      </div>
      <div class="result-text" id="verificationDisplay">
       <strong>On circle:</strong> 3² + 4² = 9 + 16 = 25 ✓
      </div>
      <div class="result-text" id="tangentDisplay">
       <strong>Tangent:</strong> 3x + 4y = 25
      </div>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The tangent line to a circle has several important properties:</p>
     <ul>
      <li><strong>Perpendicularity:</strong> The radius is perpendicular to the tangent at the point of tangency</li>
      <li><strong>Single point:</strong> A tangent touches the circle at exactly one point</li>
      <li><strong>Origin formula:</strong> For x² + y² = r², tangent at (p,q) is px + qy = r²</li>
      <li><strong>General formula:</strong> For (x-h)² + (y-k)² = r², tangent at (p,q) is (x-h)(p-h) + (y-k)(q-k) = r²</li>
      <li><strong>Slope method:</strong> Slope of radius × slope of tangent = -1</li>
      <li><strong>Derivative method:</strong> Implicit differentiation gives tangent slope</li>
      <li><strong>Geometric construction:</strong> Tangent from external point uses similar triangles</li>
      <li><strong>Length property:</strong> Tangent segments from external point are equal</li>
     </ul>
     <div class="formula-block" style="margin: 20px 0;">
      \begin{aligned}
      \text{Derivation for origin-centered circle:} \\
      \text{Circle equation: } x^2 + y^2 = r^2 \\
      \text{Differentiate implicitly: } 2x + 2y\frac{dy}{dx} = 0 \\
      \text{At point (p,q): } 2p + 2q\frac{dy}{dx} = 0 \\
      \frac{dy}{dx} = -\frac{p}{q} \\
      \\
      \text{Tangent equation: } y - q = m(x - p) \\
      y - q = -\frac{p}{q}(x - p) \\
      qy - q^2 = -px + pq \\
      px + qy = pq + q^2 = r^2
      \end{aligned}
     </div>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Origin Circle Tangent</h4>
       <p>Find tangent to x² + y² = 25 at point (3, 4).</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: General Circle Tangent</h4>
       <p>Find tangent to (x-1)² + (y-2)² = 9 at (2, 4).</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Slope Method</h4>
       <p>Find tangent to x² + y² = 16 at (0, 4).</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Find the equation of the tangent line to the circle x² + y² = 25 at the point (3, 4).</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>Circle: x² + y² = 25</p>
        <p>Point: (3, 4)</p>
        <p>Verify: 3² + 4² = 9 + 16 = 25 ✓</p>
        <p>Tangent: px + qy = r²</p>
        <p>3x + 4y = 25</p>
        <p><strong>Result:</strong> 3x + 4y = 25</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Find the equation of the tangent line to (x-2)² + (y-1)² = 13 at (5, 1).</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>Circle: (x-2)² + (y-1)² = 13</p>
        <p>Point: (5, 1)</p>
        <p>Tangent: (x-2)(5-2) + (y-1)(1-1) = 13</p>
        <p>(x-2)(3) + (y-1)(0) = 13</p>
        <p>3(x-2) = 13</p>
        <p>3x - 6 = 13</p>
        <p>3x = 19</p>
        <p>x = 19/3</p>
        <p><strong>Result:</strong> x = 19/3</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Find the slope of the tangent line to x² + y² = 36 at (-6, 0).</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>Circle: x² + y² = 36</p>
        <p>Point: (-6, 0)</p>
        <p>Differentiate: 2x + 2y y' = 0</p>
        <p>At (-6, 0): 2(-6) + 2(0)y' = 0</p>
        <p>-12 = 0</p>
        <p>Horizontal tangent</p>
        <p><strong>Result:</strong> Slope = 0 (horizontal)</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Tangent line touches circle at exactly one point and is perpendicular to radius at that point</li>
      <li class="takeaway-item">For origin-centered circle x² + y² = r², tangent at (p,q) is px + qy = r²</li>
      <li class="takeaway-item">For general circle (x-h)² + (y-k)² = r², tangent at (p,q) is (x-h)(p-h) + (y-k)(q-k) = r²</li>
      <li class="takeaway-item">Point must lie on circle: p² + q² = r² for origin-centered, (p-h)² + (q-k)² = r² for general</li>
      <li class="takeaway-item">Slope of tangent equals negative reciprocal of radius slope</li>
      <li class="takeaway-item">Tangent equation can be found by implicit differentiation</li>
      <li class="takeaway-item">Length of tangent from external point equals √(power of point)</li>
      <li class="takeaway-item">Two tangents from external point are equal in length</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function calculateTangent() {
    try {
     const h = parseFloat(document.getElementById('circleCenterX').value);
     const k = parseFloat(document.getElementById('circleCenterY').value);
     const r = parseFloat(document.getElementById('circleRadius').value);
     const p = parseFloat(document.getElementById('pointX').value);
     const q = parseFloat(document.getElementById('pointY').value);

     if (isNaN(h) || isNaN(k) || isNaN(r) || isNaN(p) || isNaN(q) || r <= 0) {
      throw new Error('All values must be valid numbers and radius must be positive');
     }

     // Check if point is on circle
     const distance = Math.sqrt((p - h)*(p - h) + (q - k)*(q - k));
     if (Math.abs(distance - r) > 1e-10) {
      throw new Error('Point must lie on the circle');
     }

     document.getElementById('circleDisplay').innerHTML = `<strong>Circle:</strong> (x - ${h})² + (y - ${k})² = ${r*r}`;
     document.getElementById('pointDisplay').innerHTML = `<strong>Point P:</strong> (${p}, ${q})`;

     // Calculate tangent equation
     let tangentEq = '';
     if (h === 0 && k === 0) {
      // Origin-centered
      tangentEq = `${p}x + ${q}y = ${r*r}`;
     } else {
      // General case
      const A = p - h;
      const B = q - k;
      tangentEq = `${A}(x - ${h}) + ${B}(y - ${k}) = ${r*r}`;
     }

     document.getElementById('tangentDisplay').innerHTML = `<strong>Tangent:</strong> ${tangentEq}`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function verifyPoint() {
    try {
     const h = parseFloat(document.getElementById('circleCenterX').value);
     const k = parseFloat(document.getElementById('circleCenterY').value);
     const r = parseFloat(document.getElementById('circleRadius').value);
     const p = parseFloat(document.getElementById('pointX').value);
     const q = parseFloat(document.getElementById('pointY').value);

     if (isNaN(h) || isNaN(k) || isNaN(r) || isNaN(p) || isNaN(q) || r <= 0) {
      throw new Error('All values must be valid numbers and radius must be positive');
     }

     const distance = Math.sqrt((p - h)*(p - h) + (q - k)*(q - k));
     const onCircle = Math.abs(distance - r) < 1e-10;

     document.getElementById('verificationDisplay').innerHTML = `<strong>On circle:</strong> (${p} - ${h})² + (${q} - ${k})² = ${(p-h)*(p-h) + (q-k)*(q-k)} ${onCircle ? '✓' : '✗'}`;

     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = error.message;
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function resetDemo() {
    document.getElementById('circleCenterX').value = '0';
    document.getElementById('circleCenterY').value = '0';
    document.getElementById('circleRadius').value = '5';
    document.getElementById('pointX').value = '3';
    document.getElementById('pointY').value = '4';
    calculateTangent();
    document.getElementById('errorMessage').style.display = 'none';
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Origin Circle Tangent</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: x² + y² = 25</div>
        <div class="calculation-step">Point: (3, 4)</div>
        <div class="calculation-step">Verify: 3² + 4² = 9 + 16 = 25 ✓</div>
        <div class="calculation-step">Tangent formula: px + qy = r²</div>
        <div class="calculation-step">Substitute: 3x + 4y = 25</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - General Circle Tangent</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: (x-1)² + (y-2)² = 9</div>
        <div class="calculation-step">Point: (2, 4)</div>
        <div class="calculation-step">Verify: (2-1)² + (4-2)² = 1 + 4 = 5 ≠ 9 ✗ Wait, point not on circle!</div>
        <div class="calculation-step">Correct point: (2-1)² + (y-2)² = 9 ⇒ 1 + (y-2)² = 9 ⇒ (y-2)² = 8</div>
        <div class="calculation-step">y - 2 = ±√8 = ±2√2 ⇒ y = 2 ± 2√2</div>
        <div class="calculation-step">Using (2, 2+2√2): (x-1)(2-1) + (y-2)(2+2√2-2) = 9</div>
        <div class="calculation-step">(x-1)(1) + (y-2)(2√2) = 9</div>
        <div class="calculation-step">x - 1 + 2√2(y - 2) = 9</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Slope Method</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Circle: x² + y² = 36</div>
        <div class="calculation-step">Point: (0, 4)</div>
        <div class="calculation-step">Verify: 0² + 4² = 16 ≠ 36 ✗ Wait, point not on circle!</div>
        <div class="calculation-step">Correct point: x² + 36 = 36 ⇒ x² = 0 ⇒ x = 0</div>
        <div class="calculation-step">Point (0, 6) or (0, -6)</div>
        <div class="calculation-step">Using (0, 6): slope of radius = (6-0)/(0-0) undefined</div>
        <div class="calculation-step">Vertical radius, so horizontal tangent</div>
        <div class="calculation-step">Tangent: y = 6</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   // Initialize canvas visualizations
   window.addEventListener('load', function() {
    // Origin-centered tangent
    const canvas1 = document.getElementById('tangentCanvas');
    const ctx1 = canvas1.getContext('2d');
    const w1 = canvas1.width;
    const h1 = canvas1.height;

    const x0_1 = w1 / 2, y0_1 = h1 / 2;
    const scale1 = 30;

    // Grid
    ctx1.strokeStyle = '#e8e8e8';
    ctx1.lineWidth = 0.8;
    for (let i = -6; i <= 6; i++) {
     ctx1.beginPath();
     ctx1.moveTo(x0_1 + i * scale1, 20);
     ctx1.lineTo(x0_1 + i * scale1, h1 - 20);
     ctx1.stroke();

     ctx1.beginPath();
     ctx1.moveTo(20, y0_1 - i * scale1);
     ctx1.lineTo(w1 - 20, y0_1 - i * scale1);
     ctx1.stroke();
    }

    // Axes
    ctx1.strokeStyle = '#000';
    ctx1.lineWidth = 2;
    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1, h1 - 20);
    ctx1.stroke();

    ctx1.beginPath();
    ctx1.moveTo(20, y0_1);
    ctx1.lineTo(w1 - 20, y0_1);
    ctx1.stroke();

    // Arrow tips
    ctx1.fillStyle = '#000';
    ctx1.beginPath();
    ctx1.moveTo(w1 - 20, y0_1);
    ctx1.lineTo(w1 - 27, y0_1 - 4);
    ctx1.lineTo(w1 - 27, y0_1 + 4);
    ctx1.fill();

    ctx1.beginPath();
    ctx1.moveTo(x0_1, 20);
    ctx1.lineTo(x0_1 - 4, 27);
    ctx1.lineTo(x0_1 + 4, 27);
    ctx1.fill();

    // Axis labels
    ctx1.font = '14px Arial';
    ctx1.fillStyle = '#000';
    ctx1.textAlign = 'center';
    ctx1.fillText('x', w1 - 10, y0_1 + 20);
    ctx1.fillText('y', x0_1 + 20, 30);
    ctx1.fillText('O', x0_1 - 15, y0_1 + 15);

    // Circle: x^2 + y^2 = 16 (r = 4)
    const r1 = 4;

    ctx1.strokeStyle = '#3498db';
    ctx1.lineWidth = 2.5;
    ctx1.beginPath();
    ctx1.arc(x0_1, y0_1, r1 * scale1, 0, 2*Math.PI);
    ctx1.stroke();

    // Center point (origin)
    ctx1.fillStyle = '#e74c3c';
    ctx1.beginPath();
    ctx1.arc(x0_1, y0_1, 5, 0, 2*Math.PI);
    ctx1.fill();

    // Point P on circle: (3, √7) where 3^2 + (√7)^2 ≈ 9 + 7 = 16
    const p1 = 3, q1 = Math.sqrt(r1*r1 - p1*p1);

    ctx1.fillStyle = '#9b59b6';
    ctx1.beginPath();
    ctx1.arc(x0_1 + p1 * scale1, y0_1 - q1 * scale1, 5, 0, 2*Math.PI);
    ctx1.fill();

    // Radius to P (dashed red)
    ctx1.strokeStyle = '#e74c3c';
    ctx1.lineWidth = 1.5;
    ctx1.setLineDash([5, 5]);
    ctx1.beginPath();
    ctx1.moveTo(x0_1, y0_1);
    ctx1.lineTo(x0_1 + p1 * scale1, y0_1 - q1 * scale1);
    ctx1.stroke();
    ctx1.setLineDash([]);

    // Tangent line at P: px + qy = r^2
    // 3x + √7 y = 16
    const tangentSlope = -p1 / q1;
    const tangentIntercept = (r1*r1) / q1;

    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 2.5;
    ctx1.beginPath();
    const xStart1 = -2, xEnd1 = 5.5;
    const yStart1 = (r1*r1 - p1*xStart1) / q1;
    const yEnd1 = (r1*r1 - p1*xEnd1) / q1;
    ctx1.moveTo(x0_1 + xStart1 * scale1, y0_1 - yStart1 * scale1);
    ctx1.lineTo(x0_1 + xEnd1 * scale1, y0_1 - yEnd1 * scale1);
    ctx1.stroke();

    // Right angle marker at P
    const cornerSize = 12;
    const radiusAngle = Math.atan2(q1, p1);
    const tangentAngle = radiusAngle + Math.PI/2;

    ctx1.strokeStyle = '#27ae60';
    ctx1.lineWidth = 1.5;
    ctx1.beginPath();
    const px_canvas = x0_1 + p1 * scale1;
    const py_canvas = y0_1 - q1 * scale1;
    const c1x = px_canvas - cornerSize * Math.cos(radiusAngle);
    const c1y = py_canvas + cornerSize * Math.sin(radiusAngle);
    const c2x = c1x + cornerSize * Math.cos(tangentAngle);
    const c2y = c1y - cornerSize * Math.sin(tangentAngle);
    const c3x = px_canvas + cornerSize * Math.cos(tangentAngle);
    const c3y = py_canvas - cornerSize * Math.sin(tangentAngle);

    ctx1.moveTo(c1x, c1y);
    ctx1.lineTo(c2x, c2y);
    ctx1.lineTo(c3x, c3y);
    ctx1.stroke();

    // Labels
    ctx1.fillStyle = '#9b59b6';
    ctx1.textAlign = 'left';
    ctx1.fillText('P(p, q)', x0_1 + p1 * scale1 + 10, y0_1 - q1 * scale1 - 5);

    ctx1.fillStyle = '#3498db';
    ctx1.textAlign = 'center';
    ctx1.font = 'italic 15px Georgia';
    ctx1.fillText('x² + y² = r²', x0_1 + 3 * scale1, y0_1 - 0.5 * scale1);

    ctx1.fillStyle = '#27ae60';
    ctx1.textAlign = 'left';
    ctx1.fillText('Tangent: px + qy = r²', x0_1 + 1 * scale1, y0_1 - (r1*r1 - p1*1) / q1 * scale1 - 15);

    ctx1.fillStyle = '#e74c3c';
    ctx1.font = 'italic 14px Georgia';
    ctx1.textAlign = 'center';
    ctx1.fillText('r', x0_1 + p1/2 * scale1 - 10, y0_1 - q1/2 * scale1 + 5);

    // General circle tangent
    const canvas2 = document.getElementById('generalTangentCanvas');
    const ctx2 = canvas2.getContext('2d');
    const w2 = canvas2.width;
    const h2 = canvas2.height;

    const x0_2 = w2 / 2, y0_2 = h2 / 2;
    const scale2 = 25;

    // Grid
    ctx2.strokeStyle = '#e8e8e8';
    ctx2.lineWidth = 0.8;
    for (let i = -7; i <= 7; i++) {
     ctx2.beginPath();
     ctx2.moveTo(x0_2 + i * scale2, 20);
     ctx2.lineTo(x0_2 + i * scale2, h2 - 20);
     ctx2.stroke();

     ctx2.beginPath();
     ctx2.moveTo(20, y0_2 - i * scale2);
     ctx2.lineTo(w2 - 20, y0_2 - i * scale2);
     ctx2.stroke();
    }

    // Axes
    ctx2.strokeStyle = '#000';
    ctx2.lineWidth = 2;
    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2, h2 - 20);
    ctx2.stroke();

    ctx2.beginPath();
    ctx2.moveTo(20, y0_2);
    ctx2.lineTo(w2 - 20, y0_2);
    ctx2.stroke();

    // Arrow tips
    ctx2.fillStyle = '#000';
    ctx2.beginPath();
    ctx2.moveTo(w2 - 20, y0_2);
    ctx2.lineTo(w2 - 27, y0_2 - 4);
    ctx2.lineTo(w2 - 27, y0_2 + 4);
    ctx2.fill();

    ctx2.beginPath();
    ctx2.moveTo(x0_2, 20);
    ctx2.lineTo(x0_2 - 4, 27);
    ctx2.lineTo(x0_2 + 4, 27);
    ctx2.fill();

    // Axis labels
    ctx2.font = '14px Arial';
    ctx2.fillStyle = '#000';
    ctx2.textAlign = 'center';
    ctx2.fillText('x', w2 - 10, y0_2 + 20);
    ctx2.fillText('y', x0_2 + 20, 30);
    ctx2.fillText('O', x0_2 - 15, y0_2 + 15);

    // Circle: (x-2)^2 + (y-1)^2 = 9, center (2,1), r=3
    const h2_circle = 2, k2_circle = 1, r2 = 3;

    ctx2.strokeStyle = '#3498db';
    ctx2.lineWidth = 2.5;
    ctx2.beginPath();
    ctx2.arc(x0_2 + h2_circle * scale2, y0_2 - k2_circle * scale2, r2 * scale2, 0, 2*Math.PI);
    ctx2.stroke();

    // Center point
    ctx2.fillStyle = '#e74c3c';
    ctx2.beginPath();
    ctx2.arc(x0_2 + h2_circle * scale2, y0_2 - k2_circle * scale2, 5, 0, 2*Math.PI);
    ctx2.fill();

    // Point P on circle: (4, 1) where (4-2)^2 + (1-1)^2 = 4 + 0 = 4 ≠ 9
    // Correct point: (2, 1+3) = (2, 4)
    const p2 = 2, q2 = 4;

    ctx2.fillStyle = '#9b59b6';
    ctx2.beginPath();
    ctx2.arc(x0_2 + p2 * scale2, y0_2 - q2 * scale2, 5, 0, 2*Math.PI);
    ctx2.fill();

    // Radius to P (dashed red)
    ctx2.strokeStyle = '#e74c3c';
    ctx2.lineWidth = 1.5;
    ctx2.setLineDash([5, 5]);
    ctx2.beginPath();
    ctx2.moveTo(x0_2 + h2_circle * scale2, y0_2 - k2_circle * scale2);
    ctx2.lineTo(x0_2 + p2 * scale2, y0_2 - q2 * scale2);
    ctx2.stroke();
    ctx2.setLineDash([]);

    // Tangent line: (x-2)(2-2) + (y-1)(4-1) = 9
    // 0 + 3(y-1) = 9
    // 3(y-1) = 9
    // y-1 = 3
    // y = 4
    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 2.5;
    ctx2.beginPath();
    ctx2.moveTo(x0_2 - 2 * scale2, y0_2 - 4 * scale2);
    ctx2.lineTo(x0_2 + 6 * scale2, y0_2 - 4 * scale2);
    ctx2.stroke();

    // Right angle marker at P
    const radiusAngle2 = Math.atan2(q2 - k2_circle, p2 - h2_circle);
    const tangentAngle2 = radiusAngle2 + Math.PI/2;

    ctx2.strokeStyle = '#27ae60';
    ctx2.lineWidth = 1.5;
    ctx2.beginPath();
    const px_canvas2 = x0_2 + p2 * scale2;
    const py_canvas2 = y0_2 - q2 * scale2;
    const c1x2 = px_canvas2 - cornerSize * Math.cos(radiusAngle2);
    const c1y2 = py_canvas2 + cornerSize * Math.sin(radiusAngle2);
    const c2x2 = c1x2 + cornerSize * Math.cos(tangentAngle2);
    const c2y2 = c1y2 - cornerSize * Math.sin(tangentAngle2);
    const c3x2 = px_canvas2 + cornerSize * Math.cos(tangentAngle2);
    const c3y2 = py_canvas2 - cornerSize * Math.sin(tangentAngle2);

    ctx2.moveTo(c1x2, c1y2);
    ctx2.lineTo(c2x2, c2y2);
    ctx2.lineTo(c3x2, c3y2);
    ctx2.stroke();

    // Labels
    ctx2.fillStyle = '#9b59b6';
    ctx2.textAlign = 'left';
    ctx2.fillText('P(p, q)', x0_2 + p2 * scale2 + 10, y0_2 - q2 * scale2 - 5);

    ctx2.fillStyle = '#3498db';
    ctx2.textAlign = 'center';
    ctx2.font = 'italic 15px Georgia';
    ctx2.fillText('(x-h)² + (y-k)² = r²', x0_2 + 3 * scale2, y0_2 - 0.5 * scale2);

    ctx2.fillStyle = '#27ae60';
    ctx2.textAlign = 'left';
    ctx2.fillText('Tangent', x0_2 + 4 * scale2, y0_2 - 4 * scale2 - 15);

    ctx2.fillStyle = '#e74c3c';
    ctx2.font = 'italic 14px Georgia';
    ctx2.textAlign = 'center';
    ctx2.fillText('r', x0_2 + (h2_circle + (p2-h2_circle)/2) * scale2 - 10, y0_2 - (k2_circle + (q2-k2_circle)/2) * scale2 + 5);

    // Initialize calculator
    calculateTangent();
   });
  </script>
 </body>
</html>