<!DOCTYPE html>
<!-- tags: Differentiation -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Tangent Line Equation at a Point
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
   .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
   }

   .main-content {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    padding: 30px;
    margin: 20px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
   }

   .fancy-title {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin: 20px 0;
    color: #2c3e50;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
   }

   .description {
    font-size: 1.2em;
    line-height: 1.6;
    margin: 20px 0;
    color: #34495e;
    text-align: center;
   }

   .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin: 30px 0;
   }

   .formula-block {
    flex: 1;
    min-width: 300px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    font-size: 1.4em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
   }

   .formula-item {
    margin: 15px 0;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
   }

   .diagram-block {
    flex: 1;
    min-width: 300px;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    display: flex;
    justify-content: center;
    align-items: center;
   }

   .interactive-demo {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin: 30px 0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
   }

   .demo-title {
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 25px;
    font-weight: bold;
   }

   .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
    justify-content: center;
   }

   .input-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
   }

   .input-field label {
    font-weight: bold;
    font-size: 1.1em;
   }

   .input-field input {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    width: 100px;
    text-align: center;
    transition: border-color 0.3s;
   }

   .input-field input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
   }

   .button-group {
    text-align: center;
    margin: 25px 0;
   }

   .btn {
    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
   }

   .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
   }

   .btn:active {
    transform: translateY(0);
   }

   .result-display {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    backdrop-filter: blur(10px);
   }

   .result-text {
    font-size: 1.2em;
    text-align: center;
    margin: 10px 0;
   }

   .canvas-container {
    text-align: center;
    margin: 20px 0;
   }

   .tangent-canvas {
    border: 2px solid #ddd;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
   }

   .section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
   }

   .section-title {
    font-size: 1.8em;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
   }

   .tangent-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .tangent-card {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(252, 182, 159, 0.3);
   }

   .tangent-card h3 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
   }

   .tangent-card .formula {
    font-weight: bold;
    color: #e74c3c;
    font-size: 1.2em;
    margin: 10px 0;
   }

   .tangent-card .description {
    color: #555;
    line-height: 1.5;
   }

   .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
   }

   .example-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
   }

   .example-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
   }

   .example-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
   }

   .example-detail {
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    display: none;
   }

   .calculation-steps {
    margin: 15px 0;
   }

   .calculation-step {
    margin: 8px 0;
    padding: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    border-left: 4px solid #f5576c;
   }

   .practice-problems {
    margin: 20px 0;
   }

   .problem-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
   }

   .problem-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.2em;
   }

   .solution-btn {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin: 10px 0;
    transition: all 0.3s;
   }

   .solution-btn:hover {
    background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
    transform: scale(1.05);
   }

   .solution {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    display: none;
    border-left: 4px solid #667eea;
   }

   .key-takeaways {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 25px;
    border-radius: 12px;
    margin: 25px 0;
   }

   .takeaway-list {
    list-style: none;
    padding: 0;
   }

   .takeaway-item {
    background: rgba(255, 255, 255, 0.8);
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    font-weight: bold;
   }

   .error-message {
    background: #ffebee;
    color: #c62828;
    padding: 10px;
    border-radius: 5px;
    margin: 10px 0;
    display: none;
    text-align: center;
    font-weight: bold;
   }

   @media (max-width: 768px) {
    .content-wrapper {
     flex-direction: column;
    }

    .input-group {
     flex-direction: column;
     align-items: center;
    }

    .fancy-title {
     font-size: 2em;
    }

    .formula-block {
     font-size: 1.2em;
    }
   }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Differentiation">
   Tangent Line Equation at a Point
  </div>

  <div class="container">
   <div class="main-content">
    <div class="description">
     The tangent line to a curve at a point represents the best linear approximation of the curve near that point, with slope equal to the derivative.
    </div>

    <div class="content-wrapper">
     <div class="formula-block">
      <div class="formula-item">
       <strong>Point-Slope Form:</strong> $$y - y_1 = m(x - x_1)$$
      </div>
      <div class="formula-item">
       <strong>Tangent Line:</strong> $$y - f(a) = f'(a)(x - a)$$
      </div>
      <div class="formula-item">
       <strong>Slope-Intercept Form:</strong> $$y = f'(a)x + [f(a) - f'(a)a]$$
      </div>
     </div>

     <div class="diagram-block">
      <svg viewbox="0 0 250 200" xmlns="http://www.w3.org/2000/svg">
       <!-- Tangent line visualization -->
       <text fill="#333" font-size="14" x="125" y="20" text-anchor="middle">Tangent Line at Point (a, f(a))</text>
       <!-- Curve -->
       <path d="M50 150 Q100 100 150 75 Q200 50 200 75" fill="none" stroke="#e74c3c" stroke-width="3"></path>
       <!-- Tangent line -->
       <line marker-end="url(#arrowhead)" stroke="#27ae60" stroke-width="3" x1="75" x2="175" y1="125" y2="50"></line>
       <!-- Point of tangency -->
       <circle cx="125" cy="87" fill="#f39c12" r="5"></circle>
       <text fill="#f39c12" font-size="12" x="120" y="70">Point (a, f(a))</text>
       <!-- Normal line -->
       <line stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5" x1="125" x2="125" y1="87" y2="150"></line>
       <!-- Arrow markers -->
       <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
         <polygon fill="#27ae60" points="0 0, 10 3.5, 0 7"></polygon>
        </marker>
       </defs>
      </svg>
     </div>
    </div>

    <div class="tangent-grid">
     <div class="tangent-card">
      <h3>Geometric Interpretation</h3>
      <div class="formula">Slope = f'(a)</div>
      <div class="description">
       The slope of the tangent line at point (a, f(a)) is exactly the value of the derivative f'(a).
       <br><br>
       This represents the instantaneous rate of change at that point.
      </div>
     </div>

     <div class="tangent-card">
      <h3>Point-Slope Equation</h3>
      <div class="formula">y - f(a) = f'(a)(x - a)</div>
      <div class="description">
       Standard form of the tangent line equation, passing through (a, f(a)) with slope f'(a).
       <br><br>
       This is the most common form used in calculus.
      </div>
     </div>

     <div class="tangent-card">
      <h3>Slope-Intercept Form</h3>
      <div class="formula">y = f'(a)x + b</div>
      <div class="description">
       Where b = f(a) - f'(a)a<br>
       Useful for graphing and finding y-intercepts.
       <br><br>
       The y-intercept is the value where x = 0.
      </div>
     </div>
    </div>

    <div class="interactive-demo">
     <div class="demo-title">Interactive Tangent Line Calculator</div>

     <div class="input-group">
      <div class="input-field">
       <label for="functionInput">Function f(x):</label>
       <input id="functionInput" placeholder="e.g., x^2, sin(x)" value="x^2"/>
      </div>
      <div class="input-field">
       <label for="pointInput">Point a:</label>
       <input id="pointInput" step="any" type="number" value="1"/>
      </div>
     </div>

     <div class="button-group">
      <button class="btn" onclick="calculateTangentLine()">Calculate Tangent Line</button>
      <button class="btn" onclick="showForms()">Show All Forms</button>
      <button class="btn" onclick="resetDemo()">Reset</button>
     </div>

     <div class="error-message" id="errorMessage"></div>

     <div class="result-display">
      <div class="result-text" id="pointDisplay">
       Point: <strong id="pointText">(1, 1)</strong>
      </div>
      <div class="result-text" id="slopeDisplay">
       Slope: <strong id="slopeText">f'(1) = 2</strong>
      </div>
      <div class="result-text" id="equationDisplay">
       Equation: <strong id="equationText">y - 1 = 2(x - 1)</strong>
      </div>
     </div>

     <div class="canvas-container">
      <canvas class="tangent-canvas" height="400" id="tangentCanvas" width="500"></canvas>
     </div>
    </div>

    <div class="section">
     <div class="section-title">Mathematical Foundation</div>
     <p>The tangent line is defined as the limit of secant lines as the second point approaches the first point:</p>
     <div class="formula-block" style="margin: 20px 0;">
      $$\text{Slope of tangent} = \lim_{h \to 0} \frac{f(a+h) - f(a)}{h} = f'(a)$$
     </div>
     <p>Once we have the slope m = f'(a) and the point (a, f(a)), we can use the point-slope form:</p>
     <div class="formula-block" style="margin: 20px 0;">
      $$y - f(a) = m(x - a)$$
     </div>
     <p>Substituting m = f'(a) gives the tangent line equation:</p>
     <div class="formula-block" style="margin: 20px 0;">
      $$y - f(a) = f'(a)(x - a)$$
     </div>
     <p>This equation defines the tangent line uniquely at each point where the derivative exists.</p>
    </div>

    <div class="section">
     <div class="section-title">Worked Examples</div>
     <div class="example-grid">
      <div class="example-card" onclick="showExample(1)">
       <h4>Example 1: Quadratic Function</h4>
       <p>Find tangent line to f(x) = x² at x = 1</p>
      </div>
      <div class="example-card" onclick="showExample(2)">
       <h4>Example 2: Trigonometric Function</h4>
       <p>Find tangent line to f(x) = sin(x) at x = 0</p>
      </div>
      <div class="example-card" onclick="showExample(3)">
       <h4>Example 3: Rational Function</h4>
       <p>Find tangent line to f(x) = 1/x at x = 2</p>
      </div>
     </div>

     <div class="example-detail" id="exampleDetail"></div>
    </div>

    <div class="section">
     <div class="section-title">Applications</div>
     <ul>
      <li><strong>Linear Approximation:</strong> Using tangent lines to approximate function values</li>
      <li><strong>Newton's Method:</strong> Root finding using tangent lines</li>
      <li><strong>Optimization:</strong> Finding maximum/minimum points</li>
      <li><strong>Physics:</strong> Instantaneous velocity and acceleration</li>
      <li><strong>Economics:</strong> Marginal analysis and rates of change</li>
     </ul>
    </div>

    <div class="section">
     <div class="section-title">Practice Problems</div>
     <div class="practice-problems">
      <div class="problem-item">
       <h4>Problem 1</h4>
       <p>Find the equation of the tangent line to f(x) = x³ at x = 2.</p>
       <button class="solution-btn" onclick="toggleSolution(1)">Show Solution</button>
       <div class="solution" id="solution1">
        <p><strong>Solution:</strong></p>
        <p>f(x) = x³</p>
        <p>f'(x) = 3x²</p>
        <p>f(2) = 8, f'(2) = 3×4 = 12</p>
        <p>Tangent line: y - 8 = 12(x - 2)</p>
        <p>y = 12x - 24 + 8 = 12x - 16</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 2</h4>
       <p>Find the equation of the tangent line to f(x) = √x at x = 4.</p>
       <button class="solution-btn" onclick="toggleSolution(2)">Show Solution</button>
       <div class="solution" id="solution2">
        <p><strong>Solution:</strong></p>
        <p>f(x) = x^(1/2)</p>
        <p>f'(x) = (1/2)x^(-1/2) = 1/(2√x)</p>
        <p>f(4) = 2, f'(4) = 1/(2×2) = 1/4</p>
        <p>Tangent line: y - 2 = (1/4)(x - 4)</p>
        <p>y = (1/4)x - 1 + 2 = (1/4)x + 1</p>
       </div>
      </div>

      <div class="problem-item">
       <h4>Problem 3</h4>
       <p>Find the point on the curve y = x² where the tangent line is parallel to y = 2x + 1.</p>
       <button class="solution-btn" onclick="toggleSolution(3)">Show Solution</button>
       <div class="solution" id="solution3">
        <p><strong>Solution:</strong></p>
        <p>The given line has slope 2, so we need f'(x) = 2</p>
        <p>f(x) = x², f'(x) = 2x = 2 ⇒ x = 1</p>
        <p>Point: (1, 1²) = (1, 1)</p>
        <p>Tangent line: y - 1 = 2(x - 1) ⇒ y = 2x - 1</p>
       </div>
      </div>
     </div>
    </div>

    <div class="key-takeaways">
     <div class="section-title">Key Takeaways</div>
     <ul class="takeaway-list">
      <li class="takeaway-item">Tangent line slope equals the derivative value at that point</li>
      <li class="takeaway-item">Point-slope form: y - f(a) = f'(a)(x - a)</li>
      <li class="takeaway-item">Tangent line is the best linear approximation near the point</li>
      <li class="takeaway-item">Exists wherever the derivative exists</li>
      <li class="takeaway-item">Fundamental to differential calculus applications</li>
      <li class="takeaway-item">Slope represents instantaneous rate of change</li>
     </ul>
    </div>
   </div>
  </div>

  <script>
   function evaluateFunction(funcStr, x) {
    try {
     // Simple function evaluator for common functions
     if (funcStr === 'x^2') return x * x;
     if (funcStr === 'x^3') return x * x * x;
     if (funcStr === 'sin(x)') return Math.sin(x);
     if (funcStr === 'cos(x)') return Math.cos(x);
     if (funcStr === 'e^x') return Math.exp(x);
     if (funcStr === 'ln(x)' && x > 0) return Math.log(x);
     if (funcStr === '1/x' && x !== 0) return 1/x;
     if (funcStr === 'sqrt(x)' && x >= 0) return Math.sqrt(x);
     return NaN;
    } catch (error) {
     return NaN;
    }
   }

   function evaluateDerivative(funcStr, x) {
    try {
     // Simple derivative evaluator for common functions
     if (funcStr === 'x^2') return 2 * x;
     if (funcStr === 'x^3') return 3 * x * x;
     if (funcStr === 'sin(x)') return Math.cos(x);
     if (funcStr === 'cos(x)') return -Math.sin(x);
     if (funcStr === 'e^x') return Math.exp(x);
     if (funcStr === 'ln(x)' && x > 0) return 1/x;
     if (funcStr === '1/x' && x !== 0) return -1/(x*x);
     if (funcStr === 'sqrt(x)' && x > 0) return 1/(2 * Math.sqrt(x));
     return NaN;
    } catch (error) {
     return NaN;
    }
   }

   function calculateTangentLine() {
    try {
     const funcStr = document.getElementById('functionInput').value.trim();
     const a = parseFloat(document.getElementById('pointInput').value) || 0;

     const f_a = evaluateFunction(funcStr, a);
     const f_prime_a = evaluateDerivative(funcStr, a);

     if (isNaN(f_a) || isNaN(f_prime_a)) {
      document.getElementById('errorMessage').textContent = 'Function not supported or invalid point. Try: x^2, x^3, sin(x), cos(x), e^x, ln(x), 1/x, sqrt(x)';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const pointText = `(${a}, ${f_a.toFixed(3)})`;
     const slopeText = `f'(${a}) = ${f_prime_a.toFixed(3)}`;
     const equationText = `y - ${f_a.toFixed(3)} = ${f_prime_a.toFixed(3)}(x - ${a})`;

     document.getElementById('pointText').textContent = pointText;
     document.getElementById('slopeText').textContent = slopeText;
     document.getElementById('equationText').textContent = equationText;
     document.getElementById('errorMessage').style.display = 'none';

     drawTangentVisualization(funcStr, a, f_a, f_prime_a);
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error calculating tangent line. Please check your input.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function showForms() {
    try {
     const funcStr = document.getElementById('functionInput').value.trim();
     const a = parseFloat(document.getElementById('pointInput').value) || 0;

     const f_a = evaluateFunction(funcStr, a);
     const f_prime_a = evaluateDerivative(funcStr, a);

     if (isNaN(f_a) || isNaN(f_prime_a)) {
      document.getElementById('errorMessage').textContent = 'Function not supported for showing forms.';
      document.getElementById('errorMessage').style.display = 'block';
      return;
     }

     const b = f_a - f_prime_a * a;
     const slopeIntercept = `y = ${f_prime_a.toFixed(3)}x + ${b.toFixed(3)}`;
     const pointSlope = `y - ${f_a.toFixed(3)} = ${f_prime_a.toFixed(3)}(x - ${a})`;

     document.getElementById('equationText').textContent = `${pointSlope} or ${slopeIntercept}`;
     document.getElementById('errorMessage').style.display = 'none';
    } catch (error) {
     document.getElementById('errorMessage').textContent = 'Error showing forms.';
     document.getElementById('errorMessage').style.display = 'block';
    }
   }

   function drawTangentVisualization(funcStr, a, f_a, f_prime_a) {
    const canvas = document.getElementById('tangentCanvas');
    const ctx = canvas.getContext('2d');

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Calculate bounds
    const minX = a - 3;
    const maxX = a + 3;
    const centerY = canvas.height / 2;

    const scaleX = canvas.width / (maxX - minX);
    const scaleY = canvas.height / 6; // Rough scale for y

    // Transform functions
    const transformX = xi => (xi - minX) * scaleX;
    const transformY = yi => centerY - yi * scaleY;

    // Draw axes
    ctx.strokeStyle = '#666';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, centerY);
    ctx.lineTo(canvas.width, centerY);
    ctx.moveTo(transformX(0), 0);
    ctx.lineTo(transformX(0), canvas.height);
    ctx.stroke();

    // Draw function curve
    ctx.strokeStyle = '#e74c3c';
    ctx.lineWidth = 3;
    ctx.beginPath();
    let firstPoint = true;
    for (let xi = minX; xi <= maxX; xi += 0.1) {
     const yi = evaluateFunction(funcStr, xi);
     if (!isNaN(yi)) {
      const canvasX = transformX(xi);
      const canvasY = transformY(yi);
      if (firstPoint) {
       ctx.moveTo(canvasX, canvasY);
       firstPoint = false;
      } else {
       ctx.lineTo(canvasX, canvasY);
      }
     }
    }
    ctx.stroke();

    // Draw tangent line
    ctx.strokeStyle = '#27ae60';
    ctx.lineWidth = 3;
    ctx.beginPath();
    const tangentStartX = a - 1;
    const tangentEndX = a + 1;
    const tangentStartY = f_a + f_prime_a * (tangentStartX - a);
    const tangentEndY = f_a + f_prime_a * (tangentEndX - a);
    ctx.moveTo(transformX(tangentStartX), transformY(tangentStartY));
    ctx.lineTo(transformX(tangentEndX), transformY(tangentEndY));
    ctx.stroke();

    // Draw point of tangency
    ctx.fillStyle = '#f39c12';
    ctx.beginPath();
    ctx.arc(transformX(a), transformY(f_a), 6, 0, 2 * Math.PI);
    ctx.fill();

    // Labels
    ctx.fillStyle = '#333';
    ctx.font = '12px Arial';
    ctx.textAlign = 'center';
    ctx.fillText(`f(x) = ${funcStr}`, canvas.width / 2, 20);
    ctx.fillText(`Point (${a}, ${f_a.toFixed(2)})`, canvas.width / 2, canvas.height - 40);
    ctx.fillText(`Slope = ${f_prime_a.toFixed(2)}`, canvas.width / 2, canvas.height - 20);
    ctx.fillText(`Tangent: y - ${f_a.toFixed(2)} = ${f_prime_a.toFixed(2)}(x - ${a})`, canvas.width / 2, canvas.height - 5);

    // Legend
    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
    ctx.fillRect(10, 10, 120, 60);
    ctx.strokeStyle = '#333';
    ctx.strokeRect(10, 10, 120, 60);

    ctx.fillStyle = '#333';
    ctx.font = '10px Arial';
    ctx.textAlign = 'left';
    ctx.fillText('Legend:', 15, 25);
    ctx.fillText('● Function', 15, 40);
    ctx.fillText('● Tangent', 15, 55);
   }

   function showExample(exampleNumber) {
    const detail = document.getElementById('exampleDetail');
    let content = '';

    switch(exampleNumber) {
     case 1:
      content = `
       <h4>Detailed Example 1 - Quadratic Function</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: f(x) = x²</div>
        <div class="calculation-step">Point: a = 1</div>
        <div class="calculation-step">f(1) = 1² = 1</div>
        <div class="calculation-step">f'(x) = 2x, so f'(1) = 2×1 = 2</div>
        <div class="calculation-step">Tangent line equation: y - 1 = 2(x - 1)</div>
        <div class="calculation-step">Expand: y - 1 = 2x - 2</div>
        <div class="calculation-step">Final equation: y = 2x - 1</div>
        <div class="calculation-step">Verification: At x = 1, both function and tangent equal 1</div>
        <div class="calculation-step">Derivative gives slope of tangent line</div>
       </div>
      `;
      break;
     case 2:
      content = `
       <h4>Detailed Example 2 - Trigonometric Function</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: f(x) = sin(x)</div>
        <div class="calculation-step">Point: a = 0</div>
        <div class="calculation-step">f(0) = sin(0) = 0</div>
        <div class="calculation-step">f'(x) = cos(x), so f'(0) = cos(0) = 1</div>
        <div class="calculation-step">Tangent line equation: y - 0 = 1(x - 0)</div>
        <div class="calculation-step">Final equation: y = x</div>
        <div class="calculation-step">This is the tangent line to y = sin(x) at the origin</div>
        <div class="calculation-step">For small x, sin(x) ≈ x, which is very accurate!</div>
       </div>
      `;
      break;
     case 3:
      content = `
       <h4>Detailed Example 3 - Rational Function</h4>
       <div class="calculation-steps">
        <div class="calculation-step">Function: f(x) = 1/x</div>
        <div class="calculation-step">Point: a = 2</div>
        <div class="calculation-step">f(2) = 1/2 = 0.5</div>
        <div class="calculation-step">f'(x) = -1/x², so f'(2) = -1/(2)² = -1/4 = -0.25</div>
        <div class="calculation-step">Tangent line equation: y - 0.5 = -0.25(x - 2)</div>
        <div class="calculation-step">Expand: y - 0.5 = -0.25x + 0.5</div>
        <div class="calculation-step">Final equation: y = -0.25x + 1</div>
        <div class="calculation-step">At x = 2, both function and tangent equal 0.5</div>
        <div class="calculation-step">The negative slope reflects the decreasing nature of 1/x</div>
       </div>
      `;
      break;
    }

    detail.innerHTML = content;
    detail.style.display = 'block';
    MathJax.typesetPromise();
   }

   function toggleSolution(problemNumber) {
    const solution = document.getElementById('solution' + problemNumber);
    if (solution.style.display === 'none' || solution.style.display === '') {
     solution.style.display = 'block';
    } else {
     solution.style.display = 'none';
    }
   }

   function resetDemo() {
    document.getElementById('functionInput').value = 'x^2';
    document.getElementById('pointInput').value = '1';
    document.getElementById('pointText').textContent = '(1, 1)';
    document.getElementById('slopeText').textContent = 'f\'(1) = 2';
    document.getElementById('equationText').textContent = 'y - 1 = 2(x - 1)';
    document.getElementById('errorMessage').style.display = 'none';
    calculateTangentLine();
   }

   // Initialize with default values
   document.addEventListener('DOMContentLoaded', function() {
    calculateTangentLine();
   });
  </script>
 </body>
</html>
