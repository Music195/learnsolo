<!DOCTYPE html>
<!-- tags: Complex Plane, Complex Numbers, Geometry, Collinearity, Perpendicularity -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Collinearity and Perpendicularity of Three Points
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
    /* Enhanced text containment and readability */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }

    .main-content {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 15px;
      padding: 30px;
      margin: 20px 0;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .section {
      margin-bottom: 40px;
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .section h2 {
      color: #2c3e50;
      border-bottom: 3px solid #3498db;
      padding-bottom: 10px;
      margin-bottom: 20px;
      font-size: 1.8em;
      font-weight: 600;
    }

    .section h3 {
      color: #34495e;
      margin-bottom: 15px;
      font-size: 1.4em;
      font-weight: 500;
    }

    /* Law blocks with gradient backgrounds */
    .law-block {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .law-eq {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .law-block .math {
      margin: 8px 0;
      font-size: 1.1em;
      line-height: 1.6;
    }

    /* Operation blocks */
    .operation-block {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(245,87,108,0.3);
    }

    .operation-block .theorem {
      background: rgba(255,255,255,0.9);
      color: #333;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.3em;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Hint blocks */
    .hint-block {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(79,172,254,0.3);
    }

    .hint-block strong {
      font-size: 1.2em;
      display: block;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    /* Interactive demo styling */
    .interactive-demo {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 4px 15px rgba(168,237,234,0.3);
    }

    .interactive-demo h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.5em;
    }

    .demo-input {
      width: 80px;
      padding: 8px 12px;
      border: 2px solid #3498db;
      border-radius: 6px;
      font-size: 1em;
      margin: 0 5px;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .demo-input:focus {
      outline: none;
      border-color: #2980b9;
      box-shadow: 0 0 5px rgba(52,152,219,0.5);
    }

    .demo-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(102,126,234,0.3);
    }

    .demo-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102,126,234,0.4);
    }

    .demo-result {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 1em;
      color: #333;
      white-space: pre-line;
      border: 1px solid #ddd;
      min-height: 40px;
    }

    /* Problem items */
    .problem-item {
      background: rgba(255,255,255,0.95);
      border-radius: 10px;
      padding: 20px;
      margin: 15px 0;
      border-left: 5px solid #3498db;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .problem-number {
      display: inline-block;
      background: #3498db;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      margin-right: 15px;
      vertical-align: top;
    }

    .problem-content {
      display: inline-block;
      width: calc(100% - 50px);
      vertical-align: top;
    }

    .solution-button {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      color: #333;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      margin: 10px 0;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(255,154,158,0.3);
    }

    .solution-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 12px rgba(255,154,158,0.4);
    }

    .solution-content {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: rgba(240,240,240,0.8);
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .calculation-steps {
      margin: 10px 0;
    }

    .calculation-step {
      margin: 8px 0;
      padding: 8px 12px;
      background: rgba(255,255,255,0.7);
      border-radius: 6px;
      border-left: 3px solid #3498db;
    }

    /* Key takeaways */
    .key-takeaways {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .key-takeaways h3 {
      text-align: center;
      font-size: 1.5em;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .key-takeaways ul {
      list-style: none;
      padding: 0;
    }

    .key-takeaways li {
      margin: 10px 0;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    .key-takeaways li:last-child {
      border-bottom: none;
    }

    /* Enhanced canvas styling */
    .collinearity-canvas {
      display: block;
      margin: 20px auto;
      border: 2px solid #3498db;
      border-radius: 8px;
      background: white;
      box-shadow: 0 4px 15px rgba(52,152,219,0.2);
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      .main-content {
        padding: 20px;
      }

      .section {
        padding: 15px;
      }

      .interactive-demo {
        padding: 15px;
      }

      .demo-input {
        width: 60px;
        margin: 5px;
      }

      .demo-button {
        display: block;
        width: 100%;
        margin: 5px 0;
      }

      .problem-content {
        width: calc(100% - 40px);
      }
    }

    /* MathJax styling */
    .mjx-chtml {
      font-size: 1.1em !important;
    }

    /* Formula boxes */
    .formula-box {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Property lists */
    .property-list {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      color: #333;
    }

    .property-list li {
      margin: 8px 0;
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }

    .property-list li:last-child {
      border-bottom: none;
    }

    /* Special styling for real and imaginary indicators */
    .real {
      color: #27ae60;
      font-weight: bold;
    }

    .pure-imag {
      color: #e74c3c;
      font-weight: bold;
    }

    .case-block {
      background: rgba(255,255,255,0.9);
      color: #333;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
      border-left: 4px solid #3498db;
    }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Complex Plane, Complex Numbers, Geometry, Collinearity, Perpendicularity">
   Collinearity and Perpendicularity of Three Points
  </div>
  <div class="container">
   <div class="main-content">
    <div class="section">
     <h2>Core Concept: Collinearity and Perpendicularity</h2>
     <p>Complex numbers provide elegant conditions for determining whether three points are collinear (lie on the same straight line) or whether two lines are perpendicular. These conditions are fundamental to coordinate geometry in the complex plane.</p>
     
     <div class="operation-block">
      <p>
       For three distinct points A(α), B(β), C(γ):
      </p>
      <div class="case-block">
       <strong>Collinear:</strong><br>
       Points A, B, C are collinear if and only if
       <div class="theorem">
        $$
        \frac{\gamma - \alpha}{\beta - \alpha} \text{ is a } \color{green}{\text{real number}}
        $$
       </div>
      </div>
      
      <div class="case-block">
       <strong>Perpendicular:</strong><br>
       Lines AB and AC are perpendicular if and only if
       <div class="theorem">
        $$
        \frac{\gamma - \alpha}{\beta - \alpha} \text{ is a } \color{red}{\text{pure imaginary number}}
        $$
       </div>
      </div>
     </div>
     
     <div class="hint-block">
      <strong>
       Key Properties:
      </strong>
      <ul>
       <li><strong>Collinearity test:</strong> Imaginary part of ratio equals zero</li>
       <li><strong>Perpendicularity test:</strong> Real part of ratio equals zero</li>
       <li><strong>Complex ratio:</strong> (γ-α)/(β-α) gives relative position</li>
       <li><strong>Geometric interpretation:</strong> Vector relationships in complex plane</li>
       <li><strong>Area condition:</strong> Collinear points have zero area triangle</li>
       <li><strong>Dot product:</strong> Perpendicular vectors have zero dot product</li>
      </ul>
     </div>
    </div>

    <div class="interactive-demo">
      <h3>Interactive Geometry Tester</h3>
      <div style="margin: 20px 0;">
        <div style="margin-bottom: 15px;">
          <strong>Point A:</strong> <input type="text" id="pointA" value="0+0i" class="demo-input" placeholder="a+bi">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Point B:</strong> <input type="text" id="pointB" value="1+0i" class="demo-input" placeholder="a+bi">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Point C:</strong> <input type="text" id="pointC" value="2+0i" class="demo-input" placeholder="a+bi">
        </div>
      </div>
      <button onclick="testCollinearity()" class="demo-button">Test Collinearity</button>
      <button onclick="testPerpendicularity()" class="demo-button">Test Perpendicularity</button>
      <button onclick="calculateRatio()" class="demo-button">Show Complex Ratio</button>
      <button onclick="drawPoints()" class="demo-button">Visualize on Plane</button>
      <div class="demo-result" id="geometryResult"></div>
      <canvas id="collinearityCanvas" width="500" height="500" class="collinearity-canvas"></canvas>
    </div>

    <div class="section">
     <h2>Mathematical Foundation</h2>
     
     <div class="law-block">
      <div class="law-eq">Collinearity Condition</div>
      <div class="math">Points A, B, C are collinear iff C - A = k(B - A) for some real k</div>
      <div class="math">Then: (C - A)/(B - A) = k ∈ ℝ</div>
      <div class="math">So imaginary part of ratio equals zero</div>
      <div class="math">Im[(C - A)/(B - A)] = 0</div>
     </div>
     
     <div class="law-block">
      <div class="law-eq">Perpendicularity Condition</div>
      <div class="math">Lines AB ⊥ AC iff vectors AB · AC = 0</div>
      <div class="math">In complex form: Re[(B - A)·(C - A)*] = 0</div>
      <div class="math">Equivalent to: (C - A)/(B - A) is pure imaginary</div>
      <div class="math">Re[(C - A)/(B - A)] = 0</div>
     </div>
    </div>

    <div class="section">
      <h2>Worked Examples</h2>
      <div class="problem-item">
        <div class="problem-number">1</div>
        <div class="problem-content">
          <p>Test if points (0,0), (1,0), and (2,0) are collinear.</p>
          <button class="solution-button" onclick="toggleSolution(1)">Show Solution</button>
          <div class="solution-content" id="solution1">
            <div class="calculation-steps">
              <div class="calculation-step">A = 0+0i, B = 1+0i, C = 2+0i</div>
              <div class="calculation-step">Ratio: (C - A)/(B - A) = (2-0)/(1-0) = 2/1 = 2</div>
              <div class="calculation-step">2 is real, so points are collinear</div>
              <div class="calculation-step">Indeed, all points lie on the x-axis</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">2</div>
        <div class="problem-content">
          <p>Test if lines from (0,0) to (1,0) and (0,0) to (0,1) are perpendicular.</p>
          <button class="solution-button" onclick="toggleSolution(2)">Show Solution</button>
          <div class="solution-content" id="solution2">
            <div class="calculation-steps">
              <div class="calculation-step">A = 0+0i, B = 1+0i, C = 0+1i</div>
              <div class="calculation-step">Ratio: (C - A)/(B - A) = (0+1i)/(1+0i) = 1i = i</div>
              <div class="calculation-step">i is pure imaginary, so lines are perpendicular</div>
              <div class="calculation-step">Indeed, x-axis and y-axis are perpendicular</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">3</div>
        <div class="problem-content">
          <p>Find if points (1,1), (3,1), and (2,3) are collinear.</p>
          <button class="solution-button" onclick="toggleSolution(3)">Show Solution</button>
          <div class="solution-content" id="solution3">
            <div class="calculation-steps">
              <div class="calculation-step">A = 1+1i, B = 3+1i, C = 2+3i</div>
              <div class="calculation-step">B - A = (3+1i) - (1+1i) = 2+0i = 2</div>
              <div class="calculation-step">C - A = (2+3i) - (1+1i) = 1+2i</div>
              <div class="calculation-step">Ratio: (1+2i)/2 = 0.5 + i</div>
              <div class="calculation-step">0.5 + i is complex (not real), so points are not collinear</div>
              <div class="calculation-step">These points form a right triangle</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
     <h2>Applications and Importance</h2>
     <div class="law-block">
      <div class="law-eq">Geometric Applications</div>
      <ul style="color: white;">
        <li><strong>Triangle properties:</strong> Determine if three points form a right triangle</li>
        <li><strong>Line relationships:</strong> Test perpendicularity of lines in complex plane</li>
        <li><strong>Coordinate geometry:</strong> Verify geometric configurations</li>
        <li><strong>Computer graphics:</strong> Point alignment and perpendicularity tests</li>
        <li><strong>Surveying:</strong> Check alignment of points and perpendicularity</li>
        <li><strong>Physics:</strong> Force vector perpendicularity and equilibrium</li>
      </ul>
     </div>
    </div>

    <div class="key-takeaways">
      <h3>Key Takeaways</h3>
      <ul>
        <li>Collinear: (γ-α)/(β-α) is real (imaginary part = 0)</li>
        <li>Perpendicular: (γ-α)/(β-α) is pure imaginary (real part = 0)</li>
        <li>Complex ratio encodes both position and orientation information</li>
        <li>Real ratio means points lie on same line through A and B</li>
        <li>Pure imaginary ratio means right angle at vertex A</li>
        <li>Fundamental for geometric analysis in complex plane</li>
        <li>Combines algebraic and geometric reasoning elegantly</li>
      </ul>
    </div>
   </div>
  <script>
    let canvas = document.getElementById('collinearityCanvas');
    let ctx = canvas.getContext('2d');
    let currentPoints = {A: null, B: null, C: null};

    function parseComplex(str) {
      str = str.replace(/\s/g, '');
      let real = 0, imag = 0;
      
      if (!isNaN(str)) {
        real = parseFloat(str);
      } else if (str.endsWith('i')) {
        if (str === 'i') imag = 1;
        else if (str === '-i') imag = -1;
        else imag = parseFloat(str.slice(0, -1));
      } else {
        const parts = str.split('i');
        if (parts.length === 2) {
          const realPart = parts[0];
          if (realPart.includes('+')) {
            const realSplit = realPart.split('+');
            real = parseFloat(realSplit[0]);
            imag = parseFloat(parts[1] || '1');
          } else if (realPart.includes('-')) {
            const realSplit = realPart.split('-');
            if (realSplit[0] === '') {
              real = -parseFloat(realSplit[1]);
            } else {
              real = parseFloat(realSplit[0]);
            }
            imag = parseFloat(parts[1] || '1');
          } else {
            real = parseFloat(realPart);
            imag = parseFloat(parts[1] || '1');
          }
        }
      }
      
      return {real, imag};
    }

    function formatComplex(c) {
      if (c.imag === 0) return c.real.toString();
      if (c.real === 0) {
        if (c.imag === 1) return 'i';
        if (c.imag === -1) return '-i';
        return c.imag + 'i';
      }
      const sign = c.imag >= 0 ? '+' : '';
      const imagStr = c.imag === 1 ? 'i' : c.imag === -1 ? '-i' : c.imag + 'i';
      return c.real + sign + imagStr;
    }

    function testCollinearity() {
      try {
        const A = parseComplex(document.getElementById('pointA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        const vectorBA = {real: B.real - A.real, imag: B.imag - A.imag};
        const vectorCA = {real: C.real - A.real, imag: C.imag - A.imag};
        
        // Calculate ratio (C-A)/(B-A)
        const denomReal = vectorBA.real;
        const denomImag = vectorBA.imag;
        const denomMagSq = denomReal * denomReal + denomImag * denomImag;
        
        const ratioReal = (vectorCA.real * denomReal + vectorCA.imag * denomImag) / denomMagSq;
        const ratioImag = (vectorCA.imag * denomReal - vectorCA.real * denomImag) / denomMagSq;
        
        currentPoints = {A, B, C};
        
        const isCollinear = Math.abs(ratioImag) < 0.0001;
        
        document.getElementById('geometryResult').textContent = 
          `Collinearity Test:\n\n` +
          `Ratio (C-A)/(B-A) = ${ratioReal.toFixed(3)} + ${ratioImag.toFixed(3)}i\n` +
          `Imaginary part: ${ratioImag.toFixed(6)}\n` +
          `Result: ${isCollinear ? 'Points ARE collinear' : 'Points are NOT collinear'}\n` +
          `${isCollinear ? '✓ Imaginary part ≈ 0' : '✗ Imaginary part ≠ 0'}`;
        
        drawPoints();
      } catch (e) {
        document.getElementById('geometryResult').textContent = 'Error: Please check input format';
      }
    }

    function testPerpendicularity() {
      try {
        const A = parseComplex(document.getElementById('pointA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        const vectorBA = {real: B.real - A.real, imag: B.imag - A.imag};
        const vectorCA = {real: C.real - A.real, imag: C.imag - A.imag};
        
        // Calculate ratio (C-A)/(B-A)
        const denomReal = vectorBA.real;
        const denomImag = vectorBA.imag;
        const denomMagSq = denomReal * denomReal + denomImag * denomImag;
        
        const ratioReal = (vectorCA.real * denomReal + vectorCA.imag * denomImag) / denomMagSq;
        const ratioImag = (vectorCA.imag * denomReal - vectorCA.real * denomImag) / denomMagSq;
        
        const isPerpendicular = Math.abs(ratioReal) < 0.0001;
        
        document.getElementById('geometryResult').textContent = 
          `Perpendicularity Test:\n\n` +
          `Ratio (C-A)/(B-A) = ${ratioReal.toFixed(3)} + ${ratioImag.toFixed(3)}i\n` +
          `Real part: ${ratioReal.toFixed(6)}\n` +
          `Result: ${isPerpendicular ? 'Lines AB and AC ARE perpendicular' : 'Lines AB and AC are NOT perpendicular'}\n` +
          `${isPerpendicular ? '✓ Real part ≈ 0' : '✗ Real part ≠ 0'}`;
        
        drawPoints();
      } catch (e) {
        document.getElementById('geometryResult').textContent = 'Error: Please check input format';
      }
    }

    function calculateRatio() {
      try {
        const A = parseComplex(document.getElementById('pointA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        const vectorBA = {real: B.real - A.real, imag: B.imag - A.imag};
        const vectorCA = {real: C.real - A.real, imag: C.imag - A.imag};
        
        // Calculate ratio (C-A)/(B-A)
        const denomReal = vectorBA.real;
        const denomImag = vectorBA.imag;
        const denomMagSq = denomReal * denomReal + denomImag * denomImag;
        
        const ratioReal = (vectorCA.real * denomReal + vectorCA.imag * denomImag) / denomMagSq;
        const ratioImag = (vectorCA.imag * denomReal - vectorCA.real * denomImag) / denomMagSq;
        
        document.getElementById('geometryResult').textContent = 
          `Complex Ratio Analysis:\n\n` +
          `Vector B-A = ${formatComplex(vectorBA)}\n` +
          `Vector C-A = ${formatComplex(vectorCA)}\n` +
          `Ratio (C-A)/(B-A) = ${ratioReal.toFixed(3)} + ${ratioImag.toFixed(3)}i\n\n` +
          `Interpretation:\n` +
          `- Real part: ${ratioReal.toFixed(3)} (position along line AB)\n` +
          `- Imaginary part: ${ratioImag.toFixed(3)} (perpendicular distance)\n\n` +
          `Conditions:\n` +
          `- Collinear if imaginary part ≈ 0\n` +
          `- Perpendicular if real part ≈ 0`;
      } catch (e) {
        document.getElementById('geometryResult').textContent = 'Error: Please check input format';
      }
    }

    function drawPoints() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const scale = 30;
      
      // Draw axes
      ctx.strokeStyle = '#ccc';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(0, centerY);
      ctx.lineTo(canvas.width, centerY);
      ctx.moveTo(centerX, 0);
      ctx.lineTo(centerX, canvas.height);
      ctx.stroke();
      
      // Draw grid
      ctx.strokeStyle = '#f0f0f0';
      ctx.lineWidth = 0.5;
      for (let i = -10; i <= 10; i++) {
        const x = centerX + i * scale;
        const y = centerY + i * scale;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.moveTo(0, y);
        ctx.lineTo(canvas.width, y);
        ctx.stroke();
      }
      
      if (currentPoints.A && currentPoints.B && currentPoints.C) {
        drawPoint(currentPoints.A, 'A', '#e74c3c');
        drawPoint(currentPoints.B, 'B', '#3498db');
        drawPoint(currentPoints.C, 'C', '#27ae60');
        
        // Draw lines
        const Ax = centerX + currentPoints.A.real * scale;
        const Ay = centerY - currentPoints.A.imag * scale;
        const Bx = centerX + currentPoints.B.real * scale;
        const By = centerY - currentPoints.B.imag * scale;
        const Cx = centerX + currentPoints.C.real * scale;
        const Cy = centerY - currentPoints.C.imag * scale;
        
        // Line AB
        ctx.strokeStyle = '#3498db';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(Ax, Ay);
        ctx.lineTo(Bx, By);
        ctx.stroke();
        
        // Line AC
        ctx.strokeStyle = '#27ae60';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(Ax, Ay);
        ctx.lineTo(Cx, Cy);
        ctx.stroke();
        
        // Check collinearity and draw appropriate visual
        const vectorBA = {real: currentPoints.B.real - currentPoints.A.real, imag: currentPoints.B.imag - currentPoints.A.imag};
        const vectorCA = {real: currentPoints.C.real - currentPoints.A.real, imag: currentPoints.C.imag - currentPoints.A.imag};
        
        const denomMagSq = vectorBA.real * vectorBA.real + vectorBA.imag * vectorBA.imag;
        const ratioImag = (vectorCA.imag * vectorBA.real - vectorCA.real * vectorBA.imag) / denomMagSq;
        
        if (Math.abs(ratioImag) < 0.01) {
          // Collinear - draw line through all points
          ctx.strokeStyle = '#e67e22';
          ctx.lineWidth = 3;
          ctx.setLineDash([5, 5]);
          ctx.beginPath();
          ctx.moveTo(Ax, Ay);
          ctx.lineTo(Bx, By);
          ctx.lineTo(Cx, Cy);
          ctx.stroke();
          ctx.setLineDash([]);
        }
      }
    }

    function drawPoint(point, label, color) {
      const x = canvas.width / 2 + point.real * 30;
      const y = canvas.height / 2 - point.imag * 30;
      
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, 6, 0, 2 * Math.PI);
      ctx.fill();
      
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 12px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(label, x, y + 4);
    }

    function toggleSolution(problemNumber) {
      const solution = document.getElementById(`solution${problemNumber}`);
      if (solution.style.display === 'block') {
        solution.style.display = 'none';
      } else {
        solution.style.display = 'block';
      }
    }

    // Initialize
    testCollinearity();

    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "\\(", right: "\\)", display: false},
                {left: "\\[", right: "\\]", display: true}
            ],
            throwOnError: false
        });
    });
  </script>
   </div>
  </div>
 </body>
</html>
