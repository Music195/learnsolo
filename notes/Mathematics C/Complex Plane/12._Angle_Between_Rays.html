<!DOCTYPE html>
<!-- tags: Complex Plane -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Angle Between Rays
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
    /* Enhanced text containment and readability */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }

    .main-content {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 15px;
      padding: 30px;
      margin: 20px 0;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .section {
      margin-bottom: 40px;
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .section h2 {
      color: #2c3e50;
      border-bottom: 3px solid #3498db;
      padding-bottom: 10px;
      margin-bottom: 20px;
      font-size: 1.8em;
      font-weight: 600;
    }

    .section h3 {
      color: #34495e;
      margin-bottom: 15px;
      font-size: 1.4em;
      font-weight: 500;
    }

    /* Law blocks with gradient backgrounds */
    .law-block {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .law-eq {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .law-block .math {
      margin: 8px 0;
      font-size: 1.1em;
      line-height: 1.6;
    }

    /* Operation blocks */
    .operation-block {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(245,87,108,0.3);
    }

    .operation-block .theorem {
      background: rgba(255,255,255,0.9);
      color: #333;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.3em;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Hint blocks */
    .hint-block {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(79,172,254,0.3);
    }

    .hint-block strong {
      font-size: 1.2em;
      display: block;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    /* Interactive demo styling */
    .interactive-demo {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 4px 15px rgba(168,237,234,0.3);
    }

    .interactive-demo h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.5em;
    }

    .demo-input {
      width: 80px;
      padding: 8px 12px;
      border: 2px solid #3498db;
      border-radius: 6px;
      font-size: 1em;
      margin: 0 5px;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .demo-input:focus {
      outline: none;
      border-color: #2980b9;
      box-shadow: 0 0 5px rgba(52,152,219,0.5);
    }

    .demo-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(102,126,234,0.3);
    }

    .demo-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102,126,234,0.4);
    }

    .demo-result {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 1em;
      color: #333;
      white-space: pre-line;
      border: 1px solid #ddd;
      min-height: 40px;
    }

    /* Problem items */
    .problem-item {
      background: rgba(255,255,255,0.95);
      border-radius: 10px;
      padding: 20px;
      margin: 15px 0;
      border-left: 5px solid #3498db;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .problem-number {
      display: inline-block;
      background: #3498db;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      margin-right: 15px;
      vertical-align: top;
    }

    .problem-content {
      display: inline-block;
      width: calc(100% - 50px);
      vertical-align: top;
    }

    .solution-button {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      color: #333;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      margin: 10px 0;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(255,154,158,0.3);
    }

    .solution-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 12px rgba(255,154,158,0.4);
    }

    .solution-content {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: rgba(240,240,240,0.8);
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .calculation-steps {
      margin: 10px 0;
    }

    .calculation-step {
      margin: 8px 0;
      padding: 8px 12px;
      background: rgba(255,255,255,0.7);
      border-radius: 6px;
      border-left: 3px solid #3498db;
    }

    /* Key takeaways */
    .key-takeaways {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .key-takeaways h3 {
      text-align: center;
      font-size: 1.5em;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .key-takeaways ul {
      list-style: none;
      padding: 0;
    }

    .key-takeaways li {
      margin: 10px 0;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    .key-takeaways li:last-child {
      border-bottom: none;
    }

    /* Enhanced canvas styling */
    .angle-img {
      display: block;
      margin: 20px auto;
      border: 2px solid #3498db;
      border-radius: 8px;
      background: white;
      box-shadow: 0 4px 15px rgba(52,152,219,0.2);
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      .main-content {
        padding: 20px;
      }

      .section {
        padding: 15px;
      }

      .interactive-demo {
        padding: 15px;
      }

      .demo-input {
        width: 60px;
        margin: 5px;
      }

      .demo-button {
        display: block;
        width: 100%;
        margin: 5px 0;
      }

      .problem-content {
        width: calc(100% - 40px);
      }
    }

    /* MathJax styling */
    .mjx-chtml {
      font-size: 1.1em !important;
    }

    /* Formula boxes */
    .formula-box {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Property lists */
    .property-list {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      color: #333;
    }

    .property-list li {
      margin: 8px 0;
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }

    .property-list li:last-child {
      border-bottom: none;
    }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Complex Plane">
   Angle Between Rays
  </div>
  <div class="container">
   <div class="main-content">
    <div class="section">
     <h2>Core Concept: Angle Between Rays</h2>
     <p>The angle between two rays emanating from a common point can be found using complex numbers. This provides a powerful tool for geometric calculations and is fundamental to understanding angular relationships in the complex plane.</p>
     
     <div class="operation-block">
      <p>
       For three distinct points A(α), B(β), C(γ), the angle θ from ray AB to ray AC is:
      </p>
      <div class="theorem">
       $$
        \theta = \arg\left( \frac{\gamma - \alpha}{\beta - \alpha} \right)
       $$
       <br><br>
       $$
        \theta = \tan^{-1}\left( \frac{\Im\left( \frac{\gamma - \alpha}{\beta - \alpha} \right)}{\Re\left( \frac{\gamma - \alpha}{\beta - \alpha} \right)} \right)
       $$
      </div>
     </div>
     
     <div class="hint-block">
      <strong>
       Key Properties:
      </strong>
      <ul>
       <li><strong>Argument function:</strong> arg(z) gives the angle of complex number z</li>
       <li><strong>Ratio of vectors:</strong> (γ-α)/(β-α) gives relative position</li>
       <li><strong>Principal value:</strong> Result is between -π and π radians</li>
       <li><strong>Orientation:</strong> Positive angles are counterclockwise</li>
       <li><strong>Complex division:</strong> Uses complex arithmetic for angle calculation</li>
       <li><strong>Geometric interpretation:</strong> Angle at vertex A between points B and C</li>
      </ul>
     </div>
    </div>

    <div class="interactive-demo">
      <h3>Interactive Angle Calculator</h3>
      <div style="margin: 20px 0;">
        <div style="margin-bottom: 15px;">
          <strong>Vertex A:</strong> <input type="text" id="vertexA" value="0+0i" class="demo-input" placeholder="a+bi">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Point B (first ray):</strong> <input type="text" id="pointB" value="1+0i" class="demo-input" placeholder="a+bi">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Point C (second ray):</strong> <input type="text" id="pointC" value="0+1i" class="demo-input" placeholder="a+bi">
        </div>
      </div>
      <button onclick="calculateAngle()" class="demo-button">Calculate Angle ∠BAC</button>
      <button onclick="showComponents()" class="demo-button">Show Vector Components</button>
      <button onclick="findDirection()" class="demo-button">Determine Direction</button>
      <button onclick="drawAngle()" class="demo-button">Visualize on Plane</button>
      <div class="demo-result" id="angleResult"></div>
      <canvas id="angleCanvas" width="500" height="500" class="angle-img"></canvas>
    </div>

    <div class="section">
     <h2>Mathematical Foundation</h2>
     
     <div class="law-block">
      <div class="law-eq">Derivation of Angle Formula</div>
      <div class="math">Consider rays AB and AC from common vertex A</div>
      <div class="math">Vector AB = β - α, Vector AC = γ - α</div>
      <div class="math">Angle between vectors: arg((γ-α)/(β-α))</div>
      <div class="math">This gives angle from AB to AC</div>
      <div class="math">Complex division preserves angular relationships</div>
      <div class="math">Result is the argument of the quotient</div>
     </div>
     
     <div class="law-block">
      <div class="law-eq">Angle Properties and Special Cases</div>
      <ul style="color: white;">
        <li><strong>Right angle:</strong> θ = π/2 or -π/2 radians (90° or -90°)</li>
        <div class="math">arg((γ-α)/(β-α)) = ±π/2</div>
        <li><strong>Straight angle:</strong> θ = π or -π radians (180° or -180°)</li>
        <div class="math">Points are collinear with A between B and C</div>
        <li><strong>Zero angle:</strong> θ = 0, points B and C coincide</li>
        <li><strong>Acute/obtuse:</strong> |θ| < π/2 or |θ| > π/2</li>
        <li><strong>Interior angle:</strong> Smallest angle between rays</li>
        <div class="math">Use min(|θ|, 2π - |θ|) for interior angle</div>
        <li><strong>Complex argument:</strong> atan2(Im, Re) for principal value</li>
      </ul>
     </div>
    </div>

    <div class="section">
      <h2>Worked Examples</h2>
      <div class="problem-item">
        <div class="problem-number">1</div>
        <div class="problem-content">
          <p>Find the angle at A(0,0) between points B(1,0) and C(0,1).</p>
          <button class="solution-button" onclick="toggleSolution(1)">Show Solution</button>
          <div class="solution-content" id="solution1">
            <div class="calculation-steps">
              <div class="calculation-step">A = 0+0i, B = 1+0i, C = 0+1i</div>
              <div class="calculation-step">Vector AB = (1+0i) - (0+0i) = 1+0i</div>
              <div class="calculation-step">Vector AC = (0+1i) - (0+0i) = 0+1i</div>
              <div class="calculation-step">Ratio AC/AB = (0+1i)/(1+0i) = 0+1i = i</div>
              <div class="calculation-step">arg(i) = π/2 radians = 90°</div>
              <div class="calculation-step">The angle ∠BAC is 90°</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">2</div>
        <div class="problem-content">
          <p>Find the angle at A(1,1) between B(2,1) and C(1,2).</p>
          <button class="solution-button" onclick="toggleSolution(2)">Show Solution</button>
          <div class="solution-content" id="solution2">
            <div class="calculation-steps">
              <div class="calculation-step">A = 1+1i, B = 2+1i, C = 1+2i</div>
              <div class="calculation-step">Vector AB = (2+1i) - (1+1i) = 1+0i</div>
              <div class="calculation-step">Vector AC = (1+2i) - (1+1i) = 0+1i</div>
              <div class="calculation-step">Ratio AC/AB = (0+1i)/(1+0i) = 0+1i = i</div>
              <div class="calculation-step">arg(i) = π/2 radians = 90°</div>
              <div class="calculation-step">The angle ∠BAC is 90°</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">3</div>
        <div class="problem-content">
          <p>Find the angle at A(0,0) between B(1,1) and C(-1,1).</p>
          <button class="solution-button" onclick="toggleSolution(3)">Show Solution</button>
          <div class="solution-content" id="solution3">
            <div class="calculation-steps">
              <div class="calculation-step">A = 0+0i, B = 1+1i, C = -1+1i</div>
              <div class="calculation-step">Vector AB = 1+1i, Vector AC = -1+1i</div>
              <div class="calculation-step">Ratio AC/AB = (-1+1i)/(1+1i)</div>
              <div class="calculation-step">Multiply numerator and denominator by conjugate of denominator</div>
              <div class="calculation-step">= [(-1+1i)(1-1i)]/[(1+1i)(1-1i)] = (-1+1i-1i+i²)/(1+1)</div>
              <div class="calculation-step">= (-1+1i-1i-1)/(2) = (-2)/(2) = -1</div>
              <div class="calculation-step">arg(-1) = π radians = 180°</div>
              <div class="calculation-step">The angle ∠BAC is 180°</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
     <h2>Applications and Importance</h2>
     <div class="law-block">
      <div class="law-eq">Geometric Applications</div>
      <ul style="color: white;">
        <li><strong>Triangle angles:</strong> Calculate interior angles of triangles</li>
        <li><strong>Polygon properties:</strong> Regular polygon angle calculations</li>
        <li><strong>Navigation:</strong> Bearing and direction calculations</li>
        <li><strong>Computer graphics:</strong> 2D geometric transformations</li>
        <li><strong>Surveying:</strong> Angle measurements between landmarks</li>
        <li><strong>Physics:</strong> Force vector angles and torque calculations</li>
      </ul>
     </div>
    </div>

    <div class="key-takeaways">
      <h3>Key Takeaways</h3>
      <ul>
        <li>Angle θ = arg((γ-α)/(β-α)) gives angle from ray AB to ray AC</li>
        <li>Uses complex division to find relative angular position</li>
        <li>Result is principal argument between -π and π radians</li>
        <li>Positive angles measured counterclockwise from first ray</li>
        <li>Zero when points are collinear with C on AB</li>
        <li>π when points are collinear with A between B and C</li>
        <li>Fundamental for geometric calculations in complex plane</li>
      </ul>
    </div>
   </div>
  </div>

  <script>
    let canvas = document.getElementById('angleCanvas');
    let ctx = canvas.getContext('2d');
    let currentPoints = {A: null, B: null, C: null};

    function parseComplex(str) {
      str = str.replace(/\s/g, '');
      let real = 0, imag = 0;
      
      if (!isNaN(str)) {
        real = parseFloat(str);
      } else if (str.endsWith('i')) {
        if (str === 'i') imag = 1;
        else if (str === '-i') imag = -1;
        else imag = parseFloat(str.slice(0, -1));
      } else {
        const parts = str.split('i');
        if (parts.length === 2) {
          const realPart = parts[0];
          if (realPart.includes('+')) {
            const realSplit = realPart.split('+');
            real = parseFloat(realSplit[0]);
            imag = parseFloat(parts[1] || '1');
          } else if (realPart.includes('-')) {
            const realSplit = realPart.split('-');
            if (realSplit[0] === '') {
              real = -parseFloat(realSplit[1]);
            } else {
              real = parseFloat(realSplit[0]);
            }
            imag = parseFloat(parts[1] || '1');
          } else {
            real = parseFloat(realPart);
            imag = parseFloat(parts[1] || '1');
          }
        }
      }
      
      return {real, imag};
    }

    function formatComplex(c) {
      if (c.imag === 0) return c.real.toString();
      if (c.real === 0) {
        if (c.imag === 1) return 'i';
        if (c.imag === -1) return '-i';
        return c.imag + 'i';
      }
      const sign = c.imag >= 0 ? '+' : '';
      const imagStr = c.imag === 1 ? 'i' : c.imag === -1 ? '-i' : c.imag + 'i';
      return c.real + sign + imagStr;
    }

    function calculateAngle() {
      try {
        const A = parseComplex(document.getElementById('vertexA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        // Vector AB = B - A
        const vectorAB = {real: B.real - A.real, imag: B.imag - A.imag};
        // Vector AC = C - A
        const vectorAC = {real: C.real - A.real, imag: C.imag - A.imag};
        
        // Ratio AC/AB
        const ratioReal = (vectorAC.real * vectorAB.real + vectorAC.imag * vectorAB.imag) / (vectorAB.real * vectorAB.real + vectorAB.imag * vectorAB.imag);
        const ratioImag = (vectorAC.imag * vectorAB.real - vectorAC.real * vectorAB.imag) / (vectorAB.real * vectorAB.real + vectorAB.imag * vectorAB.imag);
        
        // Calculate angle using atan2
        const angle = Math.atan2(ratioImag, ratioReal);
        const angleDegrees = (angle * 180 / Math.PI).toFixed(2);
        
        currentPoints = {A, B, C};
        
        document.getElementById('angleResult').textContent = 
          `Angle at ${formatComplex(A)} between points ${formatComplex(B)} and ${formatComplex(C)}:\n\n` +
          `Vector AB = ${formatComplex(vectorAB)}\n` +
          `Vector AC = ${formatComplex(vectorAC)}\n` +
          `Ratio AC/AB = ${ratioReal.toFixed(3)} + ${ratioImag.toFixed(3)}i\n` +
          `Angle θ = ${angle.toFixed(3)} radians = ${angleDegrees}°`;
        
        drawAngle();
      } catch (e) {
        document.getElementById('angleResult').textContent = 'Error: Please check input format';
      }
    }

    function showComponents() {
      try {
        const A = parseComplex(document.getElementById('vertexA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        const vectorAB = {real: B.real - A.real, imag: B.imag - A.imag};
        const vectorAC = {real: C.real - A.real, imag: C.imag - A.imag};
        
        const magAB = Math.sqrt(vectorAB.real * vectorAB.real + vectorAB.imag * vectorAB.imag);
        const magAC = Math.sqrt(vectorAC.real * vectorAC.real + vectorAC.imag * vectorAC.imag);
        
        const argAB = Math.atan2(vectorAB.imag, vectorAB.real);
        const argAC = Math.atan2(vectorAC.imag, vectorAC.real);
        
        document.getElementById('angleResult').textContent = 
          `Vector Components:\n\n` +
          `AB: ${formatComplex(vectorAB)}\n` +
          `  Magnitude: ${magAB.toFixed(3)}\n` +
          `  Argument: ${(argAB * 180 / Math.PI).toFixed(2)}°\n\n` +
          `AC: ${formatComplex(vectorAC)}\n` +
          `  Magnitude: ${magAC.toFixed(3)}\n` +
          `  Argument: ${(argAC * 180 / Math.PI).toFixed(2)}°\n\n` +
          `Angle difference: ${(argAC - argAB).toFixed(3)} radians = ${((argAC - argAB) * 180 / Math.PI).toFixed(2)}°`;
      } catch (e) {
        document.getElementById('angleResult').textContent = 'Error: Please check input format';
      }
    }

    function findDirection() {
      try {
        const A = parseComplex(document.getElementById('vertexA').value);
        const B = parseComplex(document.getElementById('pointB').value);
        const C = parseComplex(document.getElementById('pointC').value);
        
        const vectorAB = {real: B.real - A.real, imag: B.imag - A.imag};
        const vectorAC = {real: C.real - A.real, imag: C.imag - A.imag};
        
        // Cross product to determine direction
        const cross = vectorAB.real * vectorAC.imag - vectorAB.imag * vectorAC.real;
        
        let direction = '';
        if (Math.abs(cross) < 0.001) {
          direction = 'Points are collinear';
        } else if (cross > 0) {
          direction = 'Counterclockwise (positive) rotation from AB to AC';
        } else {
          direction = 'Clockwise (negative) rotation from AB to AC';
        }
        
        document.getElementById('angleResult').textContent = 
          `Direction Analysis:\n\n` +
          `Cross product (AB × AC): ${cross.toFixed(3)}\n` +
          `Direction: ${direction}`;
      } catch (e) {
        document.getElementById('angleResult').textContent = 'Error: Please check input format';
      }
    }

    function drawAngle() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const scale = 30;
      
      // Draw axes
      ctx.strokeStyle = '#ccc';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(0, centerY);
      ctx.lineTo(canvas.width, centerY);
      ctx.moveTo(centerX, 0);
      ctx.lineTo(centerX, canvas.height);
      ctx.stroke();
      
      // Draw grid
      ctx.strokeStyle = '#f0f0f0';
      ctx.lineWidth = 0.5;
      for (let i = -10; i <= 10; i++) {
        const x = centerX + i * scale;
        const y = centerY + i * scale;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.moveTo(0, y);
        ctx.lineTo(canvas.width, y);
        ctx.stroke();
      }
      
      if (currentPoints.A && currentPoints.B && currentPoints.C) {
        drawPoint(currentPoints.A, 'A', '#e74c3c');
        drawPoint(currentPoints.B, 'B', '#3498db');
        drawPoint(currentPoints.C, 'C', '#27ae60');
        
        // Draw rays
        const Ax = centerX + currentPoints.A.real * scale;
        const Ay = centerY - currentPoints.A.imag * scale;
        const Bx = centerX + currentPoints.B.real * scale;
        const By = centerY - currentPoints.B.imag * scale;
        const Cx = centerX + currentPoints.C.real * scale;
        const Cy = centerY - currentPoints.C.imag * scale;
        
        // Ray AB
        ctx.strokeStyle = '#3498db';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(Ax, Ay);
        ctx.lineTo(Bx, By);
        ctx.stroke();
        
        // Ray AC
        ctx.strokeStyle = '#27ae60';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(Ax, Ay);
        ctx.lineTo(Cx, Cy);
        ctx.stroke();
        
        // Draw angle arc
        const angleAB = Math.atan2(By - Ay, Bx - Ax);
        const angleAC = Math.atan2(Cy - Ay, Cx - Ax);
        
        const radius = 40;
        const startAngle = Math.min(angleAB, angleAC);
        const endAngle = Math.max(angleAB, angleAC);
        
        ctx.strokeStyle = '#e67e22';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.arc(Ax, Ay, radius, startAngle, endAngle, false);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // Label angle
        const midAngle = (startAngle + endAngle) / 2;
        const labelX = Ax + (radius + 20) * Math.cos(midAngle);
        const labelY = Ay + (radius + 20) * Math.sin(midAngle);
        ctx.fillStyle = '#e67e22';
        ctx.font = 'bold 14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('θ', labelX, labelY);
      }
    }

    function drawPoint(point, label, color) {
      const x = canvas.width / 2 + point.real * 30;
      const y = canvas.height / 2 - point.imag * 30;
      
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, 6, 0, 2 * Math.PI);
      ctx.fill();
      
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 12px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(label, x, y + 4);
    }

    function toggleSolution(problemNumber) {
      const solution = document.getElementById(`solution${problemNumber}`);
      if (solution.style.display === 'block') {
        solution.style.display = 'none';
      } else {
        solution.style.display = 'block';
      }
    }

    // Initialize
    calculateAngle();

    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "\\(", right: "\\)", display: false},
                {left: "\\[", right: "\\]", display: true}
            ],
            throwOnError: false
        });
    });
  </script>
 </body>
</html>
