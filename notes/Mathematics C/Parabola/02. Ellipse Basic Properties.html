<!DOCTYPE html>
<!-- tags: Ellipse, Hyperbola -->
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Ellipse: Basic Properties
  </title>
  <script>
   MathJax = {
            tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
            svg: {fontCache: 'global'}
        };
  </script>
  <script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <link href="/static/notes_style.css" rel="stylesheet"/>
  <style>
    /* Enhanced text containment and readability */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }

    .main-content {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 15px;
      padding: 30px;
      margin: 20px 0;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .section {
      margin-bottom: 40px;
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .section h2 {
      color: #2c3e50;
      border-bottom: 3px solid #3498db;
      padding-bottom: 10px;
      margin-bottom: 20px;
      font-size: 1.8em;
      font-weight: 600;
    }

    .section h3 {
      color: #34495e;
      margin-bottom: 15px;
      font-size: 1.4em;
      font-weight: 500;
    }

    /* Law blocks with gradient backgrounds */
    .law-block {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .law-eq {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .law-block .math {
      margin: 8px 0;
      font-size: 1.1em;
      line-height: 1.6;
    }

    /* Operation blocks */
    .operation-block {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(245,87,108,0.3);
    }

    .operation-block .formula {
      background: rgba(255,255,255,0.9);
      color: #333;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.3em;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Hint blocks */
    .hint-block {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(79,172,254,0.3);
    }

    .hint-block strong {
      font-size: 1.2em;
      display: block;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    /* Interactive demo styling */
    .interactive-demo {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 4px 15px rgba(168,237,234,0.3);
    }

    .interactive-demo h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.5em;
    }

    .demo-input {
      width: 80px;
      padding: 8px 12px;
      border: 2px solid #3498db;
      border-radius: 6px;
      font-size: 1em;
      margin: 0 5px;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .demo-input:focus {
      outline: none;
      border-color: #2980b9;
      box-shadow: 0 0 5px rgba(52,152,219,0.5);
    }

    .demo-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(102,126,234,0.3);
    }

    .demo-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102,126,234,0.4);
    }

    .demo-result {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 1em;
      color: #333;
      white-space: pre-line;
      border: 1px solid #ddd;
      min-height: 40px;
    }

    /* Problem items */
    .problem-item {
      background: rgba(255,255,255,0.95);
      border-radius: 10px;
      padding: 20px;
      margin: 15px 0;
      border-left: 5px solid #3498db;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .problem-number {
      display: inline-block;
      background: #3498db;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      margin-right: 15px;
      vertical-align: top;
    }

    .problem-content {
      display: inline-block;
      width: calc(100% - 50px);
      vertical-align: top;
    }

    .solution-button {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      color: #333;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      margin: 10px 0;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(255,154,158,0.3);
    }

    .solution-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 12px rgba(255,154,158,0.4);
    }

    .solution-content {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: rgba(240,240,240,0.8);
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .calculation-steps {
      margin: 10px 0;
    }

    .calculation-step {
      margin: 8px 0;
      padding: 8px 12px;
      background: rgba(255,255,255,0.7);
      border-radius: 6px;
      border-left: 3px solid #3498db;
    }

    /* Key takeaways */
    .key-takeaways {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      padding: 25px;
      margin: 25px 0;
      color: white;
      box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .key-takeaways h3 {
      text-align: center;
      font-size: 1.5em;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 10px;
    }

    .key-takeaways ul {
      list-style: none;
      padding: 0;
    }

    .key-takeaways li {
      margin: 10px 0;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    .key-takeaways li:last-child {
      border-bottom: none;
    }

    /* Enhanced canvas styling */
    .ellipse-canvas {
      display: block;
      margin: 20px auto;
      border: 2px solid #3498db;
      border-radius: 8px;
      background: white;
      box-shadow: 0 4px 15px rgba(52,152,219,0.2);
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      .main-content {
        padding: 20px;
      }

      .section {
        padding: 15px;
      }

      .interactive-demo {
        padding: 15px;
      }

      .demo-input {
        width: 60px;
        margin: 5px;
      }

      .demo-button {
        display: block;
        width: 100%;
        margin: 5px 0;
      }

      .problem-content {
        width: calc(100% - 40px);
      }
    }

    /* MathJax styling */
    .mjx-chtml {
      font-size: 1.1em !important;
    }

    /* Formula boxes */
    .formula-box {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Property lists */
    .property-list {
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      color: #333;
    }

    .property-list li {
      margin: 8px 0;
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }

    .property-list li:last-child {
      border-bottom: none;
    }

    /* Special styling for highlights */
    .highlight {
      background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
      color: #333;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: bold;
    }
  </style>
 </head>
 <body>
  <div class="fancy-title" data-topic="Ellipse, Hyperbola">
   Ellipse: Basic Properties
  </div>
  <div class="container">
   <div class="main-content">
    <div class="section">
     <h2>Core Concept: Ellipse</h2>
     <p>An ellipse is the set of all points in a plane such that the sum of the distances to two fixed points (foci) is constant. It is one of the four conic sections and appears in many natural phenomena and engineering applications.</p>
     
     <div class="operation-block">
      <div class="formula">
       Standard Equation: \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \quad (a > b > 0) \)
      </div>
      <div class="property-list">
       <ul>
        <li><strong>Center:</strong> Origin (0,0)</li>
        <li><strong>Foci:</strong> (±c, 0) where c = √(a² - b²)</li>
        <li><strong>Major axis length:</strong> 2a</li>
        <li><strong>Minor axis length:</strong> 2b</li>
        <li><strong>Vertices:</strong> (±a, 0) and (0, ±b)</li>
        <li><strong>Eccentricity:</strong> e = c/a (0 < e < 1)</li>
        <li><strong>Sum of focal distances:</strong> 2a (constant)</li>
       </ul>
      </div>
     </div>
     
     <div class="hint-block">
      <strong>Fundamental Property</strong>
      <p>For any point P on the ellipse, the sum of distances to the two foci equals 2a.</p>
      <div class="math">PF₁ + PF₂ = 2a (constant)</div>
      <div class="math">Distance between foci: 2c = 2√(a² - b²)</div>
     </div>
    </div>

    <div class="interactive-demo">
      <h3>Interactive Ellipse Explorer</h3>
      <div style="margin: 20px 0;">
        <div style="margin-bottom: 15px;">
          <strong>Semi-major axis a:</strong> <input type="number" id="semiMajor" value="5" step="0.1" class="demo-input" min="1" max="10">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Semi-minor axis b:</strong> <input type="number" id="semiMinor" value="3" step="0.1" class="demo-input" min="0.1" max="10">
        </div>
        <div style="margin-bottom: 15px;">
          <strong>Test point (x,y):</strong> 
          <input type="number" id="testX" value="3" step="0.1" class="demo-input">
          <input type="number" id="testY" value="2" step="0.1" class="demo-input">
        </div>
      </div>
      <button onclick="updateEllipse()" class="demo-button">Update Ellipse</button>
      <button onclick="testPoint()" class="demo-button">Test Point</button>
      <button onclick="showProperties()" class="demo-button">Show Properties</button>
      <button onclick="resetCanvas()" class="demo-button">Reset View</button>
      <div class="demo-result" id="ellipseResult"></div>
      <canvas id="ellipse-canvas" width="500" height="400" class="ellipse-canvas"></canvas>
    </div>

    <div class="section">
     <h2>Mathematical Foundation</h2>
     
     <div class="law-block">
      <div class="law-eq">Focal Distance Property</div>
      <div class="math">For point P(x,y) on ellipse: PF₁ + PF₂ = 2a</div>
      <div class="math">F₁(-c,0), F₂(c,0), c = √(a² - b²)</div>
      <div class="math">Distance PF₁ = √[(x+c)² + y²]</div>
      <div class="math">Distance PF₂ = √[(x-c)² + y²]</div>
      <div class="math">Sum = 2a ⇒ equation: x²/a² + y²/b² = 1</div>
     </div>
     
     <div class="law-block">
      <div class="law-eq">Eccentricity and Shape</div>
      <div class="math">Eccentricity: e = c/a = √(1 - b²/a²)</div>
      <div class="math">Range: 0 < e < 1 (circle when e=0)</div>
      <div class="math">e close to 0: nearly circular</div>
      <div class="math">e close to 1: highly elongated</div>
      <div class="math">Linear eccentricity: c = ae</div>
     </div>
    </div>

    <div class="section">
      <h2>Worked Examples</h2>
      <div class="problem-item">
        <div class="problem-number">1</div>
        <div class="problem-content">
          <p>Find the foci, eccentricity, and length of latus rectum of ellipse x²/25 + y²/16 = 1.</p>
          <button class="solution-button" onclick="toggleSolution(1)">Show Solution</button>
          <div class="solution-content" id="solution1">
            <div class="calculation-steps">
              <div class="calculation-step">Equation: x²/25 + y²/16 = 1</div>
              <div class="calculation-step">a² = 25, b² = 16 ⇒ a = 5, b = 4</div>
              <div class="calculation-step">c = √(a² - b²) = √(25 - 16) = √9 = 3</div>
              <div class="calculation-step">Foci: (±3, 0)</div>
              <div class="calculation-step">Eccentricity: e = c/a = 3/5 = 0.6</div>
              <div class="calculation-step">Latus rectum length: 2b²/a = 2×16/5 = 32/5 = 6.4</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">2</div>
        <div class="problem-content">
          <p>Find the equation of ellipse with foci (0,±2) and major axis 8.</p>
          <button class="solution-button" onclick="toggleSolution(2)">Show Solution</button>
          <div class="solution-content" id="solution2">
            <div class="calculation-steps">
              <div class="calculation-step">Foci on y-axis: (0, ±2) ⇒ c = 2</div>
              <div class="calculation-step">Major axis = 2a = 8 ⇒ a = 4</div>
              <div class="calculation-step">b² = a² - c² = 16 - 4 = 12</div>
              <div class="calculation-step">Equation: x²/12 + y²/16 = 1</div>
              <div class="calculation-step">Eccentricity: e = c/a = 2/4 = 0.5</div>
            </div>
          </div>
        </div>
      </div>

      <div class="problem-item">
        <div class="problem-number">3</div>
        <div class="problem-content">
          <p>Test if point (3,2) lies on ellipse x²/9 + y²/4 = 1.</p>
          <button class="solution-button" onclick="toggleSolution(3)">Show Solution</button>
          <div class="solution-content" id="solution3">
            <div class="calculation-steps">
              <div class="calculation-step">Point: (3,2), Equation: x²/9 + y²/4 = 1</div>
              <div class="calculation-step">Left side: 9/9 + 4/4 = 1 + 1 = 2</div>
              <div class="calculation-step">Right side: 1</div>
              <div class="calculation-step">2 > 1, so point lies outside the ellipse</div>
              <div class="calculation-step">Distance to foci: F₁(-√5,0), F₂(√5,0)</div>
              <div class="calculation-step">PF₁ + PF₂ = √[(3+√5)²+4] + √[(3-√5)²+4] ≈ 6.65 > 2a = 6</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
     <h2>Applications and Importance</h2>
     <div class="law-block">
      <div class="law-eq">Real-World Applications</div>
      <ul style="color: white;">
        <li><strong>Astronomy:</strong> Planetary orbits are elliptical</li>
        <li><strong>Physics:</strong> Elliptical reflectors and lenses</li>
        <li><strong>Engineering:</strong> Whispering galleries, acoustics</li>
        <li><strong>Architecture:</strong> Elliptical arches and domes</li>
        <li><strong>Medicine:</strong> Elliptical radiation patterns</li>
        <li><strong>Statistics:</strong> Confidence ellipses in data analysis</li>
      </ul>
     </div>
    </div>

    <div class="key-takeaways">
      <h3>Key Takeaways</h3>
      <ul>
        <li>Ellipse: set of points where PF₁ + PF₂ = 2a (constant)</li>
        <li>Standard form x²/a² + y²/b² = 1, a ≥ b</li>
        <li>Foci at (±c, 0), c = √(a² - b²)</li>
        <li>Eccentricity e = c/a ranges from 0 to 1</li>
        <li>Major axis 2a, minor axis 2b</li>
        <li>Latus rectum length 2b²/a</li>
        <li>Sum of focal distances is constant</li>
      </ul>
    </div>
   </div>
  <script>
    let canvas = document.getElementById('ellipse-canvas');
    let ctx = canvas.getContext('2d');
    let currentA = 5, currentB = 3;
    let testPointX = 3, testPointY = 2;

    function updateEllipse() {
      currentA = parseFloat(document.getElementById('semiMajor').value);
      currentB = parseFloat(document.getElementById('semiMinor').value);
      
      if (isNaN(currentA) || isNaN(currentB) || currentA <= 0 || currentB <= 0 || currentA < currentB) {
        document.getElementById('ellipseResult').textContent = 'Error: Ensure a > b > 0';
        return;
      }
      drawEllipse();
      document.getElementById('ellipseResult').textContent = `Ellipse updated: x²/${currentA}² + y²/${currentB}² = 1`;
    }

    function testPoint() {
      testPointX = parseFloat(document.getElementById('testX').value);
      testPointY = parseFloat(document.getElementById('testY').value);
      
      if (isNaN(testPointX) || isNaN(testPointY)) {
        document.getElementById('ellipseResult').textContent = 'Error: Invalid point coordinates';
        return;
      }

      const leftSide = (testPointX * testPointX) / (currentA * currentA) + (testPointY * testPointY) / (currentB * currentB);
      const isOnEllipse = Math.abs(leftSide - 1) < 0.01;

      // Calculate distances to foci
      const c = Math.sqrt(currentA * currentA - currentB * currentB);
      const distF1 = Math.sqrt((testPointX + c) * (testPointX + c) + testPointY * testPointY);
      const distF2 = Math.sqrt((testPointX - c) * (testPointX - c) + testPointY * testPointY);
      const sumDist = distF1 + distF2;

      document.getElementById('ellipseResult').textContent = 
        `Point (${testPointX}, ${testPointY}):\n\n` +
        `Equation check: x²/a² + y²/b² = ${leftSide.toFixed(3)}\n` +
        `Result: ${isOnEllipse ? 'ON ellipse ✓' : leftSide < 1 ? 'INSIDE ellipse' : 'OUTSIDE ellipse'}\n\n` +
        `Distance to F₁: ${distF1.toFixed(3)}\n` +
        `Distance to F₂: ${distF2.toFixed(3)}\n` +
        `Sum of distances: ${sumDist.toFixed(3)} (should be ${2 * currentA} for points on ellipse)`;
      
      drawEllipse();
    }

    function showProperties() {
      const c = Math.sqrt(currentA * currentA - currentB * currentB);
      const e = c / currentA;
      const latusRectum = 2 * currentB * currentB / currentA;
      
      document.getElementById('ellipseResult').textContent = 
        `Ellipse Properties (a = ${currentA}, b = ${currentB}):\n\n` +
        `Equation: x²/${currentA}² + y²/${currentB}² = 1\n` +
        `Center: (0, 0)\n` +
        `Foci: (±${c.toFixed(3)}, 0)\n` +
        `Vertices: (±${currentA}, 0) and (0, ±${currentB})\n` +
        `Major axis: ${2 * currentA}, Minor axis: ${2 * currentB}\n` +
        `Eccentricity: ${e.toFixed(3)}\n` +
        `Latus rectum length: ${latusRectum.toFixed(3)}\n` +
        `Area: ${Math.PI * currentA * currentB.toFixed(3)}\n` +
        `Perimeter (approx): ${Math.PI * (3*(currentA+currentB) - Math.sqrt((3*currentA+currentB)*(currentA+3*currentB))).toFixed(3)}`;
    }

    function resetCanvas() {
      document.getElementById('semiMajor').value = 5;
      document.getElementById('semiMinor').value = 3;
      document.getElementById('testX').value = 3;
      document.getElementById('testY').value = 2;
      currentA = 5;
      currentB = 3;
      testPointX = 3;
      testPointY = 2;
      drawEllipse();
      document.getElementById('ellipseResult').textContent = 'Canvas reset to default ellipse x²/25 + y²/9 = 1';
    }

    function drawEllipse() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const scale = Math.min(30, canvas.width / (2 * currentA + 2), canvas.height / (2 * currentB + 2));
      
      // Draw axes
      ctx.strokeStyle = '#ccc';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(0, centerY);
      ctx.lineTo(canvas.width, centerY);
      ctx.moveTo(centerX, 0);
      ctx.lineTo(centerX, canvas.height);
      ctx.stroke();
      
      // Draw grid
      ctx.strokeStyle = '#f0f0f0';
      ctx.lineWidth = 0.5;
      for (let i = -10; i <= 10; i++) {
        const x = centerX + i * scale;
        const y = centerY + i * scale;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.moveTo(0, y);
        ctx.lineTo(canvas.width, y);
        ctx.stroke();
      }
      
      // Draw ellipse
      ctx.strokeStyle = '#3498db';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.ellipse(centerX, centerY, currentA * scale, currentB * scale, 0, 0, 2 * Math.PI);
      ctx.stroke();
      
      // Draw foci
      const c = Math.sqrt(currentA * currentA - currentB * currentB);
      const focusX1 = centerX + c * scale;
      const focusX2 = centerX - c * scale;
      const focusY = centerY;
      
      ctx.fillStyle = '#e74c3c';
      ctx.beginPath();
      ctx.arc(focusX1, focusY, 4, 0, 2 * Math.PI);
      ctx.arc(focusX2, focusY, 4, 0, 2 * Math.PI);
      ctx.fill();
      
      // Draw vertices
      ctx.fillStyle = '#27ae60';
      ctx.beginPath();
      ctx.arc(centerX + currentA * scale, centerY, 4, 0, 2 * Math.PI); // (a, 0)
      ctx.arc(centerX - currentA * scale, centerY, 4, 0, 2 * Math.PI); // (-a, 0)
      ctx.arc(centerX, centerY + currentB * scale, 4, 0, 2 * Math.PI); // (0, b)
      ctx.arc(centerX, centerY - currentB * scale, 4, 0, 2 * Math.PI); // (0, -b)
      ctx.fill();
      
      // Draw center
      ctx.fillStyle = '#f39c12';
      ctx.beginPath();
      ctx.arc(centerX, centerY, 4, 0, 2 * Math.PI);
      ctx.fill();
      
      // Draw test point
      const testPixelX = centerX + testPointX * scale;
      const testPixelY = centerY - testPointY * scale;
      ctx.fillStyle = '#9b59b6';
      ctx.beginPath();
      ctx.arc(testPixelX, testPixelY, 5, 0, 2 * Math.PI);
      ctx.fill();
      
      // Draw distance lines if point is visible
      if (testPixelX >= 0 && testPixelX <= canvas.width && testPixelY >= 0 && testPixelY <= canvas.height) {
        // Distance to foci
        ctx.strokeStyle = '#95a5a6';
        ctx.setLineDash([3, 3]);
        ctx.beginPath();
        ctx.moveTo(testPixelX, testPixelY);
        ctx.lineTo(focusX1, focusY);
        ctx.moveTo(testPixelX, testPixelY);
        ctx.lineTo(focusX2, focusY);
        ctx.stroke();
        ctx.setLineDash([]);
      }
      
      // Labels
      ctx.fillStyle = '#333';
      ctx.font = '12px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('F₁', focusX1, focusY - 10);
      ctx.fillText('F₂', focusX2, focusY - 10);
      ctx.fillText('O', centerX, centerY - 10);
      ctx.fillText('P', testPixelX, testPixelY - 10);
      
      ctx.textAlign = 'left';
      ctx.fillText(`a=${currentA}`, centerX + currentA * scale + 5, centerY + 4);
      ctx.fillText(`b=${currentB}`, centerX + 5, centerY - currentB * scale - 5);
    }

    function toggleSolution(problemNumber) {
      const solution = document.getElementById(`solution${problemNumber}`);
      if (solution.style.display === 'block') {
        solution.style.display = 'none';
      } else {
        solution.style.display = 'block';
      }
    }

    // Initialize
    drawEllipse();

    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "\\(", right: "\\)", display: false},
                {left: "\\[", right: "\\]", display: true}
            ],
            throwOnError: false
        });
    });
  </script>
   </div>
  </div>
 </body>
</html>
